import uu from"https://esm.sh/react-markdown";import cu from"https://esm.sh/remark-gfm";import Nm from"https://esm.sh/crypto-js";import wE from"https://esm.sh/@emailjs/browser";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function AE(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var cm={exports:{}},jl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv;function zA(){if(Sv)return jl;Sv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:f,ref:o!==void 0?o:null,props:u}}return jl.Fragment=e,jl.jsx=n,jl.jsxs=n,jl}var Rv;function qA(){return Rv||(Rv=1,cm.exports=zA()),cm.exports}var E=qA(),hm={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function HA(){if(Iv)return Re;Iv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),w=Symbol.iterator;function S(M){return M===null||typeof M!="object"?null:(M=w&&M[w]||M["@@iterator"],typeof M=="function"?M:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,K={};function F(M,ee,ue){this.props=M,this.context=ee,this.refs=K,this.updater=ue||P}F.prototype.isReactComponent={},F.prototype.setState=function(M,ee){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,ee,"setState")},F.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function te(){}te.prototype=F.prototype;function ie(M,ee,ue){this.props=M,this.context=ee,this.refs=K,this.updater=ue||P}var re=ie.prototype=new te;re.constructor=ie,L(re,F.prototype),re.isPureReactComponent=!0;var se=Array.isArray,W={H:null,A:null,T:null,S:null,V:null},fe=Object.prototype.hasOwnProperty;function C(M,ee,ue,ae,ye,xe){return ue=xe.ref,{$$typeof:s,type:M,key:ee,ref:ue!==void 0?ue:null,props:xe}}function R(M,ee){return C(M.type,ee,void 0,void 0,void 0,M.props)}function I(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function O(M){var ee={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ue){return ee[ue]})}var D=/\/+/g;function k(M,ee){return typeof M=="object"&&M!==null&&M.key!=null?O(""+M.key):ee.toString(36)}function x(){}function He(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(x,x):(M.status="pending",M.then(function(ee){M.status==="pending"&&(M.status="fulfilled",M.value=ee)},function(ee){M.status==="pending"&&(M.status="rejected",M.reason=ee)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Ve(M,ee,ue,ae,ye){var xe=typeof M;(xe==="undefined"||xe==="boolean")&&(M=null);var we=!1;if(M===null)we=!0;else switch(xe){case"bigint":case"string":case"number":we=!0;break;case"object":switch(M.$$typeof){case s:case e:we=!0;break;case T:return we=M._init,Ve(we(M._payload),ee,ue,ae,ye)}}if(we)return ye=ye(M),we=ae===""?"."+k(M,0):ae,se(ye)?(ue="",we!=null&&(ue=we.replace(D,"$&/")+"/"),Ve(ye,ee,ue,"",function(ti){return ti})):ye!=null&&(I(ye)&&(ye=R(ye,ue+(ye.key==null||M&&M.key===ye.key?"":(""+ye.key).replace(D,"$&/")+"/")+we)),ee.push(ye)),1;we=0;var Mt=ae===""?".":ae+":";if(se(M))for(var tt=0;tt<M.length;tt++)ae=M[tt],xe=Mt+k(ae,tt),we+=Ve(ae,ee,ue,xe,ye);else if(tt=S(M),typeof tt=="function")for(M=tt.call(M),tt=0;!(ae=M.next()).done;)ae=ae.value,xe=Mt+k(ae,tt++),we+=Ve(ae,ee,ue,xe,ye);else if(xe==="object"){if(typeof M.then=="function")return Ve(He(M),ee,ue,ae,ye);throw ee=String(M),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return we}function Q(M,ee,ue){if(M==null)return M;var ae=[],ye=0;return Ve(M,ae,"","",function(xe){return ee.call(ue,xe,ye++)}),ae}function le(M){if(M._status===-1){var ee=M._result;ee=ee(),ee.then(function(ue){(M._status===0||M._status===-1)&&(M._status=1,M._result=ue)},function(ue){(M._status===0||M._status===-1)&&(M._status=2,M._result=ue)}),M._status===-1&&(M._status=0,M._result=ee)}if(M._status===1)return M._result.default;throw M._result}var pe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function ze(){}return Re.Children={map:Q,forEach:function(M,ee,ue){Q(M,function(){ee.apply(this,arguments)},ue)},count:function(M){var ee=0;return Q(M,function(){ee++}),ee},toArray:function(M){return Q(M,function(ee){return ee})||[]},only:function(M){if(!I(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Re.Component=F,Re.Fragment=n,Re.Profiler=o,Re.PureComponent=ie,Re.StrictMode=r,Re.Suspense=g,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=W,Re.__COMPILER_RUNTIME={__proto__:null,c:function(M){return W.H.useMemoCache(M)}},Re.cache=function(M){return function(){return M.apply(null,arguments)}},Re.cloneElement=function(M,ee,ue){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ae=L({},M.props),ye=M.key,xe=void 0;if(ee!=null)for(we in ee.ref!==void 0&&(xe=void 0),ee.key!==void 0&&(ye=""+ee.key),ee)!fe.call(ee,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&ee.ref===void 0||(ae[we]=ee[we]);var we=arguments.length-2;if(we===1)ae.children=ue;else if(1<we){for(var Mt=Array(we),tt=0;tt<we;tt++)Mt[tt]=arguments[tt+2];ae.children=Mt}return C(M.type,ye,void 0,void 0,xe,ae)},Re.createContext=function(M){return M={$$typeof:f,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},Re.createElement=function(M,ee,ue){var ae,ye={},xe=null;if(ee!=null)for(ae in ee.key!==void 0&&(xe=""+ee.key),ee)fe.call(ee,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(ye[ae]=ee[ae]);var we=arguments.length-2;if(we===1)ye.children=ue;else if(1<we){for(var Mt=Array(we),tt=0;tt<we;tt++)Mt[tt]=arguments[tt+2];ye.children=Mt}if(M&&M.defaultProps)for(ae in we=M.defaultProps,we)ye[ae]===void 0&&(ye[ae]=we[ae]);return C(M,xe,void 0,void 0,null,ye)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(M){return{$$typeof:m,render:M}},Re.isValidElement=I,Re.lazy=function(M){return{$$typeof:T,_payload:{_status:-1,_result:M},_init:le}},Re.memo=function(M,ee){return{$$typeof:y,type:M,compare:ee===void 0?null:ee}},Re.startTransition=function(M){var ee=W.T,ue={};W.T=ue;try{var ae=M(),ye=W.S;ye!==null&&ye(ue,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(ze,pe)}catch(xe){pe(xe)}finally{W.T=ee}},Re.unstable_useCacheRefresh=function(){return W.H.useCacheRefresh()},Re.use=function(M){return W.H.use(M)},Re.useActionState=function(M,ee,ue){return W.H.useActionState(M,ee,ue)},Re.useCallback=function(M,ee){return W.H.useCallback(M,ee)},Re.useContext=function(M){return W.H.useContext(M)},Re.useDebugValue=function(){},Re.useDeferredValue=function(M,ee){return W.H.useDeferredValue(M,ee)},Re.useEffect=function(M,ee,ue){var ae=W.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(M,ee)},Re.useId=function(){return W.H.useId()},Re.useImperativeHandle=function(M,ee,ue){return W.H.useImperativeHandle(M,ee,ue)},Re.useInsertionEffect=function(M,ee){return W.H.useInsertionEffect(M,ee)},Re.useLayoutEffect=function(M,ee){return W.H.useLayoutEffect(M,ee)},Re.useMemo=function(M,ee){return W.H.useMemo(M,ee)},Re.useOptimistic=function(M,ee){return W.H.useOptimistic(M,ee)},Re.useReducer=function(M,ee,ue){return W.H.useReducer(M,ee,ue)},Re.useRef=function(M){return W.H.useRef(M)},Re.useState=function(M){return W.H.useState(M)},Re.useSyncExternalStore=function(M,ee,ue){return W.H.useSyncExternalStore(M,ee,ue)},Re.useTransition=function(){return W.H.useTransition()},Re.version="19.1.0",Re}var xv;function ap(){return xv||(xv=1,hm.exports=HA()),hm.exports}var ne=ap();const op=AE(ne);var fm={exports:{}},Bl={},dm={exports:{}},mm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv;function FA(){return Cv||(Cv=1,function(s){function e(Q,le){var pe=Q.length;Q.push(le);e:for(;0<pe;){var ze=pe-1>>>1,M=Q[ze];if(0<o(M,le))Q[ze]=le,Q[pe]=M,pe=ze;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var le=Q[0],pe=Q.pop();if(pe!==le){Q[0]=pe;e:for(var ze=0,M=Q.length,ee=M>>>1;ze<ee;){var ue=2*(ze+1)-1,ae=Q[ue],ye=ue+1,xe=Q[ye];if(0>o(ae,pe))ye<M&&0>o(xe,ae)?(Q[ze]=xe,Q[ye]=pe,ze=ye):(Q[ze]=ae,Q[ue]=pe,ze=ue);else if(ye<M&&0>o(xe,pe))Q[ze]=xe,Q[ye]=pe,ze=ye;else break e}}return le}function o(Q,le){var pe=Q.sortIndex-le.sortIndex;return pe!==0?pe:Q.id-le.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var f=Date,m=f.now();s.unstable_now=function(){return f.now()-m}}var g=[],y=[],T=1,w=null,S=3,P=!1,L=!1,K=!1,F=!1,te=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function se(Q){for(var le=n(y);le!==null;){if(le.callback===null)r(y);else if(le.startTime<=Q)r(y),le.sortIndex=le.expirationTime,e(g,le);else break;le=n(y)}}function W(Q){if(K=!1,se(Q),!L)if(n(g)!==null)L=!0,fe||(fe=!0,k());else{var le=n(y);le!==null&&Ve(W,le.startTime-Q)}}var fe=!1,C=-1,R=5,I=-1;function O(){return F?!0:!(s.unstable_now()-I<R)}function D(){if(F=!1,fe){var Q=s.unstable_now();I=Q;var le=!0;try{e:{L=!1,K&&(K=!1,ie(C),C=-1),P=!0;var pe=S;try{t:{for(se(Q),w=n(g);w!==null&&!(w.expirationTime>Q&&O());){var ze=w.callback;if(typeof ze=="function"){w.callback=null,S=w.priorityLevel;var M=ze(w.expirationTime<=Q);if(Q=s.unstable_now(),typeof M=="function"){w.callback=M,se(Q),le=!0;break t}w===n(g)&&r(g),se(Q)}else r(g);w=n(g)}if(w!==null)le=!0;else{var ee=n(y);ee!==null&&Ve(W,ee.startTime-Q),le=!1}}break e}finally{w=null,S=pe,P=!1}le=void 0}}finally{le?k():fe=!1}}}var k;if(typeof re=="function")k=function(){re(D)};else if(typeof MessageChannel<"u"){var x=new MessageChannel,He=x.port2;x.port1.onmessage=D,k=function(){He.postMessage(null)}}else k=function(){te(D,0)};function Ve(Q,le){C=te(function(){Q(s.unstable_now())},le)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Q){Q.callback=null},s.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Q?Math.floor(1e3/Q):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(Q){switch(S){case 1:case 2:case 3:var le=3;break;default:le=S}var pe=S;S=le;try{return Q()}finally{S=pe}},s.unstable_requestPaint=function(){F=!0},s.unstable_runWithPriority=function(Q,le){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var pe=S;S=Q;try{return le()}finally{S=pe}},s.unstable_scheduleCallback=function(Q,le,pe){var ze=s.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?ze+pe:ze):pe=ze,Q){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=pe+M,Q={id:T++,callback:le,priorityLevel:Q,startTime:pe,expirationTime:M,sortIndex:-1},pe>ze?(Q.sortIndex=pe,e(y,Q),n(g)===null&&Q===n(y)&&(K?(ie(C),C=-1):K=!0,Ve(W,pe-ze))):(Q.sortIndex=M,e(g,Q),L||P||(L=!0,fe||(fe=!0,k()))),Q},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(Q){var le=S;return function(){var pe=S;S=le;try{return Q.apply(this,arguments)}finally{S=pe}}}}(mm)),mm}var Nv;function GA(){return Nv||(Nv=1,dm.exports=FA()),dm.exports}var pm={exports:{}},Wt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv;function QA(){if(Dv)return Wt;Dv=1;var s=ap();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)y+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,T){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:g,containerInfo:y,implementation:T}}var f=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Wt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Wt.createPortal=function(g,y){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,T)},Wt.flushSync=function(g){var y=f.T,T=r.p;try{if(f.T=null,r.p=2,g)return g()}finally{f.T=y,r.p=T,r.d.f()}},Wt.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},Wt.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Wt.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var T=y.as,w=m(T,y.crossOrigin),S=typeof y.integrity=="string"?y.integrity:void 0,P=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;T==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:w,integrity:S,fetchPriority:P}):T==="script"&&r.d.X(g,{crossOrigin:w,integrity:S,fetchPriority:P,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Wt.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var T=m(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},Wt.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var T=y.as,w=m(T,y.crossOrigin);r.d.L(g,T,{crossOrigin:w,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Wt.preloadModule=function(g,y){if(typeof g=="string")if(y){var T=m(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},Wt.requestFormReset=function(g){r.d.r(g)},Wt.unstable_batchedUpdates=function(g,y){return g(y)},Wt.useFormState=function(g,y,T){return f.H.useFormState(g,y,T)},Wt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Wt.version="19.1.0",Wt}var Ov;function KA(){if(Ov)return pm.exports;Ov=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),pm.exports=QA(),pm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv;function YA(){if(Mv)return Bl;Mv=1;var s=GA(),e=ap(),n=KA();function r(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(r(188))}function g(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(r(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return m(h),t;if(d===l)return m(h),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=h,l=d;else{for(var v=!1,b=h.child;b;){if(b===a){v=!0,a=h,l=d;break}if(b===l){v=!0,l=h,a=d;break}b=b.sibling}if(!v){for(b=d.child;b;){if(b===a){v=!0,a=d,l=h;break}if(b===l){v=!0,l=d,a=h;break}b=b.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:i}function y(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=y(t),i!==null)return i;t=t.sibling}return null}var T=Object.assign,w=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),te=Symbol.for("react.provider"),ie=Symbol.for("react.consumer"),re=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var x=Symbol.for("react.client.reference");function He(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===x?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case L:return"Fragment";case F:return"Profiler";case K:return"StrictMode";case W:return"Suspense";case fe:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case P:return"Portal";case re:return(t.displayName||"Context")+".Provider";case ie:return(t._context.displayName||"Context")+".Consumer";case se:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return i=t.displayName||null,i!==null?i:He(t.type)||"Memo";case R:i=t._payload,t=t._init;try{return He(t(i))}catch{}}return null}var Ve=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},ze=[],M=-1;function ee(t){return{current:t}}function ue(t){0>M||(t.current=ze[M],ze[M]=null,M--)}function ae(t,i){M++,ze[M]=t.current,t.current=i}var ye=ee(null),xe=ee(null),we=ee(null),Mt=ee(null);function tt(t,i){switch(ae(we,i),ae(xe,t),ae(ye,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?J_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=J_(i),t=ev(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}ue(ye),ae(ye,t)}function ti(){ue(ye),ue(xe),ue(we)}function fs(t){t.memoizedState!==null&&ae(Mt,t);var i=ye.current,a=ev(i,t.type);i!==a&&(ae(xe,t),ae(ye,a))}function Ci(t){xe.current===t&&(ue(ye),ue(xe)),Mt.current===t&&(ue(Mt),kl._currentValue=pe)}var cr=Object.prototype.hasOwnProperty,hr=s.unstable_scheduleCallback,fr=s.unstable_cancelCallback,Do=s.unstable_shouldYield,Au=s.unstable_requestPaint,Nn=s.unstable_now,cf=s.unstable_getCurrentPriorityLevel,Oo=s.unstable_ImmediatePriority,ca=s.unstable_UserBlockingPriority,dr=s.unstable_NormalPriority,hf=s.unstable_LowPriority,ha=s.unstable_IdlePriority,Mo=s.log,Su=s.unstable_setDisableYieldValue,ct=null,Qe=null;function _n(t){if(typeof Mo=="function"&&Su(t),Qe&&typeof Qe.setStrictMode=="function")try{Qe.setStrictMode(ct,t)}catch{}}var $t=Math.clz32?Math.clz32:mr,Ru=Math.log,ff=Math.LN2;function mr(t){return t>>>=0,t===0?32:31-(Ru(t)/ff|0)|0}var pr=256,gr=4194304;function Qn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function fa(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?h=Qn(l):(v&=b,v!==0?h=Qn(v):a||(a=b&~t,a!==0&&(h=Qn(a))))):(b=l&~d,b!==0?h=Qn(b):v!==0?h=Qn(v):a||(a=l&~t,a!==0&&(h=Qn(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function yr(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function ko(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vo(){var t=pr;return pr<<=1,(pr&4194048)===0&&(pr=256),t}function Po(){var t=gr;return gr<<=1,(gr&62914560)===0&&(gr=4194304),t}function Ni(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Di(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Uo(t,i,a,l,h,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,N=t.expirationTimes,z=t.hiddenUpdates;for(a=v&~a;0<a;){var Y=31-$t(a),Z=1<<Y;b[Y]=0,N[Y]=-1;var q=z[Y];if(q!==null)for(z[Y]=null,Y=0;Y<q.length;Y++){var H=q[Y];H!==null&&(H.lane&=-536870913)}a&=~Z}l!==0&&ni(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~i))}function ni(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-$t(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function Lo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-$t(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function ds(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function da(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ms(){var t=le.p;return t!==0?t:(t=window.event,t===void 0?32:vv(t.type))}function Iu(t,i){var a=le.p;try{return le.p=t,i()}finally{le.p=a}}var rt=Math.random().toString(36).slice(2),It="__reactFiber$"+rt,Et="__reactProps$"+rt,Dn="__reactContainer$"+rt,jo="__reactEvents$"+rt,df="__reactListeners$"+rt,ps="__reactHandles$"+rt,xu="__reactResources$"+rt,_r="__reactMarker$"+rt;function gs(t){delete t[It],delete t[Et],delete t[jo],delete t[df],delete t[ps]}function Oi(t){var i=t[It];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Dn]||a[It]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=sv(t);t!==null;){if(a=t[It])return a;t=sv(t)}return i}t=a,a=t.parentNode}return null}function ii(t){if(t=t[It]||t[Dn]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function si(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(r(33))}function rn(t){var i=t[xu];return i||(i=t[xu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function gt(t){t[_r]=!0}var Bo=new Set,ma={};function Kn(t,i){Mi(t,i),Mi(t+"Capture",i)}function Mi(t,i){for(ma[t]=i,t=0;t<i.length;t++)Bo.add(i[t])}var Cu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nu={},vr={};function Du(t){return cr.call(vr,t)?!0:cr.call(Nu,t)?!1:Cu.test(t)?vr[t]=!0:(Nu[t]=!0,!1)}function ys(t,i,a){if(Du(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function ri(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function zt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}var Er,Ou;function ki(t){if(Er===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Er=i&&i[1]||"",Ou=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Er+t+Ou}var pa=!1;function ga(t,i){if(!t||pa)return"";pa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var Z=function(){throw Error()};if(Object.defineProperty(Z.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Z,[])}catch(H){var q=H}Reflect.construct(t,[],Z)}else{try{Z.call()}catch(H){q=H}t.call(Z.prototype)}}else{try{throw Error()}catch(H){q=H}(Z=t())&&typeof Z.catch=="function"&&Z.catch(function(){})}}catch(H){if(H&&q&&typeof H.stack=="string")return[H.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],b=d[1];if(v&&b){var N=v.split(`
`),z=b.split(`
`);for(h=l=0;l<N.length&&!N[l].includes("DetermineComponentFrameRoot");)l++;for(;h<z.length&&!z[h].includes("DetermineComponentFrameRoot");)h++;if(l===N.length||h===z.length)for(l=N.length-1,h=z.length-1;1<=l&&0<=h&&N[l]!==z[h];)h--;for(;1<=l&&0<=h;l--,h--)if(N[l]!==z[h]){if(l!==1||h!==1)do if(l--,h--,0>h||N[l]!==z[h]){var Y=`
`+N[l].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=l&&0<=h);break}}}finally{pa=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ki(a):""}function zo(t){switch(t.tag){case 26:case 27:case 5:return ki(t.type);case 16:return ki("Lazy");case 13:return ki("Suspense");case 19:return ki("SuspenseList");case 0:case 15:return ga(t.type,!1);case 11:return ga(t.type.render,!1);case 1:return ga(t.type,!0);case 31:return ki("Activity");default:return""}}function ya(t){try{var i="";do i+=zo(t),t=t.return;while(t);return i}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function an(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qo(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function mf(t){var i=qo(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,d=a.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(v){l=""+v,d.call(this,v)}}),Object.defineProperty(t,i,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function _a(t){t._valueTracker||(t._valueTracker=mf(t))}function Ho(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=qo(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Tr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var pf=/[\n"\\]/g;function Tt(t){return t.replace(pf,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function vn(t,i,a,l,h,d,v,b){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),i!=null?v==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+an(i)):t.value!==""+an(i)&&(t.value=""+an(i)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),i!=null?_s(t,v,an(i)):a!=null?_s(t,v,an(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+an(b):t.removeAttribute("name")}function br(t,i,a,l,h,d,v,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;a=a!=null?""+an(a):"",i=i!=null?""+an(i):a,b||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function _s(t,i,a){i==="number"&&Tr(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Vi(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+an(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function $e(t,i,a){if(i!=null&&(i=""+an(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+an(a):""}function wr(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(Ve(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=an(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function On(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Ar=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mu(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Ar.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Fo(t,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Mu(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Mu(t,d,i[d])}function Go(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function va(t){return yf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var Pi=null;function Mn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ui=null,Li=null;function Qo(t){var i=ii(t);if(i&&(t=i.stateNode)){var a=t[Et]||null;e:switch(t=i.stateNode,i.type){case"input":if(vn(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Tt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Et]||null;if(!h)throw Error(r(90));vn(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Ho(l)}break e;case"textarea":$e(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Vi(t,!!a.multiple,i,!1)}}}var ai=!1;function ku(t,i,a){if(ai)return t(i,a);ai=!0;try{var l=t(i);return l}finally{if(ai=!1,(Ui!==null||Li!==null)&&(Ic(),Ui&&(i=Ui,t=Li,Li=Ui=null,Qo(i),t)))for(i=0;i<t.length;i++)Qo(t[i])}}function Sr(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Et]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kn=!1;if(Yn)try{var Rr={};Object.defineProperty(Rr,"passive",{get:function(){kn=!0}}),window.addEventListener("test",Rr,Rr),window.removeEventListener("test",Rr,Rr)}catch{kn=!1}var oi=null,vs=null,ji=null;function Ko(){if(ji)return ji;var t,i=vs,a=i.length,l,h="value"in oi?oi.value:oi.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var v=a-t;for(l=1;l<=v&&i[a-l]===h[d-l];l++);return ji=h.slice(t,1<l?1-l:void 0)}function li(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ui(){return!0}function Yo(){return!1}function kt(t){function i(a,l,h,d,v){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?ui:Yo,this.isPropagationStopped=Yo,this}return T(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ui)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ui)},persist:function(){},isPersistent:ui}),i}var Fe={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ea=kt(Fe),Ir=T({},Fe,{view:0,detail:0}),Vu=kt(Ir),Ta,ba,ci,xr=T({},Ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ci&&(ci&&t.type==="mousemove"?(Ta=t.screenX-ci.screenX,ba=t.screenY-ci.screenY):ba=Ta=0,ci=t),Ta)},movementY:function(t){return"movementY"in t?t.movementY:ba}}),Vn=kt(xr),Pu=T({},xr,{dataTransfer:0}),_f=kt(Pu),Cr=T({},Ir,{relatedTarget:0}),wa=kt(Cr),$o=T({},Fe,{animationName:0,elapsedTime:0,pseudoElement:0}),Aa=kt($o),Uu=T({},Fe,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Sa=kt(Uu),vf=T({},Fe,{data:0}),Xo=kt(vf),Nr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ju={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wo(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=ju[t])?!!i[t]:!1}function Dr(){return Wo}var Bu=T({},Ir,{key:function(t){if(t.key){var i=Nr[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=li(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Lu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dr,charCode:function(t){return t.type==="keypress"?li(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?li(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ra=kt(Bu),zu=T({},xr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zo=kt(zu),Bi=T({},Ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dr}),qu=kt(Bi),Hu=T({},Fe,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fu=kt(Hu),Gu=T({},xr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ia=kt(Gu),on=T({},Fe,{newState:0,oldState:0}),Qu=kt(on),Ku=[9,13,27,32],hi=Yn&&"CompositionEvent"in window,c=null;Yn&&"documentMode"in document&&(c=document.documentMode);var p=Yn&&"TextEvent"in window&&!c,_=Yn&&(!hi||c&&8<c&&11>=c),A=" ",j=!1;function G(t,i){switch(t){case"keyup":return Ku.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oe(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pe=!1;function xt(t,i){switch(t){case"compositionend":return oe(i);case"keypress":return i.which!==32?null:(j=!0,A);case"textInput":return t=i.data,t===A&&j?null:t;default:return null}}function Ue(t,i){if(Pe)return t==="compositionend"||!hi&&G(t,i)?(t=Ko(),ji=vs=oi=null,Pe=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _&&i.locale!=="ko"?null:i.data;default:return null}}var Vt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ct(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Vt[t.type]:i==="textarea"}function zi(t,i,a,l){Ui?Li?Li.push(l):Li=[l]:Ui=l,i=Mc(i,"onChange"),0<i.length&&(a=new Ea("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var qt=null,fi=null;function Jo(t){Y_(t,0)}function Yu(t){var i=si(t);if(Ho(i))return t}function pg(t,i){if(t==="change")return i}var gg=!1;if(Yn){var Ef;if(Yn){var Tf="oninput"in document;if(!Tf){var yg=document.createElement("div");yg.setAttribute("oninput","return;"),Tf=typeof yg.oninput=="function"}Ef=Tf}else Ef=!1;gg=Ef&&(!document.documentMode||9<document.documentMode)}function _g(){qt&&(qt.detachEvent("onpropertychange",vg),fi=qt=null)}function vg(t){if(t.propertyName==="value"&&Yu(fi)){var i=[];zi(i,fi,t,Mn(t)),ku(Jo,i)}}function yw(t,i,a){t==="focusin"?(_g(),qt=i,fi=a,qt.attachEvent("onpropertychange",vg)):t==="focusout"&&_g()}function _w(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yu(fi)}function vw(t,i){if(t==="click")return Yu(i)}function Ew(t,i){if(t==="input"||t==="change")return Yu(i)}function Tw(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var En=typeof Object.is=="function"?Object.is:Tw;function el(t,i){if(En(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!cr.call(i,h)||!En(t[h],i[h]))return!1}return!0}function Eg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tg(t,i){var a=Eg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Eg(a)}}function bg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?bg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function wg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Tr(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Tr(t.document)}return i}function bf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var bw=Yn&&"documentMode"in document&&11>=document.documentMode,xa=null,wf=null,tl=null,Af=!1;function Ag(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Af||xa==null||xa!==Tr(l)||(l=xa,"selectionStart"in l&&bf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),tl&&el(tl,l)||(tl=l,l=Mc(wf,"onSelect"),0<l.length&&(i=new Ea("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=xa)))}function Or(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Ca={animationend:Or("Animation","AnimationEnd"),animationiteration:Or("Animation","AnimationIteration"),animationstart:Or("Animation","AnimationStart"),transitionrun:Or("Transition","TransitionRun"),transitionstart:Or("Transition","TransitionStart"),transitioncancel:Or("Transition","TransitionCancel"),transitionend:Or("Transition","TransitionEnd")},Sf={},Sg={};Yn&&(Sg=document.createElement("div").style,"AnimationEvent"in window||(delete Ca.animationend.animation,delete Ca.animationiteration.animation,delete Ca.animationstart.animation),"TransitionEvent"in window||delete Ca.transitionend.transition);function Mr(t){if(Sf[t])return Sf[t];if(!Ca[t])return t;var i=Ca[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Sg)return Sf[t]=i[a];return t}var Rg=Mr("animationend"),Ig=Mr("animationiteration"),xg=Mr("animationstart"),ww=Mr("transitionrun"),Aw=Mr("transitionstart"),Sw=Mr("transitioncancel"),Cg=Mr("transitionend"),Ng=new Map,Rf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rf.push("scrollEnd");function $n(t,i){Ng.set(t,i),Kn(i,[t])}var Dg=new WeakMap;function Pn(t,i){if(typeof t=="object"&&t!==null){var a=Dg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:ya(i)},Dg.set(t,i),i)}return{value:t,source:i,stack:ya(i)}}var Un=[],Na=0,If=0;function $u(){for(var t=Na,i=If=Na=0;i<t;){var a=Un[i];Un[i++]=null;var l=Un[i];Un[i++]=null;var h=Un[i];Un[i++]=null;var d=Un[i];if(Un[i++]=null,l!==null&&h!==null){var v=l.pending;v===null?h.next=h:(h.next=v.next,v.next=h),l.pending=h}d!==0&&Og(a,h,d)}}function Xu(t,i,a,l){Un[Na++]=t,Un[Na++]=i,Un[Na++]=a,Un[Na++]=l,If|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function xf(t,i,a,l){return Xu(t,i,a,l),Wu(t)}function Da(t,i){return Xu(t,null,null,i),Wu(t)}function Og(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-$t(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function Wu(t){if(50<Rl)throw Rl=0,kd=null,Error(r(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Oa={};function Rw(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(t,i,a,l){return new Rw(t,i,a,l)}function Cf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qi(t,i){var a=t.alternate;return a===null?(a=Tn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Mg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function Zu(t,i,a,l,h,d){var v=0;if(l=t,typeof t=="function")Cf(t)&&(v=1);else if(typeof t=="string")v=xA(t,a,ye.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=Tn(31,a,i,h),t.elementType=I,t.lanes=d,t;case L:return kr(a.children,h,d,i);case K:v=8,h|=24;break;case F:return t=Tn(12,a,i,h|2),t.elementType=F,t.lanes=d,t;case W:return t=Tn(13,a,i,h),t.elementType=W,t.lanes=d,t;case fe:return t=Tn(19,a,i,h),t.elementType=fe,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case te:case re:v=10;break e;case ie:v=9;break e;case se:v=11;break e;case C:v=14;break e;case R:v=16,l=null;break e}v=29,a=Error(r(130,t===null?"null":typeof t,"")),l=null}return i=Tn(v,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function kr(t,i,a,l){return t=Tn(7,t,l,i),t.lanes=a,t}function Nf(t,i,a){return t=Tn(6,t,null,i),t.lanes=a,t}function Df(t,i,a){return i=Tn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Ma=[],ka=0,Ju=null,ec=0,Ln=[],jn=0,Vr=null,Hi=1,Fi="";function Pr(t,i){Ma[ka++]=ec,Ma[ka++]=Ju,Ju=t,ec=i}function kg(t,i,a){Ln[jn++]=Hi,Ln[jn++]=Fi,Ln[jn++]=Vr,Vr=t;var l=Hi;t=Fi;var h=32-$t(l)-1;l&=~(1<<h),a+=1;var d=32-$t(i)+h;if(30<d){var v=h-h%5;d=(l&(1<<v)-1).toString(32),l>>=v,h-=v,Hi=1<<32-$t(i)+h|a<<h|l,Fi=d+t}else Hi=1<<d|a<<h|l,Fi=t}function Of(t){t.return!==null&&(Pr(t,1),kg(t,1,0))}function Mf(t){for(;t===Ju;)Ju=Ma[--ka],Ma[ka]=null,ec=Ma[--ka],Ma[ka]=null;for(;t===Vr;)Vr=Ln[--jn],Ln[jn]=null,Fi=Ln[--jn],Ln[jn]=null,Hi=Ln[--jn],Ln[jn]=null}var ln=null,ht=null,qe=!1,Ur=null,di=!1,kf=Error(r(519));function Lr(t){var i=Error(r(418,""));throw sl(Pn(i,t)),kf}function Vg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[It]=t,i[Et]=l,a){case"dialog":De("cancel",i),De("close",i);break;case"iframe":case"object":case"embed":De("load",i);break;case"video":case"audio":for(a=0;a<xl.length;a++)De(xl[a],i);break;case"source":De("error",i);break;case"img":case"image":case"link":De("error",i),De("load",i);break;case"details":De("toggle",i);break;case"input":De("invalid",i),br(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),_a(i);break;case"select":De("invalid",i);break;case"textarea":De("invalid",i),wr(i,l.value,l.defaultValue,l.children),_a(i)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||Z_(i.textContent,a)?(l.popover!=null&&(De("beforetoggle",i),De("toggle",i)),l.onScroll!=null&&De("scroll",i),l.onScrollEnd!=null&&De("scrollend",i),l.onClick!=null&&(i.onclick=kc),i=!0):i=!1,i||Lr(t)}function Pg(t){for(ln=t.return;ln;)switch(ln.tag){case 5:case 13:di=!1;return;case 27:case 3:di=!0;return;default:ln=ln.return}}function nl(t){if(t!==ln)return!1;if(!qe)return Pg(t),qe=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Xd(t.type,t.memoizedProps)),a=!a),a&&ht&&Lr(t),Pg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(i===0){ht=Wn(t.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++;t=t.nextSibling}ht=null}}else i===27?(i=ht,Vs(t.type)?(t=em,em=null,ht=t):ht=i):ht=ln?Wn(t.stateNode.nextSibling):null;return!0}function il(){ht=ln=null,qe=!1}function Ug(){var t=Ur;return t!==null&&(fn===null?fn=t:fn.push.apply(fn,t),Ur=null),t}function sl(t){Ur===null?Ur=[t]:Ur.push(t)}var Vf=ee(null),jr=null,Gi=null;function Es(t,i,a){ae(Vf,i._currentValue),i._currentValue=a}function Qi(t){t._currentValue=Vf.current,ue(Vf)}function Pf(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function Uf(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var v=h.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=h;for(var N=0;N<i.length;N++)if(b.context===i[N]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),Pf(d.return,a,t),l||(v=null);break e}d=b.next}}else if(h.tag===18){if(v=h.return,v===null)throw Error(r(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Pf(v,a,t),v=null}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}}function rl(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var v=h.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var b=h.type;En(h.pendingProps.value,v.value)||(t!==null?t.push(b):t=[b])}}else if(h===Mt.current){if(v=h.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(kl):t=[kl])}h=h.return}t!==null&&Uf(i,t,a,l),i.flags|=262144}function tc(t){for(t=t.firstContext;t!==null;){if(!En(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Br(t){jr=t,Gi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Xt(t){return Lg(jr,t)}function nc(t,i){return jr===null&&Br(t),Lg(t,i)}function Lg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Gi===null){if(t===null)throw Error(r(308));Gi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Gi=Gi.next=i;return a}var Iw=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},xw=s.unstable_scheduleCallback,Cw=s.unstable_NormalPriority,Nt={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lf(){return{controller:new Iw,data:new Map,refCount:0}}function al(t){t.refCount--,t.refCount===0&&xw(Cw,function(){t.controller.abort()})}var ol=null,jf=0,Va=0,Pa=null;function Nw(t,i){if(ol===null){var a=ol=[];jf=0,Va=zd(),Pa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return jf++,i.then(jg,jg),i}function jg(){if(--jf===0&&ol!==null){Pa!==null&&(Pa.status="fulfilled");var t=ol;ol=null,Va=0,Pa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function Dw(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Bg=Q.S;Q.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&Nw(t,i),Bg!==null&&Bg(t,i)};var zr=ee(null);function Bf(){var t=zr.current;return t!==null?t:nt.pooledCache}function ic(t,i){i===null?ae(zr,zr.current):ae(zr,i.pool)}function zg(){var t=Bf();return t===null?null:{parent:Nt._currentValue,pool:t}}var ll=Error(r(460)),qg=Error(r(474)),sc=Error(r(542)),zf={then:function(){}};function Hg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function rc(){}function Fg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(rc,rc),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Qg(t),t;default:if(typeof i.status=="string")i.then(rc,rc);else{if(t=nt,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Qg(t),t}throw ul=i,ll}}var ul=null;function Gg(){if(ul===null)throw Error(r(459));var t=ul;return ul=null,t}function Qg(t){if(t===ll||t===sc)throw Error(r(483))}var Ts=!1;function qf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function bs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ws(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ke&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=Wu(t),Og(t,null,a),i}return Xu(t,l,i,a),Wu(t)}function cl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Lo(t,a)}}function Ff(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Gf=!1;function hl(){if(Gf){var t=Pa;if(t!==null)throw t}}function fl(t,i,a,l){Gf=!1;var h=t.updateQueue;Ts=!1;var d=h.firstBaseUpdate,v=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var N=b,z=N.next;N.next=null,v===null?d=z:v.next=z,v=N;var Y=t.alternate;Y!==null&&(Y=Y.updateQueue,b=Y.lastBaseUpdate,b!==v&&(b===null?Y.firstBaseUpdate=z:b.next=z,Y.lastBaseUpdate=N))}if(d!==null){var Z=h.baseState;v=0,Y=z=N=null,b=d;do{var q=b.lane&-536870913,H=q!==b.lane;if(H?(Le&q)===q:(l&q)===q){q!==0&&q===Va&&(Gf=!0),Y!==null&&(Y=Y.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var be=t,_e=b;q=i;var Ze=a;switch(_e.tag){case 1:if(be=_e.payload,typeof be=="function"){Z=be.call(Ze,Z,q);break e}Z=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=_e.payload,q=typeof be=="function"?be.call(Ze,Z,q):be,q==null)break e;Z=T({},Z,q);break e;case 2:Ts=!0}}q=b.callback,q!==null&&(t.flags|=64,H&&(t.flags|=8192),H=h.callbacks,H===null?h.callbacks=[q]:H.push(q))}else H={lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Y===null?(z=Y=H,N=Z):Y=Y.next=H,v|=q;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;H=b,b=H.next,H.next=null,h.lastBaseUpdate=H,h.shared.pending=null}}while(!0);Y===null&&(N=Z),h.baseState=N,h.firstBaseUpdate=z,h.lastBaseUpdate=Y,d===null&&(h.shared.lanes=0),Ds|=v,t.lanes=v,t.memoizedState=Z}}function Kg(t,i){if(typeof t!="function")throw Error(r(191,t));t.call(i)}function Yg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Kg(a[t],i)}var Ua=ee(null),ac=ee(0);function $g(t,i){t=Ji,ae(ac,t),ae(Ua,i),Ji=t|i.baseLanes}function Qf(){ae(ac,Ji),ae(Ua,Ua.current)}function Kf(){Ji=ac.current,ue(Ua),ue(ac)}var As=0,Ie=null,Xe=null,bt=null,oc=!1,La=!1,qr=!1,lc=0,dl=0,ja=null,Ow=0;function yt(){throw Error(r(321))}function Yf(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!En(t[a],i[a]))return!1;return!0}function $f(t,i,a,l,h,d){return As=d,Ie=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Q.H=t===null||t.memoizedState===null?Oy:My,qr=!1,d=a(l,h),qr=!1,La&&(d=Wg(i,a,l,h)),Xg(t),d}function Xg(t){Q.H=mc;var i=Xe!==null&&Xe.next!==null;if(As=0,bt=Xe=Ie=null,oc=!1,dl=0,ja=null,i)throw Error(r(300));t===null||Pt||(t=t.dependencies,t!==null&&tc(t)&&(Pt=!0))}function Wg(t,i,a,l){Ie=t;var h=0;do{if(La&&(ja=null),dl=0,La=!1,25<=h)throw Error(r(301));if(h+=1,bt=Xe=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Q.H=jw,d=i(a,l)}while(La);return d}function Mw(){var t=Q.H,i=t.useState()[0];return i=typeof i.then=="function"?ml(i):i,t=t.useState()[0],(Xe!==null?Xe.memoizedState:null)!==t&&(Ie.flags|=1024),i}function Xf(){var t=lc!==0;return lc=0,t}function Wf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function Zf(t){if(oc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}oc=!1}As=0,bt=Xe=Ie=null,La=!1,dl=lc=0,ja=null}function cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bt===null?Ie.memoizedState=bt=t:bt=bt.next=t,bt}function wt(){if(Xe===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var i=bt===null?Ie.memoizedState:bt.next;if(i!==null)bt=i,Xe=t;else{if(t===null)throw Ie.alternate===null?Error(r(467)):Error(r(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},bt===null?Ie.memoizedState=bt=t:bt=bt.next=t}return bt}function Jf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ml(t){var i=dl;return dl+=1,ja===null&&(ja=[]),t=Fg(ja,t,i),i=Ie,(bt===null?i.memoizedState:bt.next)===null&&(i=i.alternate,Q.H=i===null||i.memoizedState===null?Oy:My),t}function uc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return ml(t);if(t.$$typeof===re)return Xt(t)}throw Error(r(438,String(t)))}function ed(t){var i=null,a=Ie.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ie.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=Jf(),Ie.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=O;return i.index++,a}function Ki(t,i){return typeof i=="function"?i(t):i}function cc(t){var i=wt();return td(i,Xe,t)}function td(t,i,a){var l=t.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var v=h.next;h.next=d.next,d.next=v}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var b=v=null,N=null,z=i,Y=!1;do{var Z=z.lane&-536870913;if(Z!==z.lane?(Le&Z)===Z:(As&Z)===Z){var q=z.revertLane;if(q===0)N!==null&&(N=N.next={lane:0,revertLane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),Z===Va&&(Y=!0);else if((As&q)===q){z=z.next,q===Va&&(Y=!0);continue}else Z={lane:0,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},N===null?(b=N=Z,v=d):N=N.next=Z,Ie.lanes|=q,Ds|=q;Z=z.action,qr&&a(d,Z),d=z.hasEagerState?z.eagerState:a(d,Z)}else q={lane:Z,revertLane:z.revertLane,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},N===null?(b=N=q,v=d):N=N.next=q,Ie.lanes|=Z,Ds|=Z;z=z.next}while(z!==null&&z!==i);if(N===null?v=d:N.next=b,!En(d,t.memoizedState)&&(Pt=!0,Y&&(a=Pa,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=N,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function nd(t){var i=wt(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var v=h=h.next;do d=t(d,v.action),v=v.next;while(v!==h);En(d,i.memoizedState)||(Pt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function Zg(t,i,a){var l=Ie,h=wt(),d=qe;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var v=!En((Xe||h).memoizedState,a);v&&(h.memoizedState=a,Pt=!0),h=h.queue;var b=ty.bind(null,l,h,t);if(pl(2048,8,b,[t]),h.getSnapshot!==i||v||bt!==null&&bt.memoizedState.tag&1){if(l.flags|=2048,Ba(9,hc(),ey.bind(null,l,h,a,i),null),nt===null)throw Error(r(349));d||(As&124)!==0||Jg(l,i,a)}return a}function Jg(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ie.updateQueue,i===null?(i=Jf(),Ie.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function ey(t,i,a,l){i.value=a,i.getSnapshot=l,ny(i)&&iy(t)}function ty(t,i,a){return a(function(){ny(i)&&iy(t)})}function ny(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!En(t,a)}catch{return!0}}function iy(t){var i=Da(t,2);i!==null&&Rn(i,t,2)}function id(t){var i=cn();if(typeof t=="function"){var a=t;if(t=a(),qr){_n(!0);try{a()}finally{_n(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:t},i}function sy(t,i,a,l){return t.baseState=a,td(t,Xe,typeof l=="function"?l:Ki)}function kw(t,i,a,l,h){if(dc(t))throw Error(r(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};Q.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,ry(i,d)):(d.next=a.next,i.pending=a.next=d)}}function ry(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=Q.T,v={};Q.T=v;try{var b=a(h,l),N=Q.S;N!==null&&N(v,b),ay(t,i,b)}catch(z){sd(t,i,z)}finally{Q.T=d}}else try{d=a(h,l),ay(t,i,d)}catch(z){sd(t,i,z)}}function ay(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){oy(t,i,l)},function(l){return sd(t,i,l)}):oy(t,i,a)}function oy(t,i,a){i.status="fulfilled",i.value=a,ly(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,ry(t,a)))}function sd(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,ly(i),i=i.next;while(i!==l)}t.action=null}function ly(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function uy(t,i){return i}function cy(t,i){if(qe){var a=nt.formState;if(a!==null){e:{var l=Ie;if(qe){if(ht){t:{for(var h=ht,d=di;h.nodeType!==8;){if(!d){h=null;break t}if(h=Wn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){ht=Wn(h.nextSibling),l=h.data==="F!";break e}}Lr(l)}l=!1}l&&(i=a[0])}}return a=cn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uy,lastRenderedState:i},a.queue=l,a=Cy.bind(null,Ie,l),l.dispatch=a,l=id(!1),d=ud.bind(null,Ie,!1,l.queue),l=cn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=kw.bind(null,Ie,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function hy(t){var i=wt();return fy(i,Xe,t)}function fy(t,i,a){if(i=td(t,i,uy)[0],t=cc(Ki)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=ml(i)}catch(v){throw v===ll?sc:v}else l=i;i=wt();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Ie.flags|=2048,Ba(9,hc(),Vw.bind(null,h,a),null)),[l,d,t]}function Vw(t,i){t.action=i}function dy(t){var i=wt(),a=Xe;if(a!==null)return fy(i,a,t);wt(),i=i.memoizedState,a=wt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Ba(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Ie.updateQueue,i===null&&(i=Jf(),Ie.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function hc(){return{destroy:void 0,resource:void 0}}function my(){return wt().memoizedState}function fc(t,i,a,l){var h=cn();l=l===void 0?null:l,Ie.flags|=t,h.memoizedState=Ba(1|i,hc(),a,l)}function pl(t,i,a,l){var h=wt();l=l===void 0?null:l;var d=h.memoizedState.inst;Xe!==null&&l!==null&&Yf(l,Xe.memoizedState.deps)?h.memoizedState=Ba(i,d,a,l):(Ie.flags|=t,h.memoizedState=Ba(1|i,d,a,l))}function py(t,i){fc(8390656,8,t,i)}function gy(t,i){pl(2048,8,t,i)}function yy(t,i){return pl(4,2,t,i)}function _y(t,i){return pl(4,4,t,i)}function vy(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Ey(t,i,a){a=a!=null?a.concat([t]):null,pl(4,4,vy.bind(null,i,t),a)}function rd(){}function Ty(t,i){var a=wt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Yf(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function by(t,i){var a=wt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Yf(i,l[1]))return l[0];if(l=t(),qr){_n(!0);try{t()}finally{_n(!1)}}return a.memoizedState=[l,i],l}function ad(t,i,a){return a===void 0||(As&1073741824)!==0?t.memoizedState=i:(t.memoizedState=a,t=S_(),Ie.lanes|=t,Ds|=t,a)}function wy(t,i,a,l){return En(a,i)?a:Ua.current!==null?(t=ad(t,a,l),En(t,i)||(Pt=!0),t):(As&42)===0?(Pt=!0,t.memoizedState=a):(t=S_(),Ie.lanes|=t,Ds|=t,i)}function Ay(t,i,a,l,h){var d=le.p;le.p=d!==0&&8>d?d:8;var v=Q.T,b={};Q.T=b,ud(t,!1,i,a);try{var N=h(),z=Q.S;if(z!==null&&z(b,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var Y=Dw(N,l);gl(t,i,Y,Sn(t))}else gl(t,i,l,Sn(t))}catch(Z){gl(t,i,{then:function(){},status:"rejected",reason:Z},Sn())}finally{le.p=d,Q.T=v}}function Pw(){}function od(t,i,a,l){if(t.tag!==5)throw Error(r(476));var h=Sy(t).queue;Ay(t,h,i,pe,a===null?Pw:function(){return Ry(t),a(l)})}function Sy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:pe},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ki,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Ry(t){var i=Sy(t).next.queue;gl(t,i,{},Sn())}function ld(){return Xt(kl)}function Iy(){return wt().memoizedState}function xy(){return wt().memoizedState}function Uw(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Sn();t=bs(a);var l=ws(i,t,a);l!==null&&(Rn(l,i,a),cl(l,i,a)),i={cache:Lf()},t.payload=i;return}i=i.return}}function Lw(t,i,a){var l=Sn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},dc(t)?Ny(i,a):(a=xf(t,i,a,l),a!==null&&(Rn(a,t,l),Dy(a,i,l)))}function Cy(t,i,a){var l=Sn();gl(t,i,a,l)}function gl(t,i,a,l){var h={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(dc(t))Ny(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var v=i.lastRenderedState,b=d(v,a);if(h.hasEagerState=!0,h.eagerState=b,En(b,v))return Xu(t,i,h,0),nt===null&&$u(),!1}catch{}finally{}if(a=xf(t,i,h,l),a!==null)return Rn(a,t,l),Dy(a,i,l),!0}return!1}function ud(t,i,a,l){if(l={lane:2,revertLane:zd(),action:l,hasEagerState:!1,eagerState:null,next:null},dc(t)){if(i)throw Error(r(479))}else i=xf(t,a,l,2),i!==null&&Rn(i,t,2)}function dc(t){var i=t.alternate;return t===Ie||i!==null&&i===Ie}function Ny(t,i){La=oc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Dy(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Lo(t,a)}}var mc={readContext:Xt,use:uc,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt},Oy={readContext:Xt,use:uc,useCallback:function(t,i){return cn().memoizedState=[t,i===void 0?null:i],t},useContext:Xt,useEffect:py,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,fc(4194308,4,vy.bind(null,i,t),a)},useLayoutEffect:function(t,i){return fc(4194308,4,t,i)},useInsertionEffect:function(t,i){fc(4,2,t,i)},useMemo:function(t,i){var a=cn();i=i===void 0?null:i;var l=t();if(qr){_n(!0);try{t()}finally{_n(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=cn();if(a!==void 0){var h=a(i);if(qr){_n(!0);try{a(i)}finally{_n(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=Lw.bind(null,Ie,t),[l.memoizedState,t]},useRef:function(t){var i=cn();return t={current:t},i.memoizedState=t},useState:function(t){t=id(t);var i=t.queue,a=Cy.bind(null,Ie,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:rd,useDeferredValue:function(t,i){var a=cn();return ad(a,t,i)},useTransition:function(){var t=id(!1);return t=Ay.bind(null,Ie,t.queue,!0,!1),cn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Ie,h=cn();if(qe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),nt===null)throw Error(r(349));(Le&124)!==0||Jg(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,py(ty.bind(null,l,d,t),[t]),l.flags|=2048,Ba(9,hc(),ey.bind(null,l,d,a,i),null),a},useId:function(){var t=cn(),i=nt.identifierPrefix;if(qe){var a=Fi,l=Hi;a=(l&~(1<<32-$t(l)-1)).toString(32)+a,i=""+i+"R"+a,a=lc++,0<a&&(i+="H"+a.toString(32)),i+=""}else a=Ow++,i=""+i+"r"+a.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:ld,useFormState:cy,useActionState:cy,useOptimistic:function(t){var i=cn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=ud.bind(null,Ie,!0,a),a.dispatch=i,[t,i]},useMemoCache:ed,useCacheRefresh:function(){return cn().memoizedState=Uw.bind(null,Ie)}},My={readContext:Xt,use:uc,useCallback:Ty,useContext:Xt,useEffect:gy,useImperativeHandle:Ey,useInsertionEffect:yy,useLayoutEffect:_y,useMemo:by,useReducer:cc,useRef:my,useState:function(){return cc(Ki)},useDebugValue:rd,useDeferredValue:function(t,i){var a=wt();return wy(a,Xe.memoizedState,t,i)},useTransition:function(){var t=cc(Ki)[0],i=wt().memoizedState;return[typeof t=="boolean"?t:ml(t),i]},useSyncExternalStore:Zg,useId:Iy,useHostTransitionStatus:ld,useFormState:hy,useActionState:hy,useOptimistic:function(t,i){var a=wt();return sy(a,Xe,t,i)},useMemoCache:ed,useCacheRefresh:xy},jw={readContext:Xt,use:uc,useCallback:Ty,useContext:Xt,useEffect:gy,useImperativeHandle:Ey,useInsertionEffect:yy,useLayoutEffect:_y,useMemo:by,useReducer:nd,useRef:my,useState:function(){return nd(Ki)},useDebugValue:rd,useDeferredValue:function(t,i){var a=wt();return Xe===null?ad(a,t,i):wy(a,Xe.memoizedState,t,i)},useTransition:function(){var t=nd(Ki)[0],i=wt().memoizedState;return[typeof t=="boolean"?t:ml(t),i]},useSyncExternalStore:Zg,useId:Iy,useHostTransitionStatus:ld,useFormState:dy,useActionState:dy,useOptimistic:function(t,i){var a=wt();return Xe!==null?sy(a,Xe,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:ed,useCacheRefresh:xy},za=null,yl=0;function pc(t){var i=yl;return yl+=1,za===null&&(za=[]),Fg(za,t,i)}function _l(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function gc(t,i){throw i.$$typeof===w?Error(r(525)):(t=Object.prototype.toString.call(i),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function ky(t){var i=t._init;return i(t._payload)}function Vy(t){function i(U,V){if(t){var B=U.deletions;B===null?(U.deletions=[V],U.flags|=16):B.push(V)}}function a(U,V){if(!t)return null;for(;V!==null;)i(U,V),V=V.sibling;return null}function l(U){for(var V=new Map;U!==null;)U.key!==null?V.set(U.key,U):V.set(U.index,U),U=U.sibling;return V}function h(U,V){return U=qi(U,V),U.index=0,U.sibling=null,U}function d(U,V,B){return U.index=B,t?(B=U.alternate,B!==null?(B=B.index,B<V?(U.flags|=67108866,V):B):(U.flags|=67108866,V)):(U.flags|=1048576,V)}function v(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function b(U,V,B,$){return V===null||V.tag!==6?(V=Nf(B,U.mode,$),V.return=U,V):(V=h(V,B),V.return=U,V)}function N(U,V,B,$){var de=B.type;return de===L?Y(U,V,B.props.children,$,B.key):V!==null&&(V.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===R&&ky(de)===V.type)?(V=h(V,B.props),_l(V,B),V.return=U,V):(V=Zu(B.type,B.key,B.props,null,U.mode,$),_l(V,B),V.return=U,V)}function z(U,V,B,$){return V===null||V.tag!==4||V.stateNode.containerInfo!==B.containerInfo||V.stateNode.implementation!==B.implementation?(V=Df(B,U.mode,$),V.return=U,V):(V=h(V,B.children||[]),V.return=U,V)}function Y(U,V,B,$,de){return V===null||V.tag!==7?(V=kr(B,U.mode,$,de),V.return=U,V):(V=h(V,B),V.return=U,V)}function Z(U,V,B){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Nf(""+V,U.mode,B),V.return=U,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case S:return B=Zu(V.type,V.key,V.props,null,U.mode,B),_l(B,V),B.return=U,B;case P:return V=Df(V,U.mode,B),V.return=U,V;case R:var $=V._init;return V=$(V._payload),Z(U,V,B)}if(Ve(V)||k(V))return V=kr(V,U.mode,B,null),V.return=U,V;if(typeof V.then=="function")return Z(U,pc(V),B);if(V.$$typeof===re)return Z(U,nc(U,V),B);gc(U,V)}return null}function q(U,V,B,$){var de=V!==null?V.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return de!==null?null:b(U,V,""+B,$);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case S:return B.key===de?N(U,V,B,$):null;case P:return B.key===de?z(U,V,B,$):null;case R:return de=B._init,B=de(B._payload),q(U,V,B,$)}if(Ve(B)||k(B))return de!==null?null:Y(U,V,B,$,null);if(typeof B.then=="function")return q(U,V,pc(B),$);if(B.$$typeof===re)return q(U,V,nc(U,B),$);gc(U,B)}return null}function H(U,V,B,$,de){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return U=U.get(B)||null,b(V,U,""+$,de);if(typeof $=="object"&&$!==null){switch($.$$typeof){case S:return U=U.get($.key===null?B:$.key)||null,N(V,U,$,de);case P:return U=U.get($.key===null?B:$.key)||null,z(V,U,$,de);case R:var Ce=$._init;return $=Ce($._payload),H(U,V,B,$,de)}if(Ve($)||k($))return U=U.get(B)||null,Y(V,U,$,de,null);if(typeof $.then=="function")return H(U,V,B,pc($),de);if($.$$typeof===re)return H(U,V,B,nc(V,$),de);gc(V,$)}return null}function be(U,V,B,$){for(var de=null,Ce=null,me=V,ve=V=0,Lt=null;me!==null&&ve<B.length;ve++){me.index>ve?(Lt=me,me=null):Lt=me.sibling;var Be=q(U,me,B[ve],$);if(Be===null){me===null&&(me=Lt);break}t&&me&&Be.alternate===null&&i(U,me),V=d(Be,V,ve),Ce===null?de=Be:Ce.sibling=Be,Ce=Be,me=Lt}if(ve===B.length)return a(U,me),qe&&Pr(U,ve),de;if(me===null){for(;ve<B.length;ve++)me=Z(U,B[ve],$),me!==null&&(V=d(me,V,ve),Ce===null?de=me:Ce.sibling=me,Ce=me);return qe&&Pr(U,ve),de}for(me=l(me);ve<B.length;ve++)Lt=H(me,U,ve,B[ve],$),Lt!==null&&(t&&Lt.alternate!==null&&me.delete(Lt.key===null?ve:Lt.key),V=d(Lt,V,ve),Ce===null?de=Lt:Ce.sibling=Lt,Ce=Lt);return t&&me.forEach(function(Bs){return i(U,Bs)}),qe&&Pr(U,ve),de}function _e(U,V,B,$){if(B==null)throw Error(r(151));for(var de=null,Ce=null,me=V,ve=V=0,Lt=null,Be=B.next();me!==null&&!Be.done;ve++,Be=B.next()){me.index>ve?(Lt=me,me=null):Lt=me.sibling;var Bs=q(U,me,Be.value,$);if(Bs===null){me===null&&(me=Lt);break}t&&me&&Bs.alternate===null&&i(U,me),V=d(Bs,V,ve),Ce===null?de=Bs:Ce.sibling=Bs,Ce=Bs,me=Lt}if(Be.done)return a(U,me),qe&&Pr(U,ve),de;if(me===null){for(;!Be.done;ve++,Be=B.next())Be=Z(U,Be.value,$),Be!==null&&(V=d(Be,V,ve),Ce===null?de=Be:Ce.sibling=Be,Ce=Be);return qe&&Pr(U,ve),de}for(me=l(me);!Be.done;ve++,Be=B.next())Be=H(me,U,ve,Be.value,$),Be!==null&&(t&&Be.alternate!==null&&me.delete(Be.key===null?ve:Be.key),V=d(Be,V,ve),Ce===null?de=Be:Ce.sibling=Be,Ce=Be);return t&&me.forEach(function(BA){return i(U,BA)}),qe&&Pr(U,ve),de}function Ze(U,V,B,$){if(typeof B=="object"&&B!==null&&B.type===L&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case S:e:{for(var de=B.key;V!==null;){if(V.key===de){if(de=B.type,de===L){if(V.tag===7){a(U,V.sibling),$=h(V,B.props.children),$.return=U,U=$;break e}}else if(V.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===R&&ky(de)===V.type){a(U,V.sibling),$=h(V,B.props),_l($,B),$.return=U,U=$;break e}a(U,V);break}else i(U,V);V=V.sibling}B.type===L?($=kr(B.props.children,U.mode,$,B.key),$.return=U,U=$):($=Zu(B.type,B.key,B.props,null,U.mode,$),_l($,B),$.return=U,U=$)}return v(U);case P:e:{for(de=B.key;V!==null;){if(V.key===de)if(V.tag===4&&V.stateNode.containerInfo===B.containerInfo&&V.stateNode.implementation===B.implementation){a(U,V.sibling),$=h(V,B.children||[]),$.return=U,U=$;break e}else{a(U,V);break}else i(U,V);V=V.sibling}$=Df(B,U.mode,$),$.return=U,U=$}return v(U);case R:return de=B._init,B=de(B._payload),Ze(U,V,B,$)}if(Ve(B))return be(U,V,B,$);if(k(B)){if(de=k(B),typeof de!="function")throw Error(r(150));return B=de.call(B),_e(U,V,B,$)}if(typeof B.then=="function")return Ze(U,V,pc(B),$);if(B.$$typeof===re)return Ze(U,V,nc(U,B),$);gc(U,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,V!==null&&V.tag===6?(a(U,V.sibling),$=h(V,B),$.return=U,U=$):(a(U,V),$=Nf(B,U.mode,$),$.return=U,U=$),v(U)):a(U,V)}return function(U,V,B,$){try{yl=0;var de=Ze(U,V,B,$);return za=null,de}catch(me){if(me===ll||me===sc)throw me;var Ce=Tn(29,me,null,U.mode);return Ce.lanes=$,Ce.return=U,Ce}finally{}}}var qa=Vy(!0),Py=Vy(!1),Bn=ee(null),mi=null;function Ss(t){var i=t.alternate;ae(Dt,Dt.current&1),ae(Bn,t),mi===null&&(i===null||Ua.current!==null||i.memoizedState!==null)&&(mi=t)}function Uy(t){if(t.tag===22){if(ae(Dt,Dt.current),ae(Bn,t),mi===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(mi=t)}}else Rs()}function Rs(){ae(Dt,Dt.current),ae(Bn,Bn.current)}function Yi(t){ue(Bn),mi===t&&(mi=null),ue(Dt)}var Dt=ee(0);function yc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Jd(a)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function cd(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:T({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var hd={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Sn(),h=bs(l);h.payload=i,a!=null&&(h.callback=a),i=ws(t,h,l),i!==null&&(Rn(i,t,l),cl(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Sn(),h=bs(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=ws(t,h,l),i!==null&&(Rn(i,t,l),cl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Sn(),l=bs(a);l.tag=2,i!=null&&(l.callback=i),i=ws(t,l,a),i!==null&&(Rn(i,t,a),cl(i,t,a))}};function Ly(t,i,a,l,h,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):i.prototype&&i.prototype.isPureReactComponent?!el(a,l)||!el(h,d):!0}function jy(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&hd.enqueueReplaceState(i,i.state,null)}function Hr(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=T({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}var _c=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function By(t){_c(t)}function zy(t){console.error(t)}function qy(t){_c(t)}function vc(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Hy(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function fd(t,i,a){return a=bs(a),a.tag=3,a.payload={element:null},a.callback=function(){vc(t,i)},a}function Fy(t){return t=bs(t),t.tag=3,t}function Gy(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){Hy(i,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Hy(i,a,l),typeof h!="function"&&(Os===null?Os=new Set([this]):Os.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function Bw(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&rl(i,a,h,!0),a=Bn.current,a!==null){switch(a.tag){case 13:return mi===null?Pd():a.alternate===null&&ft===0&&(ft=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===zf?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Ld(t,l,h)),!1;case 22:return a.flags|=65536,l===zf?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Ld(t,l,h)),!1}throw Error(r(435,a.tag))}return Ld(t,l,h),Pd(),!1}if(qe)return i=Bn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==kf&&(t=Error(r(422),{cause:l}),sl(Pn(t,a)))):(l!==kf&&(i=Error(r(423),{cause:l}),sl(Pn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Pn(l,a),h=fd(t.stateNode,l,h),Ff(t,h),ft!==4&&(ft=2)),!1;var d=Error(r(520),{cause:l});if(d=Pn(d,a),Sl===null?Sl=[d]:Sl.push(d),ft!==4&&(ft=2),i===null)return!0;l=Pn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=fd(a.stateNode,l,t),Ff(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Os===null||!Os.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Fy(h),Gy(h,t,a,l),Ff(a,h),!1}a=a.return}while(a!==null);return!1}var Qy=Error(r(461)),Pt=!1;function Ht(t,i,a,l){i.child=t===null?Py(i,null,a,l):qa(i,t.child,a,l)}function Ky(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var v={};for(var b in l)b!=="ref"&&(v[b]=l[b])}else v=l;return Br(i),l=$f(t,i,a,v,d,h),b=Xf(),t!==null&&!Pt?(Wf(t,i,h),$i(t,i,h)):(qe&&b&&Of(i),i.flags|=1,Ht(t,i,l,h),i.child)}function Yy(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Cf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,$y(t,i,d,l,h)):(t=Zu(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!Ed(t,h)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:el,a(v,l)&&t.ref===i.ref)return $i(t,i,h)}return i.flags|=1,t=qi(d,l),t.ref=i.ref,t.return=i,i.child=t}function $y(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(el(d,l)&&t.ref===i.ref)if(Pt=!1,i.pendingProps=l=d,Ed(t,h))(t.flags&131072)!==0&&(Pt=!0);else return i.lanes=t.lanes,$i(t,i,h)}return dd(t,i,a,l,h)}function Xy(t,i,a){var l=i.pendingProps,h=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|a:a,t!==null){for(h=i.child=t.child,d=0;h!==null;)d=d|h.lanes|h.childLanes,h=h.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return Wy(t,i,l,a)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&ic(i,d!==null?d.cachePool:null),d!==null?$g(i,d):Qf(),Uy(i);else return i.lanes=i.childLanes=536870912,Wy(t,i,d!==null?d.baseLanes|a:a,a)}else d!==null?(ic(i,d.cachePool),$g(i,d),Rs(),i.memoizedState=null):(t!==null&&ic(i,null),Qf(),Rs());return Ht(t,i,h,a),i.child}function Wy(t,i,a,l){var h=Bf();return h=h===null?null:{parent:Nt._currentValue,pool:h},i.memoizedState={baseLanes:a,cachePool:h},t!==null&&ic(i,null),Qf(),Uy(i),t!==null&&rl(t,i,l,!0),null}function Ec(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function dd(t,i,a,l,h){return Br(i),a=$f(t,i,a,l,void 0,h),l=Xf(),t!==null&&!Pt?(Wf(t,i,h),$i(t,i,h)):(qe&&l&&Of(i),i.flags|=1,Ht(t,i,a,h),i.child)}function Zy(t,i,a,l,h,d){return Br(i),i.updateQueue=null,a=Wg(i,l,a,h),Xg(t),l=Xf(),t!==null&&!Pt?(Wf(t,i,d),$i(t,i,d)):(qe&&l&&Of(i),i.flags|=1,Ht(t,i,a,d),i.child)}function Jy(t,i,a,l,h){if(Br(i),i.stateNode===null){var d=Oa,v=a.contextType;typeof v=="object"&&v!==null&&(d=Xt(v)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=hd,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},qf(i),v=a.contextType,d.context=typeof v=="object"&&v!==null?Xt(v):Oa,d.state=i.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(cd(i,a,v,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&hd.enqueueReplaceState(d,d.state,null),fl(i,l,d,h),hl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var b=i.memoizedProps,N=Hr(a,b);d.props=N;var z=d.context,Y=a.contextType;v=Oa,typeof Y=="object"&&Y!==null&&(v=Xt(Y));var Z=a.getDerivedStateFromProps;Y=typeof Z=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,Y||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||z!==v)&&jy(i,d,l,v),Ts=!1;var q=i.memoizedState;d.state=q,fl(i,l,d,h),hl(),z=i.memoizedState,b||q!==z||Ts?(typeof Z=="function"&&(cd(i,a,Z,l),z=i.memoizedState),(N=Ts||Ly(i,a,N,l,q,z,v))?(Y||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=z),d.props=l,d.state=z,d.context=v,l=N):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Hf(t,i),v=i.memoizedProps,Y=Hr(a,v),d.props=Y,Z=i.pendingProps,q=d.context,z=a.contextType,N=Oa,typeof z=="object"&&z!==null&&(N=Xt(z)),b=a.getDerivedStateFromProps,(z=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==Z||q!==N)&&jy(i,d,l,N),Ts=!1,q=i.memoizedState,d.state=q,fl(i,l,d,h),hl();var H=i.memoizedState;v!==Z||q!==H||Ts||t!==null&&t.dependencies!==null&&tc(t.dependencies)?(typeof b=="function"&&(cd(i,a,b,l),H=i.memoizedState),(Y=Ts||Ly(i,a,Y,l,q,H,N)||t!==null&&t.dependencies!==null&&tc(t.dependencies))?(z||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,H,N),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,H,N)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=H),d.props=l,d.state=H,d.context=N,l=Y):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,Ec(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=qa(i,t.child,null,h),i.child=qa(i,null,a,h)):Ht(t,i,a,h),i.memoizedState=d.state,t=i.child):t=$i(t,i,h),t}function e_(t,i,a,l){return il(),i.flags|=256,Ht(t,i,a,l),i.child}var md={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pd(t){return{baseLanes:t,cachePool:zg()}}function gd(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=zn),t}function t_(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(Dt.current&2)!==0),v&&(h=!0,i.flags&=-129),v=(i.flags&32)!==0,i.flags&=-33,t===null){if(qe){if(h?Ss(i):Rs(),qe){var b=ht,N;if(N=b){e:{for(N=b,b=di;N.nodeType!==8;){if(!b){b=null;break e}if(N=Wn(N.nextSibling),N===null){b=null;break e}}b=N}b!==null?(i.memoizedState={dehydrated:b,treeContext:Vr!==null?{id:Hi,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},N=Tn(18,null,null,0),N.stateNode=b,N.return=i,i.child=N,ln=i,ht=null,N=!0):N=!1}N||Lr(i)}if(b=i.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return Jd(b)?i.lanes=32:i.lanes=536870912,null;Yi(i)}return b=l.children,l=l.fallback,h?(Rs(),h=i.mode,b=Tc({mode:"hidden",children:b},h),l=kr(l,h,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,h=i.child,h.memoizedState=pd(a),h.childLanes=gd(t,v,a),i.memoizedState=md,l):(Ss(i),yd(i,b))}if(N=t.memoizedState,N!==null&&(b=N.dehydrated,b!==null)){if(d)i.flags&256?(Ss(i),i.flags&=-257,i=_d(t,i,a)):i.memoizedState!==null?(Rs(),i.child=t.child,i.flags|=128,i=null):(Rs(),h=l.fallback,b=i.mode,l=Tc({mode:"visible",children:l.children},b),h=kr(h,b,a,null),h.flags|=2,l.return=i,h.return=i,l.sibling=h,i.child=l,qa(i,t.child,null,a),l=i.child,l.memoizedState=pd(a),l.childLanes=gd(t,v,a),i.memoizedState=md,i=h);else if(Ss(i),Jd(b)){if(v=b.nextSibling&&b.nextSibling.dataset,v)var z=v.dgst;v=z,l=Error(r(419)),l.stack="",l.digest=v,sl({value:l,source:null,stack:null}),i=_d(t,i,a)}else if(Pt||rl(t,i,a,!1),v=(a&t.childLanes)!==0,Pt||v){if(v=nt,v!==null&&(l=a&-a,l=(l&42)!==0?1:ds(l),l=(l&(v.suspendedLanes|a))!==0?0:l,l!==0&&l!==N.retryLane))throw N.retryLane=l,Da(t,l),Rn(v,t,l),Qy;b.data==="$?"||Pd(),i=_d(t,i,a)}else b.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=N.treeContext,ht=Wn(b.nextSibling),ln=i,qe=!0,Ur=null,di=!1,t!==null&&(Ln[jn++]=Hi,Ln[jn++]=Fi,Ln[jn++]=Vr,Hi=t.id,Fi=t.overflow,Vr=i),i=yd(i,l.children),i.flags|=4096);return i}return h?(Rs(),h=l.fallback,b=i.mode,N=t.child,z=N.sibling,l=qi(N,{mode:"hidden",children:l.children}),l.subtreeFlags=N.subtreeFlags&65011712,z!==null?h=qi(z,h):(h=kr(h,b,a,null),h.flags|=2),h.return=i,l.return=i,l.sibling=h,i.child=l,l=h,h=i.child,b=t.child.memoizedState,b===null?b=pd(a):(N=b.cachePool,N!==null?(z=Nt._currentValue,N=N.parent!==z?{parent:z,pool:z}:N):N=zg(),b={baseLanes:b.baseLanes|a,cachePool:N}),h.memoizedState=b,h.childLanes=gd(t,v,a),i.memoizedState=md,l):(Ss(i),a=t.child,t=a.sibling,a=qi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(v=i.deletions,v===null?(i.deletions=[t],i.flags|=16):v.push(t)),i.child=a,i.memoizedState=null,a)}function yd(t,i){return i=Tc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Tc(t,i){return t=Tn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function _d(t,i,a){return qa(i,t.child,null,a),t=yd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function n_(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Pf(t.return,i,a)}function vd(t,i,a,l,h){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=a,d.tailMode=h)}function i_(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;if(Ht(t,i,l.children,a),l=Dt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&n_(t,a,i);else if(t.tag===19)n_(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(ae(Dt,l),h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&yc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),vd(i,!1,h,a,d);break;case"backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&yc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}vd(i,!0,a,null,d);break;case"together":vd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function $i(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Ds|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(rl(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(r(153));if(i.child!==null){for(t=i.child,a=qi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=qi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Ed(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&tc(t)))}function zw(t,i,a){switch(i.tag){case 3:tt(i,i.stateNode.containerInfo),Es(i,Nt,t.memoizedState.cache),il();break;case 27:case 5:fs(i);break;case 4:tt(i,i.stateNode.containerInfo);break;case 10:Es(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Ss(i),i.flags|=128,null):(a&i.child.childLanes)!==0?t_(t,i,a):(Ss(i),t=$i(t,i,a),t!==null?t.sibling:null);Ss(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(rl(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return i_(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ae(Dt,Dt.current),l)break;return null;case 22:case 23:return i.lanes=0,Xy(t,i,a);case 24:Es(i,Nt,t.memoizedState.cache)}return $i(t,i,a)}function s_(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Pt=!0;else{if(!Ed(t,a)&&(i.flags&128)===0)return Pt=!1,zw(t,i,a);Pt=(t.flags&131072)!==0}else Pt=!1,qe&&(i.flags&1048576)!==0&&kg(i,ec,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,h=l._init;if(l=h(l._payload),i.type=l,typeof l=="function")Cf(l)?(t=Hr(l,t),i.tag=1,i=Jy(null,i,l,t,a)):(i.tag=0,i=dd(null,i,l,t,a));else{if(l!=null){if(h=l.$$typeof,h===se){i.tag=11,i=Ky(null,i,l,t,a);break e}else if(h===C){i.tag=14,i=Yy(null,i,l,t,a);break e}}throw i=He(l)||l,Error(r(306,i,""))}}return i;case 0:return dd(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Hr(l,i.pendingProps),Jy(t,i,l,h,a);case 3:e:{if(tt(i,i.stateNode.containerInfo),t===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,Hf(t,i),fl(i,l,null,a);var v=i.memoizedState;if(l=v.cache,Es(i,Nt,l),l!==d.cache&&Uf(i,[Nt],a,!0),hl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=e_(t,i,l,a);break e}else if(l!==h){h=Pn(Error(r(424)),i),sl(h),i=e_(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ht=Wn(t.firstChild),ln=i,qe=!0,Ur=null,di=!0,a=Py(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(il(),l===h){i=$i(t,i,a);break e}Ht(t,i,l,a)}i=i.child}return i;case 26:return Ec(t,i),t===null?(a=lv(i.type,null,i.pendingProps,null))?i.memoizedState=a:qe||(a=i.type,t=i.pendingProps,l=Vc(we.current).createElement(a),l[It]=i,l[Et]=t,Gt(l,a,t),gt(l),i.stateNode=l):i.memoizedState=lv(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return fs(i),t===null&&qe&&(l=i.stateNode=rv(i.type,i.pendingProps,we.current),ln=i,di=!0,h=ht,Vs(i.type)?(em=h,ht=Wn(l.firstChild)):ht=h),Ht(t,i,i.pendingProps.children,a),Ec(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&qe&&((h=l=ht)&&(l=pA(l,i.type,i.pendingProps,di),l!==null?(i.stateNode=l,ln=i,ht=Wn(l.firstChild),di=!1,h=!0):h=!1),h||Lr(i)),fs(i),h=i.type,d=i.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,Xd(h,d)?l=null:v!==null&&Xd(h,v)&&(i.flags|=32),i.memoizedState!==null&&(h=$f(t,i,Mw,null,null,a),kl._currentValue=h),Ec(t,i),Ht(t,i,l,a),i.child;case 6:return t===null&&qe&&((t=a=ht)&&(a=gA(a,i.pendingProps,di),a!==null?(i.stateNode=a,ln=i,ht=null,t=!0):t=!1),t||Lr(i)),null;case 13:return t_(t,i,a);case 4:return tt(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=qa(i,null,l,a):Ht(t,i,l,a),i.child;case 11:return Ky(t,i,i.type,i.pendingProps,a);case 7:return Ht(t,i,i.pendingProps,a),i.child;case 8:return Ht(t,i,i.pendingProps.children,a),i.child;case 12:return Ht(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Es(i,i.type,l.value),Ht(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Br(i),h=Xt(h),l=l(h),i.flags|=1,Ht(t,i,l,a),i.child;case 14:return Yy(t,i,i.type,i.pendingProps,a);case 15:return $y(t,i,i.type,i.pendingProps,a);case 19:return i_(t,i,a);case 31:return l=i.pendingProps,a=i.mode,l={mode:l.mode,children:l.children},t===null?(a=Tc(l,a),a.ref=i.ref,i.child=a,a.return=i,i=a):(a=qi(t.child,l),a.ref=i.ref,i.child=a,a.return=i,i=a),i;case 22:return Xy(t,i,a);case 24:return Br(i),l=Xt(Nt),t===null?(h=Bf(),h===null&&(h=nt,d=Lf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},qf(i),Es(i,Nt,h)):((t.lanes&a)!==0&&(Hf(t,i),fl(i,null,null,a),hl()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Es(i,Nt,l)):(l=d.cache,Es(i,Nt,l),l!==h.cache&&Uf(i,[Nt],a,!0))),Ht(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Xi(t){t.flags|=4}function r_(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!dv(i)){if(i=Bn.current,i!==null&&((Le&4194048)===Le?mi!==null:(Le&62914560)!==Le&&(Le&536870912)===0||i!==mi))throw ul=zf,qg;t.flags|=8192}}function bc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Po():536870912,t.lanes|=i,Qa|=i)}function vl(t,i){if(!qe)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function lt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function qw(t,i,a){var l=i.pendingProps;switch(Mf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(i),null;case 1:return lt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Qi(Nt),ti(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(nl(i)?Xi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Ug())),lt(i),null;case 26:return a=i.memoizedState,t===null?(Xi(i),a!==null?(lt(i),r_(i,a)):(lt(i),i.flags&=-16777217)):a?a!==t.memoizedState?(Xi(i),lt(i),r_(i,a)):(lt(i),i.flags&=-16777217):(t.memoizedProps!==l&&Xi(i),lt(i),i.flags&=-16777217),null;case 27:Ci(i),a=we.current;var h=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Xi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return lt(i),null}t=ye.current,nl(i)?Vg(i):(t=rv(h,l,a),i.stateNode=t,Xi(i))}return lt(i),null;case 5:if(Ci(i),a=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&Xi(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return lt(i),null}if(t=ye.current,nl(i))Vg(i);else{switch(h=Vc(we.current),t){case 1:t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=h.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=h.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?h.createElement("select",{is:l.is}):h.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?h.createElement(a,{is:l.is}):h.createElement(a)}}t[It]=i,t[Et]=l;e:for(h=i.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}i.stateNode=t;e:switch(Gt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&Xi(i)}}return lt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&Xi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(t=we.current,nl(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=ln,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[It]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Z_(t.nodeValue,a)),t||Lr(i)}else t=Vc(t).createTextNode(l),t[It]=i,i.stateNode=t}return lt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=nl(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(r(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[It]=i}else il(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;lt(i),h=!1}else h=Ug(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Yi(i),i):(Yi(i),null)}if(Yi(i),(i.flags&128)!==0)return i.lanes=a,i;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)}return a!==t&&a&&(i.child.flags|=8192),bc(i,i.updateQueue),lt(i),null;case 4:return ti(),t===null&&Gd(i.stateNode.containerInfo),lt(i),null;case 10:return Qi(i.type),lt(i),null;case 19:if(ue(Dt),h=i.memoizedState,h===null)return lt(i),null;if(l=(i.flags&128)!==0,d=h.rendering,d===null)if(l)vl(h,!1);else{if(ft!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=yc(t),d!==null){for(i.flags|=128,vl(h,!1),t=d.updateQueue,i.updateQueue=t,bc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Mg(a,t),a=a.sibling;return ae(Dt,Dt.current&1|2),i.child}t=t.sibling}h.tail!==null&&Nn()>Sc&&(i.flags|=128,l=!0,vl(h,!1),i.lanes=4194304)}else{if(!l)if(t=yc(d),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,bc(i,t),vl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!qe)return lt(i),null}else 2*Nn()-h.renderingStartTime>Sc&&a!==536870912&&(i.flags|=128,l=!0,vl(h,!1),i.lanes=4194304);h.isBackwards?(d.sibling=i.child,i.child=d):(t=h.last,t!==null?t.sibling=d:i.child=d,h.last=d)}return h.tail!==null?(i=h.tail,h.rendering=i,h.tail=i.sibling,h.renderingStartTime=Nn(),i.sibling=null,t=Dt.current,ae(Dt,l?t&1|2:t&1),i):(lt(i),null);case 22:case 23:return Yi(i),Kf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(lt(i),i.subtreeFlags&6&&(i.flags|=8192)):lt(i),a=i.updateQueue,a!==null&&bc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&ue(zr),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Qi(Nt),lt(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function Hw(t,i){switch(Mf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Qi(Nt),ti(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Ci(i),null;case 13:if(Yi(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(r(340));il()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return ue(Dt),null;case 4:return ti(),null;case 10:return Qi(i.type),null;case 22:case 23:return Yi(i),Kf(),t!==null&&ue(zr),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Qi(Nt),null;case 25:return null;default:return null}}function a_(t,i){switch(Mf(i),i.tag){case 3:Qi(Nt),ti();break;case 26:case 27:case 5:Ci(i);break;case 4:ti();break;case 13:Yi(i);break;case 19:ue(Dt);break;case 10:Qi(i.type);break;case 22:case 23:Yi(i),Kf(),t!==null&&ue(zr);break;case 24:Qi(Nt)}}function El(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==h)}}catch(b){Je(i,i.return,b)}}function Is(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var v=l.inst,b=v.destroy;if(b!==void 0){v.destroy=void 0,h=i;var N=a,z=b;try{z()}catch(Y){Je(h,N,Y)}}}l=l.next}while(l!==d)}}catch(Y){Je(i,i.return,Y)}}function o_(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Yg(i,a)}catch(l){Je(t,t.return,l)}}}function l_(t,i,a){a.props=Hr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){Je(t,i,l)}}function Tl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){Je(t,i,h)}}function pi(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){Je(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){Je(t,i,h)}else a.current=null}function u_(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){Je(t,t.return,h)}}function Td(t,i,a){try{var l=t.stateNode;cA(l,t.type,a,i),l[Et]=i}catch(h){Je(t,t.return,h)}}function c_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Vs(t.type)||t.tag===4}function bd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||c_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Vs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wd(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=kc));else if(l!==4&&(l===27&&Vs(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(wd(t,i,a),t=t.sibling;t!==null;)wd(t,i,a),t=t.sibling}function wc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&Vs(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(wc(t,i,a),t=t.sibling;t!==null;)wc(t,i,a),t=t.sibling}function h_(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Gt(i,l,a),i[It]=t,i[Et]=a}catch(d){Je(t,t.return,d)}}var Wi=!1,_t=!1,Ad=!1,f_=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function Fw(t,i){if(t=t.containerInfo,Yd=zc,t=wg(t),bf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,b=-1,N=-1,z=0,Y=0,Z=t,q=null;t:for(;;){for(var H;Z!==a||h!==0&&Z.nodeType!==3||(b=v+h),Z!==d||l!==0&&Z.nodeType!==3||(N=v+l),Z.nodeType===3&&(v+=Z.nodeValue.length),(H=Z.firstChild)!==null;)q=Z,Z=H;for(;;){if(Z===t)break t;if(q===a&&++z===h&&(b=v),q===d&&++Y===l&&(N=v),(H=Z.nextSibling)!==null)break;Z=q,q=Z.parentNode}Z=H}a=b===-1||N===-1?null:{start:b,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for($d={focusedElem:t,selectionRange:a},zc=!1,Ut=i;Ut!==null;)if(i=Ut,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,Ut=t;else for(;Ut!==null;){switch(i=Ut,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var be=Hr(a.type,h,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(be,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(_e){Je(a,a.return,_e)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)Zd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Zd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=i.sibling,t!==null){t.return=i.return,Ut=t;break}Ut=i.return}}function d_(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:xs(t,a),l&4&&El(5,a);break;case 1:if(xs(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(v){Je(a,a.return,v)}else{var h=Hr(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(v){Je(a,a.return,v)}}l&64&&o_(a),l&512&&Tl(a,a.return);break;case 3:if(xs(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Yg(t,i)}catch(v){Je(a,a.return,v)}}break;case 27:i===null&&l&4&&h_(a);case 26:case 5:xs(t,a),i===null&&l&4&&u_(a),l&512&&Tl(a,a.return);break;case 12:xs(t,a);break;case 13:xs(t,a),l&4&&g_(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Jw.bind(null,a),yA(t,a))));break;case 22:if(l=a.memoizedState!==null||Wi,!l){i=i!==null&&i.memoizedState!==null||_t,h=Wi;var d=_t;Wi=l,(_t=i)&&!d?Cs(t,a,(a.subtreeFlags&8772)!==0):xs(t,a),Wi=h,_t=d}break;case 30:break;default:xs(t,a)}}function m_(t){var i=t.alternate;i!==null&&(t.alternate=null,m_(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&gs(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var at=null,hn=!1;function Zi(t,i,a){for(a=a.child;a!==null;)p_(t,i,a),a=a.sibling}function p_(t,i,a){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(ct,a)}catch{}switch(a.tag){case 26:_t||pi(a,i),Zi(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:_t||pi(a,i);var l=at,h=hn;Vs(a.type)&&(at=a.stateNode,hn=!1),Zi(t,i,a),Nl(a.stateNode),at=l,hn=h;break;case 5:_t||pi(a,i);case 6:if(l=at,h=hn,at=null,Zi(t,i,a),at=l,hn=h,at!==null)if(hn)try{(at.nodeType===9?at.body:at.nodeName==="HTML"?at.ownerDocument.body:at).removeChild(a.stateNode)}catch(d){Je(a,i,d)}else try{at.removeChild(a.stateNode)}catch(d){Je(a,i,d)}break;case 18:at!==null&&(hn?(t=at,iv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Ll(t)):iv(at,a.stateNode));break;case 4:l=at,h=hn,at=a.stateNode.containerInfo,hn=!0,Zi(t,i,a),at=l,hn=h;break;case 0:case 11:case 14:case 15:_t||Is(2,a,i),_t||Is(4,a,i),Zi(t,i,a);break;case 1:_t||(pi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&l_(a,i,l)),Zi(t,i,a);break;case 21:Zi(t,i,a);break;case 22:_t=(l=_t)||a.memoizedState!==null,Zi(t,i,a),_t=l;break;default:Zi(t,i,a)}}function g_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ll(t)}catch(a){Je(i,i.return,a)}}function Gw(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new f_),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new f_),i;default:throw Error(r(435,t.tag))}}function Sd(t,i){var a=Gw(t);i.forEach(function(l){var h=eA.bind(null,t,l);a.has(l)||(a.add(l),l.then(h,h))})}function bn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,v=i,b=v;e:for(;b!==null;){switch(b.tag){case 27:if(Vs(b.type)){at=b.stateNode,hn=!1;break e}break;case 5:at=b.stateNode,hn=!1;break e;case 3:case 4:at=b.stateNode.containerInfo,hn=!0;break e}b=b.return}if(at===null)throw Error(r(160));p_(d,v,h),at=null,hn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)y_(i,t),i=i.sibling}var Xn=null;function y_(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:bn(i,t),wn(t),l&4&&(Is(3,t,t.return),El(3,t),Is(5,t,t.return));break;case 1:bn(i,t),wn(t),l&512&&(_t||a===null||pi(a,a.return)),l&64&&Wi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=Xn;if(bn(i,t),wn(t),l&512&&(_t||a===null||pi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[_r]||d[It]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),Gt(d,l,a),d[It]=t,gt(d),l=d;break e;case"link":var v=hv("link","href",h).get(l+(a.href||""));if(v){for(var b=0;b<v.length;b++)if(d=v[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(b,1);break t}}d=h.createElement(l),Gt(d,l,a),h.head.appendChild(d);break;case"meta":if(v=hv("meta","content",h).get(l+(a.content||""))){for(b=0;b<v.length;b++)if(d=v[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(b,1);break t}}d=h.createElement(l),Gt(d,l,a),h.head.appendChild(d);break;default:throw Error(r(468,l))}d[It]=t,gt(d),l=d}t.stateNode=l}else fv(h,t.type,t.stateNode);else t.stateNode=cv(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?fv(h,t.type,t.stateNode):cv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Td(t,t.memoizedProps,a.memoizedProps)}break;case 27:bn(i,t),wn(t),l&512&&(_t||a===null||pi(a,a.return)),a!==null&&l&4&&Td(t,t.memoizedProps,a.memoizedProps);break;case 5:if(bn(i,t),wn(t),l&512&&(_t||a===null||pi(a,a.return)),t.flags&32){h=t.stateNode;try{On(h,"")}catch(H){Je(t,t.return,H)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Td(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Ad=!0);break;case 6:if(bn(i,t),wn(t),l&4){if(t.stateNode===null)throw Error(r(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(H){Je(t,t.return,H)}}break;case 3:if(Lc=null,h=Xn,Xn=Pc(i.containerInfo),bn(i,t),Xn=h,wn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Ll(i.containerInfo)}catch(H){Je(t,t.return,H)}Ad&&(Ad=!1,__(t));break;case 4:l=Xn,Xn=Pc(t.stateNode.containerInfo),bn(i,t),wn(t),Xn=l;break;case 12:bn(i,t),wn(t);break;case 13:bn(i,t),wn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Dd=Nn()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Sd(t,l)));break;case 22:h=t.memoizedState!==null;var N=a!==null&&a.memoizedState!==null,z=Wi,Y=_t;if(Wi=z||h,_t=Y||N,bn(i,t),_t=Y,Wi=z,wn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||N||Wi||_t||Fr(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){N=a=i;try{if(d=N.stateNode,h)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{b=N.stateNode;var Z=N.memoizedProps.style,q=Z!=null&&Z.hasOwnProperty("display")?Z.display:null;b.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(H){Je(N,N.return,H)}}}else if(i.tag===6){if(a===null){N=i;try{N.stateNode.nodeValue=h?"":N.memoizedProps}catch(H){Je(N,N.return,H)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Sd(t,a))));break;case 19:bn(i,t),wn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Sd(t,l)));break;case 30:break;case 21:break;default:bn(i,t),wn(t)}}function wn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(c_(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var h=a.stateNode,d=bd(t);wc(t,d,h);break;case 5:var v=a.stateNode;a.flags&32&&(On(v,""),a.flags&=-33);var b=bd(t);wc(t,b,v);break;case 3:case 4:var N=a.stateNode.containerInfo,z=bd(t);wd(t,z,N);break;default:throw Error(r(161))}}catch(Y){Je(t,t.return,Y)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function __(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;__(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function xs(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)d_(t,i.alternate,i),i=i.sibling}function Fr(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Is(4,i,i.return),Fr(i);break;case 1:pi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&l_(i,i.return,a),Fr(i);break;case 27:Nl(i.stateNode);case 26:case 5:pi(i,i.return),Fr(i);break;case 22:i.memoizedState===null&&Fr(i);break;case 30:Fr(i);break;default:Fr(i)}t=t.sibling}}function Cs(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,v=d.flags;switch(d.tag){case 0:case 11:case 15:Cs(h,d,a),El(4,d);break;case 1:if(Cs(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(z){Je(l,l.return,z)}if(l=d,h=l.updateQueue,h!==null){var b=l.stateNode;try{var N=h.shared.hiddenCallbacks;if(N!==null)for(h.shared.hiddenCallbacks=null,h=0;h<N.length;h++)Kg(N[h],b)}catch(z){Je(l,l.return,z)}}a&&v&64&&o_(d),Tl(d,d.return);break;case 27:h_(d);case 26:case 5:Cs(h,d,a),a&&l===null&&v&4&&u_(d),Tl(d,d.return);break;case 12:Cs(h,d,a);break;case 13:Cs(h,d,a),a&&v&4&&g_(h,d);break;case 22:d.memoizedState===null&&Cs(h,d,a),Tl(d,d.return);break;case 30:break;default:Cs(h,d,a)}i=i.sibling}}function Rd(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&al(a))}function Id(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&al(t))}function gi(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)v_(t,i,a,l),i=i.sibling}function v_(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:gi(t,i,a,l),h&2048&&El(9,i);break;case 1:gi(t,i,a,l);break;case 3:gi(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&al(t)));break;case 12:if(h&2048){gi(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,v=d.id,b=d.onPostCommit;typeof b=="function"&&b(v,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(N){Je(i,i.return,N)}}else gi(t,i,a,l);break;case 13:gi(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,v=i.alternate,i.memoizedState!==null?d._visibility&2?gi(t,i,a,l):bl(t,i):d._visibility&2?gi(t,i,a,l):(d._visibility|=2,Ha(t,i,a,l,(i.subtreeFlags&10256)!==0)),h&2048&&Rd(v,i);break;case 24:gi(t,i,a,l),h&2048&&Id(i.alternate,i);break;default:gi(t,i,a,l)}}function Ha(t,i,a,l,h){for(h=h&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,v=i,b=a,N=l,z=v.flags;switch(v.tag){case 0:case 11:case 15:Ha(d,v,b,N,h),El(8,v);break;case 23:break;case 22:var Y=v.stateNode;v.memoizedState!==null?Y._visibility&2?Ha(d,v,b,N,h):bl(d,v):(Y._visibility|=2,Ha(d,v,b,N,h)),h&&z&2048&&Rd(v.alternate,v);break;case 24:Ha(d,v,b,N,h),h&&z&2048&&Id(v.alternate,v);break;default:Ha(d,v,b,N,h)}i=i.sibling}}function bl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:bl(a,l),h&2048&&Rd(l.alternate,l);break;case 24:bl(a,l),h&2048&&Id(l.alternate,l);break;default:bl(a,l)}i=i.sibling}}var wl=8192;function Fa(t){if(t.subtreeFlags&wl)for(t=t.child;t!==null;)E_(t),t=t.sibling}function E_(t){switch(t.tag){case 26:Fa(t),t.flags&wl&&t.memoizedState!==null&&NA(Xn,t.memoizedState,t.memoizedProps);break;case 5:Fa(t);break;case 3:case 4:var i=Xn;Xn=Pc(t.stateNode.containerInfo),Fa(t),Xn=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=wl,wl=16777216,Fa(t),wl=i):Fa(t));break;default:Fa(t)}}function T_(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Al(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ut=l,w_(l,t)}T_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)b_(t),t=t.sibling}function b_(t){switch(t.tag){case 0:case 11:case 15:Al(t),t.flags&2048&&Is(9,t,t.return);break;case 3:Al(t);break;case 12:Al(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Ac(t)):Al(t);break;default:Al(t)}}function Ac(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ut=l,w_(l,t)}T_(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Is(8,i,i.return),Ac(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Ac(i));break;default:Ac(i)}t=t.sibling}}function w_(t,i){for(;Ut!==null;){var a=Ut;switch(a.tag){case 0:case 11:case 15:Is(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:al(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ut=l;else e:for(a=t;Ut!==null;){l=Ut;var h=l.sibling,d=l.return;if(m_(l),l===a){Ut=null;break e}if(h!==null){h.return=d,Ut=h;break e}Ut=d}}}var Qw={getCacheForType:function(t){var i=Xt(Nt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a}},Kw=typeof WeakMap=="function"?WeakMap:Map,Ke=0,nt=null,Ne=null,Le=0,Ye=0,An=null,Ns=!1,Ga=!1,xd=!1,Ji=0,ft=0,Ds=0,Gr=0,Cd=0,zn=0,Qa=0,Sl=null,fn=null,Nd=!1,Dd=0,Sc=1/0,Rc=null,Os=null,Ft=0,Ms=null,Ka=null,Ya=0,Od=0,Md=null,A_=null,Rl=0,kd=null;function Sn(){if((Ke&2)!==0&&Le!==0)return Le&-Le;if(Q.T!==null){var t=Va;return t!==0?t:zd()}return ms()}function S_(){zn===0&&(zn=(Le&536870912)===0||qe?Vo():536870912);var t=Bn.current;return t!==null&&(t.flags|=32),zn}function Rn(t,i,a){(t===nt&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)&&($a(t,0),ks(t,Le,zn,!1)),Di(t,a),((Ke&2)===0||t!==nt)&&(t===nt&&((Ke&2)===0&&(Gr|=a),ft===4&&ks(t,Le,zn,!1)),yi(t))}function R_(t,i,a){if((Ke&6)!==0)throw Error(r(327));var l=!a&&(i&124)===0&&(i&t.expiredLanes)===0||yr(t,i),h=l?Xw(t,i):Ud(t,i,!0),d=l;do{if(h===0){Ga&&!l&&ks(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!Yw(a)){h=Ud(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){i=v;e:{var b=t;h=Sl;var N=b.current.memoizedState.isDehydrated;if(N&&($a(b,v).flags|=256),v=Ud(b,v,!1),v!==2){if(xd&&!N){b.errorRecoveryDisabledLanes|=d,Gr|=d,h=4;break e}d=fn,fn=h,d!==null&&(fn===null?fn=d:fn.push.apply(fn,d))}h=v}if(d=!1,h!==2)continue}}if(h===1){$a(t,0),ks(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:ks(l,i,zn,!Ns);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(h=Dd+300-Nn(),10<h)){if(ks(l,i,zn,!Ns),fa(l,0,!0)!==0)break e;l.timeoutHandle=tv(I_.bind(null,l,a,fn,Rc,Nd,i,zn,Gr,Qa,Ns,d,2,-0,0),h);break e}I_(l,a,fn,Rc,Nd,i,zn,Gr,Qa,Ns,d,0,-0,0)}}break}while(!0);yi(t)}function I_(t,i,a,l,h,d,v,b,N,z,Y,Z,q,H){if(t.timeoutHandle=-1,Z=i.subtreeFlags,(Z&8192||(Z&16785408)===16785408)&&(Ml={stylesheets:null,count:0,unsuspend:CA},E_(i),Z=DA(),Z!==null)){t.cancelPendingCommit=Z(k_.bind(null,t,i,d,a,l,h,v,b,N,Y,1,q,H)),ks(t,d,v,!z);return}k_(t,i,d,a,l,h,v,b,N)}function Yw(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!En(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ks(t,i,a,l){i&=~Cd,i&=~Gr,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-$t(h),v=1<<d;l[d]=-1,h&=~v}a!==0&&ni(t,a,i)}function Ic(){return(Ke&6)===0?(Il(0),!1):!0}function Vd(){if(Ne!==null){if(Ye===0)var t=Ne.return;else t=Ne,Gi=jr=null,Zf(t),za=null,yl=0,t=Ne;for(;t!==null;)a_(t.alternate,t),t=t.return;Ne=null}}function $a(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,fA(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Vd(),nt=t,Ne=a=qi(t.current,null),Le=i,Ye=0,An=null,Ns=!1,Ga=yr(t,i),xd=!1,Qa=zn=Cd=Gr=Ds=ft=0,fn=Sl=null,Nd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-$t(l),d=1<<h;i|=t[h],l&=~d}return Ji=i,$u(),a}function x_(t,i){Ie=null,Q.H=mc,i===ll||i===sc?(i=Gg(),Ye=3):i===qg?(i=Gg(),Ye=4):Ye=i===Qy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,An=i,Ne===null&&(ft=1,vc(t,Pn(i,t.current)))}function C_(){var t=Q.H;return Q.H=mc,t===null?mc:t}function N_(){var t=Q.A;return Q.A=Qw,t}function Pd(){ft=4,Ns||(Le&4194048)!==Le&&Bn.current!==null||(Ga=!0),(Ds&134217727)===0&&(Gr&134217727)===0||nt===null||ks(nt,Le,zn,!1)}function Ud(t,i,a){var l=Ke;Ke|=2;var h=C_(),d=N_();(nt!==t||Le!==i)&&(Rc=null,$a(t,i)),i=!1;var v=ft;e:do try{if(Ye!==0&&Ne!==null){var b=Ne,N=An;switch(Ye){case 8:Vd(),v=6;break e;case 3:case 2:case 9:case 6:Bn.current===null&&(i=!0);var z=Ye;if(Ye=0,An=null,Xa(t,b,N,z),a&&Ga){v=0;break e}break;default:z=Ye,Ye=0,An=null,Xa(t,b,N,z)}}$w(),v=ft;break}catch(Y){x_(t,Y)}while(!0);return i&&t.shellSuspendCounter++,Gi=jr=null,Ke=l,Q.H=h,Q.A=d,Ne===null&&(nt=null,Le=0,$u()),v}function $w(){for(;Ne!==null;)D_(Ne)}function Xw(t,i){var a=Ke;Ke|=2;var l=C_(),h=N_();nt!==t||Le!==i?(Rc=null,Sc=Nn()+500,$a(t,i)):Ga=yr(t,i);e:do try{if(Ye!==0&&Ne!==null){i=Ne;var d=An;t:switch(Ye){case 1:Ye=0,An=null,Xa(t,i,d,1);break;case 2:case 9:if(Hg(d)){Ye=0,An=null,O_(i);break}i=function(){Ye!==2&&Ye!==9||nt!==t||(Ye=7),yi(t)},d.then(i,i);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:Hg(d)?(Ye=0,An=null,O_(i)):(Ye=0,An=null,Xa(t,i,d,7));break;case 5:var v=null;switch(Ne.tag){case 26:v=Ne.memoizedState;case 5:case 27:var b=Ne;if(!v||dv(v)){Ye=0,An=null;var N=b.sibling;if(N!==null)Ne=N;else{var z=b.return;z!==null?(Ne=z,xc(z)):Ne=null}break t}}Ye=0,An=null,Xa(t,i,d,5);break;case 6:Ye=0,An=null,Xa(t,i,d,6);break;case 8:Vd(),ft=6;break e;default:throw Error(r(462))}}Ww();break}catch(Y){x_(t,Y)}while(!0);return Gi=jr=null,Q.H=l,Q.A=h,Ke=a,Ne!==null?0:(nt=null,Le=0,$u(),ft)}function Ww(){for(;Ne!==null&&!Do();)D_(Ne)}function D_(t){var i=s_(t.alternate,t,Ji);t.memoizedProps=t.pendingProps,i===null?xc(t):Ne=i}function O_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=Zy(a,i,i.pendingProps,i.type,void 0,Le);break;case 11:i=Zy(a,i,i.pendingProps,i.type.render,i.ref,Le);break;case 5:Zf(i);default:a_(a,i),i=Ne=Mg(i,Ji),i=s_(a,i,Ji)}t.memoizedProps=t.pendingProps,i===null?xc(t):Ne=i}function Xa(t,i,a,l){Gi=jr=null,Zf(i),za=null,yl=0;var h=i.return;try{if(Bw(t,h,i,a,Le)){ft=1,vc(t,Pn(a,t.current)),Ne=null;return}}catch(d){if(h!==null)throw Ne=h,d;ft=1,vc(t,Pn(a,t.current)),Ne=null;return}i.flags&32768?(qe||l===1?t=!0:Ga||(Le&536870912)!==0?t=!1:(Ns=t=!0,(l===2||l===9||l===3||l===6)&&(l=Bn.current,l!==null&&l.tag===13&&(l.flags|=16384))),M_(i,t)):xc(i)}function xc(t){var i=t;do{if((i.flags&32768)!==0){M_(i,Ns);return}t=i.return;var a=qw(i.alternate,i,Ji);if(a!==null){Ne=a;return}if(i=i.sibling,i!==null){Ne=i;return}Ne=i=t}while(i!==null);ft===0&&(ft=5)}function M_(t,i){do{var a=Hw(t.alternate,t);if(a!==null){a.flags&=32767,Ne=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ne=t;return}Ne=t=a}while(t!==null);ft=6,Ne=null}function k_(t,i,a,l,h,d,v,b,N){t.cancelPendingCommit=null;do Cc();while(Ft!==0);if((Ke&6)!==0)throw Error(r(327));if(i!==null){if(i===t.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=If,Uo(t,a,d,v,b,N),t===nt&&(Ne=nt=null,Le=0),Ka=i,Ms=t,Ya=a,Od=d,Md=h,A_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,tA(dr,function(){return j_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,h=le.p,le.p=2,v=Ke,Ke|=4;try{Fw(t,i,a)}finally{Ke=v,le.p=h,Q.T=l}}Ft=1,V_(),P_(),U_()}}function V_(){if(Ft===1){Ft=0;var t=Ms,i=Ka,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var l=le.p;le.p=2;var h=Ke;Ke|=4;try{y_(i,t);var d=$d,v=wg(t.containerInfo),b=d.focusedElem,N=d.selectionRange;if(v!==b&&b&&b.ownerDocument&&bg(b.ownerDocument.documentElement,b)){if(N!==null&&bf(b)){var z=N.start,Y=N.end;if(Y===void 0&&(Y=z),"selectionStart"in b)b.selectionStart=z,b.selectionEnd=Math.min(Y,b.value.length);else{var Z=b.ownerDocument||document,q=Z&&Z.defaultView||window;if(q.getSelection){var H=q.getSelection(),be=b.textContent.length,_e=Math.min(N.start,be),Ze=N.end===void 0?_e:Math.min(N.end,be);!H.extend&&_e>Ze&&(v=Ze,Ze=_e,_e=v);var U=Tg(b,_e),V=Tg(b,Ze);if(U&&V&&(H.rangeCount!==1||H.anchorNode!==U.node||H.anchorOffset!==U.offset||H.focusNode!==V.node||H.focusOffset!==V.offset)){var B=Z.createRange();B.setStart(U.node,U.offset),H.removeAllRanges(),_e>Ze?(H.addRange(B),H.extend(V.node,V.offset)):(B.setEnd(V.node,V.offset),H.addRange(B))}}}}for(Z=[],H=b;H=H.parentNode;)H.nodeType===1&&Z.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<Z.length;b++){var $=Z[b];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}zc=!!Yd,$d=Yd=null}finally{Ke=h,le.p=l,Q.T=a}}t.current=i,Ft=2}}function P_(){if(Ft===2){Ft=0;var t=Ms,i=Ka,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var l=le.p;le.p=2;var h=Ke;Ke|=4;try{d_(t,i.alternate,i)}finally{Ke=h,le.p=l,Q.T=a}}Ft=3}}function U_(){if(Ft===4||Ft===3){Ft=0,Au();var t=Ms,i=Ka,a=Ya,l=A_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ft=5:(Ft=0,Ka=Ms=null,L_(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Os=null),da(a),i=i.stateNode,Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(ct,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=Q.T,h=le.p,le.p=2,Q.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var b=l[v];d(b.value,{componentStack:b.stack})}}finally{Q.T=i,le.p=h}}(Ya&3)!==0&&Cc(),yi(t),h=t.pendingLanes,(a&4194090)!==0&&(h&42)!==0?t===kd?Rl++:(Rl=0,kd=t):Rl=0,Il(0)}}function L_(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,al(i)))}function Cc(t){return V_(),P_(),U_(),j_()}function j_(){if(Ft!==5)return!1;var t=Ms,i=Od;Od=0;var a=da(Ya),l=Q.T,h=le.p;try{le.p=32>a?32:a,Q.T=null,a=Md,Md=null;var d=Ms,v=Ya;if(Ft=0,Ka=Ms=null,Ya=0,(Ke&6)!==0)throw Error(r(331));var b=Ke;if(Ke|=4,b_(d.current),v_(d,d.current,v,a),Ke=b,Il(0,!1),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(ct,d)}catch{}return!0}finally{le.p=h,Q.T=l,L_(t,i)}}function B_(t,i,a){i=Pn(a,i),i=fd(t.stateNode,i,2),t=ws(t,i,2),t!==null&&(Di(t,2),yi(t))}function Je(t,i,a){if(t.tag===3)B_(t,t,a);else for(;i!==null;){if(i.tag===3){B_(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Os===null||!Os.has(l))){t=Pn(a,t),a=Fy(2),l=ws(i,a,2),l!==null&&(Gy(a,l,i,t),Di(l,2),yi(l));break}}i=i.return}}function Ld(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new Kw;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(xd=!0,h.add(a),t=Zw.bind(null,t,i,a),i.then(t,t))}function Zw(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,nt===t&&(Le&a)===a&&(ft===4||ft===3&&(Le&62914560)===Le&&300>Nn()-Dd?(Ke&2)===0&&$a(t,0):Cd|=a,Qa===Le&&(Qa=0)),yi(t)}function z_(t,i){i===0&&(i=Po()),t=Da(t,i),t!==null&&(Di(t,i),yi(t))}function Jw(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),z_(t,a)}function eA(t,i){var a=0;switch(t.tag){case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),z_(t,a)}function tA(t,i){return hr(t,i)}var Nc=null,Wa=null,jd=!1,Dc=!1,Bd=!1,Qr=0;function yi(t){t!==Wa&&t.next===null&&(Wa===null?Nc=Wa=t:Wa=Wa.next=t),Dc=!0,jd||(jd=!0,iA())}function Il(t,i){if(!Bd&&Dc){Bd=!0;do for(var a=!1,l=Nc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var v=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-$t(42|t)+1)-1,d&=h&~(v&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,G_(l,d))}else d=Le,d=fa(l,l===nt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||yr(l,d)||(a=!0,G_(l,d));l=l.next}while(a);Bd=!1}}function nA(){q_()}function q_(){Dc=jd=!1;var t=0;Qr!==0&&(hA()&&(t=Qr),Qr=0);for(var i=Nn(),a=null,l=Nc;l!==null;){var h=l.next,d=H_(l,i);d===0?(l.next=null,a===null?Nc=h:a.next=h,h===null&&(Wa=a)):(a=l,(t!==0||(d&3)!==0)&&(Dc=!0)),l=h}Il(t)}function H_(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-$t(d),b=1<<v,N=h[v];N===-1?((b&a)===0||(b&l)!==0)&&(h[v]=ko(b,i)):N<=i&&(t.expiredLanes|=b),d&=~b}if(i=nt,a=Le,a=fa(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(Ye===2||Ye===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&fr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||yr(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&fr(l),da(a)){case 2:case 8:a=ca;break;case 32:a=dr;break;case 268435456:a=ha;break;default:a=dr}return l=F_.bind(null,t),a=hr(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&fr(l),t.callbackPriority=2,t.callbackNode=null,2}function F_(t,i){if(Ft!==0&&Ft!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Cc()&&t.callbackNode!==a)return null;var l=Le;return l=fa(t,t===nt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(R_(t,l,i),H_(t,Nn()),t.callbackNode!=null&&t.callbackNode===a?F_.bind(null,t):null)}function G_(t,i){if(Cc())return null;R_(t,i,!0)}function iA(){dA(function(){(Ke&6)!==0?hr(Oo,nA):q_()})}function zd(){return Qr===0&&(Qr=Vo()),Qr}function Q_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:va(""+t)}function K_(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function sA(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=Q_((h[Et]||null).action),v=l.submitter;v&&(i=(i=v[Et]||null)?Q_(i.formAction):v.getAttribute("formAction"),i!==null&&(d=i,v=null));var b=new Ea("action","action",null,l,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Qr!==0){var N=v?K_(h,v):new FormData(h);od(a,{pending:!0,data:N,method:h.method,action:d},null,N)}}else typeof d=="function"&&(b.preventDefault(),N=v?K_(h,v):new FormData(h),od(a,{pending:!0,data:N,method:h.method,action:d},d,N))},currentTarget:h}]})}}for(var qd=0;qd<Rf.length;qd++){var Hd=Rf[qd],rA=Hd.toLowerCase(),aA=Hd[0].toUpperCase()+Hd.slice(1);$n(rA,"on"+aA)}$n(Rg,"onAnimationEnd"),$n(Ig,"onAnimationIteration"),$n(xg,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(ww,"onTransitionRun"),$n(Aw,"onTransitionStart"),$n(Sw,"onTransitionCancel"),$n(Cg,"onTransitionEnd"),Mi("onMouseEnter",["mouseout","mouseover"]),Mi("onMouseLeave",["mouseout","mouseover"]),Mi("onPointerEnter",["pointerout","pointerover"]),Mi("onPointerLeave",["pointerout","pointerover"]),Kn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Kn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Kn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Kn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Kn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xl));function Y_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var v=l.length-1;0<=v;v--){var b=l[v],N=b.instance,z=b.currentTarget;if(b=b.listener,N!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=z;try{d(h)}catch(Y){_c(Y)}h.currentTarget=null,d=N}else for(v=0;v<l.length;v++){if(b=l[v],N=b.instance,z=b.currentTarget,b=b.listener,N!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=z;try{d(h)}catch(Y){_c(Y)}h.currentTarget=null,d=N}}}}function De(t,i){var a=i[jo];a===void 0&&(a=i[jo]=new Set);var l=t+"__bubble";a.has(l)||($_(i,t,2,!1),a.add(l))}function Fd(t,i,a){var l=0;i&&(l|=4),$_(a,t,l,i)}var Oc="_reactListening"+Math.random().toString(36).slice(2);function Gd(t){if(!t[Oc]){t[Oc]=!0,Bo.forEach(function(a){a!=="selectionchange"&&(oA.has(a)||Fd(a,!1,t),Fd(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Oc]||(i[Oc]=!0,Fd("selectionchange",!1,i))}}function $_(t,i,a,l){switch(vv(i)){case 2:var h=kA;break;case 8:h=VA;break;default:h=rm}a=h.bind(null,i,a,t),h=void 0,!kn||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Qd(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var b=l.stateNode.containerInfo;if(b===h)break;if(v===4)for(v=l.return;v!==null;){var N=v.tag;if((N===3||N===4)&&v.stateNode.containerInfo===h)return;v=v.return}for(;b!==null;){if(v=Oi(b),v===null)return;if(N=v.tag,N===5||N===6||N===26||N===27){l=d=v;continue e}b=b.parentNode}}l=l.return}ku(function(){var z=d,Y=Mn(a),Z=[];e:{var q=Ng.get(t);if(q!==void 0){var H=Ea,be=t;switch(t){case"keypress":if(li(a)===0)break e;case"keydown":case"keyup":H=Ra;break;case"focusin":be="focus",H=wa;break;case"focusout":be="blur",H=wa;break;case"beforeblur":case"afterblur":H=wa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=_f;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=qu;break;case Rg:case Ig:case xg:H=Aa;break;case Cg:H=Fu;break;case"scroll":case"scrollend":H=Vu;break;case"wheel":H=Ia;break;case"copy":case"cut":case"paste":H=Sa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Zo;break;case"toggle":case"beforetoggle":H=Qu}var _e=(i&4)!==0,Ze=!_e&&(t==="scroll"||t==="scrollend"),U=_e?q!==null?q+"Capture":null:q;_e=[];for(var V=z,B;V!==null;){var $=V;if(B=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||B===null||U===null||($=Sr(V,U),$!=null&&_e.push(Cl(V,$,B))),Ze)break;V=V.return}0<_e.length&&(q=new H(q,be,null,a,Y),Z.push({event:q,listeners:_e}))}}if((i&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",q&&a!==Pi&&(be=a.relatedTarget||a.fromElement)&&(Oi(be)||be[Dn]))break e;if((H||q)&&(q=Y.window===Y?Y:(q=Y.ownerDocument)?q.defaultView||q.parentWindow:window,H?(be=a.relatedTarget||a.toElement,H=z,be=be?Oi(be):null,be!==null&&(Ze=u(be),_e=be.tag,be!==Ze||_e!==5&&_e!==27&&_e!==6)&&(be=null)):(H=null,be=z),H!==be)){if(_e=Vn,$="onMouseLeave",U="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(_e=Zo,$="onPointerLeave",U="onPointerEnter",V="pointer"),Ze=H==null?q:si(H),B=be==null?q:si(be),q=new _e($,V+"leave",H,a,Y),q.target=Ze,q.relatedTarget=B,$=null,Oi(Y)===z&&(_e=new _e(U,V+"enter",be,a,Y),_e.target=B,_e.relatedTarget=Ze,$=_e),Ze=$,H&&be)t:{for(_e=H,U=be,V=0,B=_e;B;B=Za(B))V++;for(B=0,$=U;$;$=Za($))B++;for(;0<V-B;)_e=Za(_e),V--;for(;0<B-V;)U=Za(U),B--;for(;V--;){if(_e===U||U!==null&&_e===U.alternate)break t;_e=Za(_e),U=Za(U)}_e=null}else _e=null;H!==null&&X_(Z,q,H,_e,!1),be!==null&&Ze!==null&&X_(Z,Ze,be,_e,!0)}}e:{if(q=z?si(z):window,H=q.nodeName&&q.nodeName.toLowerCase(),H==="select"||H==="input"&&q.type==="file")var de=pg;else if(Ct(q))if(gg)de=Ew;else{de=_w;var Ce=yw}else H=q.nodeName,!H||H.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?z&&Go(z.elementType)&&(de=pg):de=vw;if(de&&(de=de(t,z))){zi(Z,de,a,Y);break e}Ce&&Ce(t,q,z),t==="focusout"&&z&&q.type==="number"&&z.memoizedProps.value!=null&&_s(q,"number",q.value)}switch(Ce=z?si(z):window,t){case"focusin":(Ct(Ce)||Ce.contentEditable==="true")&&(xa=Ce,wf=z,tl=null);break;case"focusout":tl=wf=xa=null;break;case"mousedown":Af=!0;break;case"contextmenu":case"mouseup":case"dragend":Af=!1,Ag(Z,a,Y);break;case"selectionchange":if(bw)break;case"keydown":case"keyup":Ag(Z,a,Y)}var me;if(hi)e:{switch(t){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else Pe?G(t,a)&&(ve="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ve="onCompositionStart");ve&&(_&&a.locale!=="ko"&&(Pe||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&Pe&&(me=Ko()):(oi=Y,vs="value"in oi?oi.value:oi.textContent,Pe=!0)),Ce=Mc(z,ve),0<Ce.length&&(ve=new Xo(ve,t,null,a,Y),Z.push({event:ve,listeners:Ce}),me?ve.data=me:(me=oe(a),me!==null&&(ve.data=me)))),(me=p?xt(t,a):Ue(t,a))&&(ve=Mc(z,"onBeforeInput"),0<ve.length&&(Ce=new Xo("onBeforeInput","beforeinput",null,a,Y),Z.push({event:Ce,listeners:ve}),Ce.data=me)),sA(Z,t,z,a,Y)}Y_(Z,i)})}function Cl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Mc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Sr(t,a),h!=null&&l.unshift(Cl(t,h,d)),h=Sr(t,i),h!=null&&l.push(Cl(t,h,d))),t.tag===3)return l;t=t.return}return[]}function Za(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function X_(t,i,a,l,h){for(var d=i._reactName,v=[];a!==null&&a!==l;){var b=a,N=b.alternate,z=b.stateNode;if(b=b.tag,N!==null&&N===l)break;b!==5&&b!==26&&b!==27||z===null||(N=z,h?(z=Sr(a,d),z!=null&&v.unshift(Cl(a,z,N))):h||(z=Sr(a,d),z!=null&&v.push(Cl(a,z,N)))),a=a.return}v.length!==0&&t.push({event:i,listeners:v})}var lA=/\r\n?/g,uA=/\u0000|\uFFFD/g;function W_(t){return(typeof t=="string"?t:""+t).replace(lA,`
`).replace(uA,"")}function Z_(t,i){return i=W_(i),W_(t)===i}function kc(){}function We(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||On(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&On(t,""+l);break;case"className":ri(t,"class",l);break;case"tabIndex":ri(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ri(t,a,l);break;case"style":Fo(t,l,d);break;case"data":if(i!=="object"){ri(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=va(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&We(t,i,"name",h.name,h,null),We(t,i,"formEncType",h.formEncType,h,null),We(t,i,"formMethod",h.formMethod,h,null),We(t,i,"formTarget",h.formTarget,h,null)):(We(t,i,"encType",h.encType,h,null),We(t,i,"method",h.method,h,null),We(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=va(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=kc);break;case"onScroll":l!=null&&De("scroll",t);break;case"onScrollEnd":l!=null&&De("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=va(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":De("beforetoggle",t),De("toggle",t),ys(t,"popover",l);break;case"xlinkActuate":zt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":zt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":zt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":zt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":zt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":zt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":zt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":zt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":zt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ys(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=gf.get(a)||a,ys(t,a,l))}}function Kd(t,i,a,l,h,d){switch(a){case"style":Fo(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof l=="string"?On(t,l):(typeof l=="number"||typeof l=="bigint")&&On(t,""+l);break;case"onScroll":l!=null&&De("scroll",t);break;case"onScrollEnd":l!=null&&De("scrollend",t);break;case"onClick":l!=null&&(t.onclick=kc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ma.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Et]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):ys(t,a,l)}}}function Gt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":De("error",t),De("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:We(t,i,d,v,a,null)}}h&&We(t,i,"srcSet",a.srcSet,a,null),l&&We(t,i,"src",a.src,a,null);return;case"input":De("invalid",t);var b=d=v=h=null,N=null,z=null;for(l in a)if(a.hasOwnProperty(l)){var Y=a[l];if(Y!=null)switch(l){case"name":h=Y;break;case"type":v=Y;break;case"checked":N=Y;break;case"defaultChecked":z=Y;break;case"value":d=Y;break;case"defaultValue":b=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,i));break;default:We(t,i,l,Y,a,null)}}br(t,d,b,N,z,v,h,!1),_a(t);return;case"select":De("invalid",t),l=v=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":v=b;break;case"multiple":l=b;default:We(t,i,h,b,a,null)}i=d,a=v,t.multiple=!!l,i!=null?Vi(t,!!l,i,!1):a!=null&&Vi(t,!!l,a,!0);return;case"textarea":De("invalid",t),d=h=l=null;for(v in a)if(a.hasOwnProperty(v)&&(b=a[v],b!=null))switch(v){case"value":l=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:We(t,i,v,b,a,null)}wr(t,l,h,d),_a(t);return;case"option":for(N in a)if(a.hasOwnProperty(N)&&(l=a[N],l!=null))switch(N){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:We(t,i,N,l,a,null)}return;case"dialog":De("beforetoggle",t),De("toggle",t),De("cancel",t),De("close",t);break;case"iframe":case"object":De("load",t);break;case"video":case"audio":for(l=0;l<xl.length;l++)De(xl[l],t);break;case"image":De("error",t),De("load",t);break;case"details":De("toggle",t);break;case"embed":case"source":case"link":De("error",t),De("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(l=a[z],l!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:We(t,i,z,l,a,null)}return;default:if(Go(i)){for(Y in a)a.hasOwnProperty(Y)&&(l=a[Y],l!==void 0&&Kd(t,i,Y,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&We(t,i,b,l,a,null))}function cA(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,v=null,b=null,N=null,z=null,Y=null;for(H in a){var Z=a[H];if(a.hasOwnProperty(H)&&Z!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":N=Z;default:l.hasOwnProperty(H)||We(t,i,H,null,l,Z)}}for(var q in l){var H=l[q];if(Z=a[q],l.hasOwnProperty(q)&&(H!=null||Z!=null))switch(q){case"type":d=H;break;case"name":h=H;break;case"checked":z=H;break;case"defaultChecked":Y=H;break;case"value":v=H;break;case"defaultValue":b=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(r(137,i));break;default:H!==Z&&We(t,i,q,H,l,Z)}}vn(t,v,b,N,z,Y,d,h);return;case"select":H=v=b=q=null;for(d in a)if(N=a[d],a.hasOwnProperty(d)&&N!=null)switch(d){case"value":break;case"multiple":H=N;default:l.hasOwnProperty(d)||We(t,i,d,null,l,N)}for(h in l)if(d=l[h],N=a[h],l.hasOwnProperty(h)&&(d!=null||N!=null))switch(h){case"value":q=d;break;case"defaultValue":b=d;break;case"multiple":v=d;default:d!==N&&We(t,i,h,d,l,N)}i=b,a=v,l=H,q!=null?Vi(t,!!a,q,!1):!!l!=!!a&&(i!=null?Vi(t,!!a,i,!0):Vi(t,!!a,a?[]:"",!1));return;case"textarea":H=q=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:We(t,i,b,null,l,h)}for(v in l)if(h=l[v],d=a[v],l.hasOwnProperty(v)&&(h!=null||d!=null))switch(v){case"value":q=h;break;case"defaultValue":H=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==d&&We(t,i,v,h,l,d)}$e(t,q,H);return;case"option":for(var be in a)if(q=a[be],a.hasOwnProperty(be)&&q!=null&&!l.hasOwnProperty(be))switch(be){case"selected":t.selected=!1;break;default:We(t,i,be,null,l,q)}for(N in l)if(q=l[N],H=a[N],l.hasOwnProperty(N)&&q!==H&&(q!=null||H!=null))switch(N){case"selected":t.selected=q&&typeof q!="function"&&typeof q!="symbol";break;default:We(t,i,N,q,l,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in a)q=a[_e],a.hasOwnProperty(_e)&&q!=null&&!l.hasOwnProperty(_e)&&We(t,i,_e,null,l,q);for(z in l)if(q=l[z],H=a[z],l.hasOwnProperty(z)&&q!==H&&(q!=null||H!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,i));break;default:We(t,i,z,q,l,H)}return;default:if(Go(i)){for(var Ze in a)q=a[Ze],a.hasOwnProperty(Ze)&&q!==void 0&&!l.hasOwnProperty(Ze)&&Kd(t,i,Ze,void 0,l,q);for(Y in l)q=l[Y],H=a[Y],!l.hasOwnProperty(Y)||q===H||q===void 0&&H===void 0||Kd(t,i,Y,q,l,H);return}}for(var U in a)q=a[U],a.hasOwnProperty(U)&&q!=null&&!l.hasOwnProperty(U)&&We(t,i,U,null,l,q);for(Z in l)q=l[Z],H=a[Z],!l.hasOwnProperty(Z)||q===H||q==null&&H==null||We(t,i,Z,q,l,H)}var Yd=null,$d=null;function Vc(t){return t.nodeType===9?t:t.ownerDocument}function J_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ev(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Xd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Wd=null;function hA(){var t=window.event;return t&&t.type==="popstate"?t===Wd?!1:(Wd=t,!0):(Wd=null,!1)}var tv=typeof setTimeout=="function"?setTimeout:void 0,fA=typeof clearTimeout=="function"?clearTimeout:void 0,nv=typeof Promise=="function"?Promise:void 0,dA=typeof queueMicrotask=="function"?queueMicrotask:typeof nv<"u"?function(t){return nv.resolve(null).then(t).catch(mA)}:tv;function mA(t){setTimeout(function(){throw t})}function Vs(t){return t==="head"}function iv(t,i){var a=i,l=0,h=0;do{var d=a.nextSibling;if(t.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(0<l&&8>l){a=l;var v=t.ownerDocument;if(a&1&&Nl(v.documentElement),a&2&&Nl(v.body),a&4)for(a=v.head,Nl(a),v=a.firstChild;v;){var b=v.nextSibling,N=v.nodeName;v[_r]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=b}}if(h===0){t.removeChild(d),Ll(i);return}h--}else a==="$"||a==="$?"||a==="$!"?h++:l=a.charCodeAt(0)-48;else l=0;a=d}while(a);Ll(i)}function Zd(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Zd(a),gs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function pA(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[_r])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Wn(t.nextSibling),t===null)break}return null}function gA(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Wn(t.nextSibling),t===null))return null;return t}function Jd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function yA(t,i){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Wn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var em=null;function sv(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return t;i--}else a==="/$"&&i++}t=t.previousSibling}return null}function rv(t,i,a){switch(i=Vc(a),t){case"html":if(t=i.documentElement,!t)throw Error(r(452));return t;case"head":if(t=i.head,!t)throw Error(r(453));return t;case"body":if(t=i.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function Nl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);gs(t)}var qn=new Map,av=new Set;function Pc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var es=le.d;le.d={f:_A,r:vA,D:EA,C:TA,L:bA,m:wA,X:SA,S:AA,M:RA};function _A(){var t=es.f(),i=Ic();return t||i}function vA(t){var i=ii(t);i!==null&&i.tag===5&&i.type==="form"?Ry(i):es.r(t)}var Ja=typeof document>"u"?null:document;function ov(t,i,a){var l=Ja;if(l&&typeof i=="string"&&i){var h=Tt(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),av.has(h)||(av.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Gt(i,"link",t),gt(i),l.head.appendChild(i)))}}function EA(t){es.D(t),ov("dns-prefetch",t,null)}function TA(t,i){es.C(t,i),ov("preconnect",t,i)}function bA(t,i,a){es.L(t,i,a);var l=Ja;if(l&&t&&i){var h='link[rel="preload"][as="'+Tt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Tt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Tt(a.imageSizes)+'"]')):h+='[href="'+Tt(t)+'"]';var d=h;switch(i){case"style":d=eo(t);break;case"script":d=to(t)}qn.has(d)||(t=T({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),qn.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Dl(d))||i==="script"&&l.querySelector(Ol(d))||(i=l.createElement("link"),Gt(i,"link",t),gt(i),l.head.appendChild(i)))}}function wA(t,i){es.m(t,i);var a=Ja;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Tt(l)+'"][href="'+Tt(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=to(t)}if(!qn.has(d)&&(t=T({rel:"modulepreload",href:t},i),qn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ol(d)))return}l=a.createElement("link"),Gt(l,"link",t),gt(l),a.head.appendChild(l)}}}function AA(t,i,a){es.S(t,i,a);var l=Ja;if(l&&t){var h=rn(l).hoistableStyles,d=eo(t);i=i||"default";var v=h.get(d);if(!v){var b={loading:0,preload:null};if(v=l.querySelector(Dl(d)))b.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":i},a),(a=qn.get(d))&&tm(t,a);var N=v=l.createElement("link");gt(N),Gt(N,"link",t),N._p=new Promise(function(z,Y){N.onload=z,N.onerror=Y}),N.addEventListener("load",function(){b.loading|=1}),N.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Uc(v,i,l)}v={type:"stylesheet",instance:v,count:1,state:b},h.set(d,v)}}}function SA(t,i){es.X(t,i);var a=Ja;if(a&&t){var l=rn(a).hoistableScripts,h=to(t),d=l.get(h);d||(d=a.querySelector(Ol(h)),d||(t=T({src:t,async:!0},i),(i=qn.get(h))&&nm(t,i),d=a.createElement("script"),gt(d),Gt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function RA(t,i){es.M(t,i);var a=Ja;if(a&&t){var l=rn(a).hoistableScripts,h=to(t),d=l.get(h);d||(d=a.querySelector(Ol(h)),d||(t=T({src:t,async:!0,type:"module"},i),(i=qn.get(h))&&nm(t,i),d=a.createElement("script"),gt(d),Gt(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function lv(t,i,a,l){var h=(h=we.current)?Pc(h):null;if(!h)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=eo(a.href),a=rn(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=eo(a.href);var d=rn(h).hoistableStyles,v=d.get(t);if(v||(h=h.ownerDocument||h,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=h.querySelector(Dl(t)))&&!d._p&&(v.instance=d,v.state.loading=5),qn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},qn.set(t,a),d||IA(h,t,a,v.state))),i&&l===null)throw Error(r(528,""));return v}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=to(a),a=rn(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function eo(t){return'href="'+Tt(t)+'"'}function Dl(t){return'link[rel="stylesheet"]['+t+"]"}function uv(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function IA(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Gt(i,"link",a),gt(i),t.head.appendChild(i))}function to(t){return'[src="'+Tt(t)+'"]'}function Ol(t){return"script[async]"+t}function cv(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Tt(a.href)+'"]');if(l)return i.instance=l,gt(l),l;var h=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),gt(l),Gt(l,"style",h),Uc(l,a.precedence,t),i.instance=l;case"stylesheet":h=eo(a.href);var d=t.querySelector(Dl(h));if(d)return i.state.loading|=4,i.instance=d,gt(d),d;l=uv(a),(h=qn.get(h))&&tm(l,h),d=(t.ownerDocument||t).createElement("link"),gt(d);var v=d;return v._p=new Promise(function(b,N){v.onload=b,v.onerror=N}),Gt(d,"link",l),i.state.loading|=4,Uc(d,a.precedence,t),i.instance=d;case"script":return d=to(a.src),(h=t.querySelector(Ol(d)))?(i.instance=h,gt(h),h):(l=a,(h=qn.get(d))&&(l=T({},a),nm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),gt(h),Gt(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Uc(l,a.precedence,t));return i.instance}function Uc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,v=0;v<l.length;v++){var b=l[v];if(b.dataset.precedence===i)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function tm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function nm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Lc=null;function hv(t,i,a){if(Lc===null){var l=new Map,h=Lc=new Map;h.set(a,l)}else h=Lc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[_r]||d[It]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(i)||"";v=t+v;var b=l.get(v);b?b.push(d):l.set(v,[d])}}return l}function fv(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function xA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function dv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Ml=null;function CA(){}function NA(t,i,a){if(Ml===null)throw Error(r(475));var l=Ml;if(i.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var h=eo(a.href),d=t.querySelector(Dl(h));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=jc.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=d,gt(d);return}d=t.ownerDocument||t,a=uv(a),(h=qn.get(h))&&tm(a,h),d=d.createElement("link"),gt(d);var v=d;v._p=new Promise(function(b,N){v.onload=b,v.onerror=N}),Gt(d,"link",a),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=jc.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function DA(){if(Ml===null)throw Error(r(475));var t=Ml;return t.stylesheets&&t.count===0&&im(t,t.stylesheets),0<t.count?function(i){var a=setTimeout(function(){if(t.stylesheets&&im(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(a)}}:null}function jc(){if(this.count--,this.count===0){if(this.stylesheets)im(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Bc=null;function im(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Bc=new Map,i.forEach(OA,t),Bc=null,jc.call(t))}function OA(t,i){if(!(i.state.loading&4)){var a=Bc.get(t);if(a)var l=a.get(null);else{a=new Map,Bc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var v=h[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}h=i.instance,v=h.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,h),a.set(v,h),this.count++,l=jc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var kl={$$typeof:re,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function MA(t,i,a,l,h,d,v,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ni(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ni(0),this.hiddenUpdates=Ni(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function mv(t,i,a,l,h,d,v,b,N,z,Y,Z){return t=new MA(t,i,a,v,b,N,z,Z),i=1,d===!0&&(i|=24),d=Tn(3,null,null,i),t.current=d,d.stateNode=t,i=Lf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},qf(d),t}function pv(t){return t?(t=Oa,t):Oa}function gv(t,i,a,l,h,d){h=pv(h),l.context===null?l.context=h:l.pendingContext=h,l=bs(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=ws(t,l,i),a!==null&&(Rn(a,t,i),cl(a,t,i))}function yv(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function sm(t,i){yv(t,i),(t=t.alternate)&&yv(t,i)}function _v(t){if(t.tag===13){var i=Da(t,67108864);i!==null&&Rn(i,t,67108864),sm(t,67108864)}}var zc=!0;function kA(t,i,a,l){var h=Q.T;Q.T=null;var d=le.p;try{le.p=2,rm(t,i,a,l)}finally{le.p=d,Q.T=h}}function VA(t,i,a,l){var h=Q.T;Q.T=null;var d=le.p;try{le.p=8,rm(t,i,a,l)}finally{le.p=d,Q.T=h}}function rm(t,i,a,l){if(zc){var h=am(l);if(h===null)Qd(t,i,l,qc,a),Ev(t,l);else if(UA(h,t,i,a,l))l.stopPropagation();else if(Ev(t,l),i&4&&-1<PA.indexOf(t)){for(;h!==null;){var d=ii(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=Qn(d.pendingLanes);if(v!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;v;){var N=1<<31-$t(v);b.entanglements[1]|=N,v&=~N}yi(d),(Ke&6)===0&&(Sc=Nn()+500,Il(0))}}break;case 13:b=Da(d,2),b!==null&&Rn(b,d,2),Ic(),sm(d,2)}if(d=am(l),d===null&&Qd(t,i,l,qc,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Qd(t,i,l,null,a)}}function am(t){return t=Mn(t),om(t)}var qc=null;function om(t){if(qc=null,t=Oi(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return qc=t,null}function vv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(cf()){case Oo:return 2;case ca:return 8;case dr:case hf:return 32;case ha:return 268435456;default:return 32}default:return 32}}var lm=!1,Ps=null,Us=null,Ls=null,Vl=new Map,Pl=new Map,js=[],PA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ev(t,i){switch(t){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":Us=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":Vl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pl.delete(i.pointerId)}}function Ul(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=ii(i),i!==null&&_v(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function UA(t,i,a,l,h){switch(i){case"focusin":return Ps=Ul(Ps,t,i,a,l,h),!0;case"dragenter":return Us=Ul(Us,t,i,a,l,h),!0;case"mouseover":return Ls=Ul(Ls,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return Vl.set(d,Ul(Vl.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Pl.set(d,Ul(Pl.get(d)||null,t,i,a,l,h)),!0}return!1}function Tv(t){var i=Oi(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,Iu(t.priority,function(){if(a.tag===13){var l=Sn();l=ds(l);var h=Da(a,l);h!==null&&Rn(h,a,l),sm(a,l)}});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=am(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Pi=l,a.target.dispatchEvent(l),Pi=null}else return i=ii(a),i!==null&&_v(i),t.blockedOn=a,!1;i.shift()}return!0}function bv(t,i,a){Hc(t)&&a.delete(i)}function LA(){lm=!1,Ps!==null&&Hc(Ps)&&(Ps=null),Us!==null&&Hc(Us)&&(Us=null),Ls!==null&&Hc(Ls)&&(Ls=null),Vl.forEach(bv),Pl.forEach(bv)}function Fc(t,i){t.blockedOn===i&&(t.blockedOn=null,lm||(lm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,LA)))}var Gc=null;function wv(t){Gc!==t&&(Gc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Gc===t&&(Gc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(om(l||a)===null)continue;break}var d=ii(a);d!==null&&(t.splice(i,3),i-=3,od(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function Ll(t){function i(N){return Fc(N,t)}Ps!==null&&Fc(Ps,t),Us!==null&&Fc(Us,t),Ls!==null&&Fc(Ls,t),Vl.forEach(i),Pl.forEach(i);for(var a=0;a<js.length;a++){var l=js[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<js.length&&(a=js[0],a.blockedOn===null);)Tv(a),a.blockedOn===null&&js.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],v=h[Et]||null;if(typeof d=="function")v||wv(a);else if(v){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,v=d[Et]||null)b=v.formAction;else if(om(h)!==null)continue}else b=v.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),wv(a)}}}function um(t){this._internalRoot=t}Qc.prototype.render=um.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=Sn();gv(a,l,t,i,null,null)},Qc.prototype.unmount=um.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;gv(t.current,2,null,t,null,null),Ic(),i[Dn]=null}};function Qc(t){this._internalRoot=t}Qc.prototype.unstable_scheduleHydration=function(t){if(t){var i=ms();t={blockedOn:null,target:t,priority:i};for(var a=0;a<js.length&&i!==0&&i<js[a].priority;a++);js.splice(a,0,t),a===0&&Tv(t)}};var Av=e.version;if(Av!=="19.1.0")throw Error(r(527,Av,"19.1.0"));le.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=g(i),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var jA={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kc.isDisabled&&Kc.supportsFiber)try{ct=Kc.inject(jA),Qe=Kc}catch{}}return Bl.createRoot=function(t,i){if(!o(t))throw Error(r(299));var a=!1,l="",h=By,d=zy,v=qy,b=null;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(v=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(b=i.unstable_transitionCallbacks)),i=mv(t,1,!1,null,null,a,l,h,d,v,b,null),t[Dn]=i.current,Gd(t),new um(i)},Bl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(r(299));var l=!1,h="",d=By,v=zy,b=qy,N=null,z=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(N=a.unstable_transitionCallbacks),a.formState!==void 0&&(z=a.formState)),i=mv(t,1,!0,i,a??null,l,h,d,v,b,N,z),i.context=pv(null),a=i.current,l=Sn(),l=ds(l),h=bs(l),h.callback=null,ws(a,h,l),a=l,i.current.lanes=a,Di(i,a),yi(i),t[Dn]=i.current,Gd(t),new Qc(i)},Bl.version="19.1.0",Bl}var kv;function $A(){if(kv)return fm.exports;kv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),fm.exports=YA(),fm.exports}var XA=$A();const WA=AE(XA),ZA=()=>{};var Vv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=function(s){const e=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},JA=function(s){const e=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];e[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],f=s[n++],m=s[n++],g=((o&7)<<18|(u&63)<<12|(f&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],f=s[n++];e[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},RE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],f=o+1<s.length,m=f?s[o+1]:0,g=o+2<s.length,y=g?s[o+2]:0,T=u>>2,w=(u&3)<<4|m>>4;let S=(m&15)<<2|y>>6,P=y&63;g||(P=64,f||(S=64)),r.push(n[T],n[w],n[S],n[P])}return r.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(SE(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):JA(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],m=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const w=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||m==null||y==null||w==null)throw new eS;const S=u<<2|m>>4;if(r.push(S),y!==64){const P=m<<4&240|y>>2;if(r.push(P),w!==64){const L=y<<6&192|w;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class eS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tS=function(s){const e=SE(s);return RE.encodeByteArray(e,!0)},fh=function(s){return tS(s).replace(/\./g,"")},IE=function(s){try{return RE.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=()=>nS().__FIREBASE_DEFAULTS__,sS=()=>{if(typeof process>"u"||typeof Vv>"u")return;const s=Vv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},rS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&IE(s[1]);return e&&JSON.parse(e)},Mh=()=>{try{return ZA()||iS()||sS()||rS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},xE=s=>{var e,n;return(n=(e=Mh())==null?void 0:e.emulatorHosts)==null?void 0:n[s]},CE=s=>{const e=xE(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},NE=()=>{var s;return(s=Mh())==null?void 0:s.config},DE=s=>{var e;return(e=Mh())==null?void 0:e[`_${s}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lp(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[fh(JSON.stringify(n)),fh(JSON.stringify(f)),""].join(".")}const Yl={};function oS(){const s={prod:[],emulator:[]};for(const e of Object.keys(Yl))Yl[e]?s.emulator.push(e):s.prod.push(e);return s}function lS(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Pv=!1;function up(s,e){if(typeof window>"u"||typeof document>"u"||!rr(window.location.host)||Yl[s]===e||Yl[s]||Pv)return;Yl[s]=e;function n(S){return`__firebase__banner__${S}`}const r="__firebase__banner",u=oS().prod.length>0;function f(){const S=document.getElementById(r);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,P){S.setAttribute("width","24"),S.setAttribute("id",P),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Pv=!0,f()},S}function T(S,P){S.setAttribute("id",P),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function w(){const S=lS(r),P=n("text"),L=document.getElementById(P)||document.createElement("span"),K=n("learnmore"),F=document.getElementById(K)||document.createElement("a"),te=n("preprendIcon"),ie=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const re=S.element;m(re),T(F,K);const se=y();g(ie,te),re.append(ie,L,F,se),document.body.appendChild(re)}u?(L.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function cS(){var e;const s=(e=Mh())==null?void 0:e.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function dS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mS(){const s=nn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function pS(){return!cS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gS(){try{return typeof indexedDB=="object"}catch{return!1}}function yS(){return new Promise((s,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;e(((u=o.error)==null?void 0:u.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="FirebaseError";class xi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_S,Object.setPrototypeOf(this,xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hu.prototype.create)}}class hu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?vS(u,r):"Error",m=`${this.serviceName}: ${f} (${o}).`;return new xi(o,m,r)}}function vS(s,e){return s.replace(ES,(n,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const ES=/\{\$([^}]+)}/g;function TS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function rs(s,e){if(s===e)return!0;const n=Object.keys(s),r=Object.keys(e);for(const o of n){if(!r.includes(o))return!1;const u=s[o],f=e[o];if(Uv(u)&&Uv(f)){if(!rs(u,f))return!1}else if(u!==f)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function Uv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(s){const e=[];for(const[n,r]of Object.entries(s))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ql(s){const e={};return s.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,u]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Hl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function bS(s,e){const n=new wS(s,e);return n.subscribe.bind(n)}class wS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let o;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");AS(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:r},o.next===void 0&&(o.next=gm),o.error===void 0&&(o.error=gm),o.complete===void 0&&(o.complete=gm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AS(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function gm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(s){return s&&s._delegate?s._delegate:s}class Zs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new aS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IS(e))try{this.getOrInitializeService({instanceIdentifier:Kr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(e=Kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Kr){return this.instances.has(e)}getOptions(e=Kr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,f]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&f.resolve(o)}return o}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&e(u,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Kr){return this.component?this.component.multipleInstances?e:Kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RS(s){return s===Kr?void 0:s}function IS(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new SS(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Oe||(Oe={}));const CS={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},NS=Oe.INFO,DS={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},OS=(s,e,...n)=>{if(e<s.logLevel)return;const r=new Date().toISOString(),o=DS[e];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cp{constructor(e){this.name=e,this._logLevel=NS,this._logHandler=OS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const MS=(s,e)=>e.some(n=>s instanceof n);let Lv,jv;function kS(){return Lv||(Lv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function VS(){return jv||(jv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ME=new WeakMap,Dm=new WeakMap,kE=new WeakMap,ym=new WeakMap,hp=new WeakMap;function PS(s){const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",f)},u=()=>{n(Ys(s.result)),o()},f=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&ME.set(n,s)}).catch(()=>{}),hp.set(e,s),e}function US(s){if(Dm.has(s))return;const e=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",f),s.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",f),s.addEventListener("abort",f)});Dm.set(s,e)}let Om={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return Dm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||kE.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ys(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function LS(s){Om=s(Om)}function jS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=s.call(_m(this),e,...n);return kE.set(r,e.sort?e.sort():[e]),Ys(r)}:VS().includes(s)?function(...e){return s.apply(_m(this),e),Ys(ME.get(this))}:function(...e){return Ys(s.apply(_m(this),e))}}function BS(s){return typeof s=="function"?jS(s):(s instanceof IDBTransaction&&US(s),MS(s,kS())?new Proxy(s,Om):s)}function Ys(s){if(s instanceof IDBRequest)return PS(s);if(ym.has(s))return ym.get(s);const e=BS(s);return e!==s&&(ym.set(s,e),hp.set(e,s)),e}const _m=s=>hp.get(s);function zS(s,e,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const f=indexedDB.open(s,e),m=Ys(f);return r&&f.addEventListener("upgradeneeded",g=>{r(Ys(f.result),g.oldVersion,g.newVersion,Ys(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const qS=["get","getKey","getAll","getAllKeys","count"],HS=["put","add","delete","clear"],vm=new Map;function Bv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(vm.get(e))return vm.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=HS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||qS.includes(n)))return;const u=async function(f,...m){const g=this.transaction(f,o?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&g.done]))[0]};return vm.set(e,u),u}LS(s=>({...s,get:(e,n,r)=>Bv(e,n)||s.get(e,n,r),has:(e,n)=>!!Bv(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GS(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Mm="@firebase/app",zv="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new cp("@firebase/app"),QS="@firebase/app-compat",KS="@firebase/analytics-compat",YS="@firebase/analytics",$S="@firebase/app-check-compat",XS="@firebase/app-check",WS="@firebase/auth",ZS="@firebase/auth-compat",JS="@firebase/database",e1="@firebase/data-connect",t1="@firebase/database-compat",n1="@firebase/functions",i1="@firebase/functions-compat",s1="@firebase/installations",r1="@firebase/installations-compat",a1="@firebase/messaging",o1="@firebase/messaging-compat",l1="@firebase/performance",u1="@firebase/performance-compat",c1="@firebase/remote-config",h1="@firebase/remote-config-compat",f1="@firebase/storage",d1="@firebase/storage-compat",m1="@firebase/firestore",p1="@firebase/ai",g1="@firebase/firestore-compat",y1="firebase",_1="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="[DEFAULT]",v1={[Mm]:"fire-core",[QS]:"fire-core-compat",[YS]:"fire-analytics",[KS]:"fire-analytics-compat",[XS]:"fire-app-check",[$S]:"fire-app-check-compat",[WS]:"fire-auth",[ZS]:"fire-auth-compat",[JS]:"fire-rtdb",[e1]:"fire-data-connect",[t1]:"fire-rtdb-compat",[n1]:"fire-fn",[i1]:"fire-fn-compat",[s1]:"fire-iid",[r1]:"fire-iid-compat",[a1]:"fire-fcm",[o1]:"fire-fcm-compat",[l1]:"fire-perf",[u1]:"fire-perf-compat",[c1]:"fire-rc",[h1]:"fire-rc-compat",[f1]:"fire-gcs",[d1]:"fire-gcs-compat",[m1]:"fire-fst",[g1]:"fire-fst-compat",[p1]:"fire-vertex","fire-js":"fire-js",[y1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh=new Map,E1=new Map,Vm=new Map;function qv(s,e){try{s.container.addComponent(e)}catch(n){as.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Zr(s){const e=s.name;if(Vm.has(e))return as.debug(`There were multiple attempts to register component ${e}.`),!1;Vm.set(e,s);for(const n of dh.values())qv(n,s);for(const n of E1.values())qv(n,s);return!0}function kh(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function In(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$s=new hu("app","Firebase",T1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=_1;function VE(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const r={name:km,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw $s.create("bad-app-name",{appName:String(o)});if(n||(n=NE()),!n)throw $s.create("no-options");const u=dh.get(o);if(u){if(rs(n,u.options)&&rs(r,u.config))return u;throw $s.create("duplicate-app",{appName:o})}const f=new xS(o);for(const g of Vm.values())f.addComponent(g);const m=new b1(n,r,f);return dh.set(o,m),m}function fp(s=km){const e=dh.get(s);if(!e&&s===km&&NE())return VE();if(!e)throw $s.create("no-app",{appName:s});return e}function Ei(s,e,n){let r=v1[s]??s;n&&(r+=`-${n}`);const o=r.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${r}" with version "${e}":`];o&&f.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),as.warn(f.join(" "));return}Zr(new Zs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="firebase-heartbeat-database",A1=1,tu="firebase-heartbeat-store";let Em=null;function PE(){return Em||(Em=zS(w1,A1,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(tu)}catch(n){console.warn(n)}}}}).catch(s=>{throw $s.create("idb-open",{originalErrorMessage:s.message})})),Em}async function S1(s){try{const n=(await PE()).transaction(tu),r=await n.objectStore(tu).get(UE(s));return await n.done,r}catch(e){if(e instanceof xi)as.warn(e.message);else{const n=$s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});as.warn(n.message)}}}async function Hv(s,e){try{const r=(await PE()).transaction(tu,"readwrite");await r.objectStore(tu).put(e,UE(s)),await r.done}catch(n){if(n instanceof xi)as.warn(n.message);else{const r=$s.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});as.warn(r.message)}}}function UE(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=1024,I1=30;class x1{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new N1(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=Fv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(f=>f.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>I1){const f=D1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){as.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Fv(),{heartbeatsToSend:r,unsentEntries:o}=C1(this._heartbeatsCache.heartbeats),u=fh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return as.warn(n),""}}}function Fv(){return new Date().toISOString().substring(0,10)}function C1(s,e=R1){const n=[];let r=s.slice();for(const o of s){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),Gv(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Gv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class N1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gS()?yS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await S1(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Hv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Hv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Gv(s){return fh(JSON.stringify({version:2,heartbeats:s})).length}function D1(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(s){Zr(new Zs("platform-logger",e=>new FS(e),"PRIVATE")),Zr(new Zs("heartbeat",e=>new x1(e),"PRIVATE")),Ei(Mm,zv,s),Ei(Mm,zv,"esm2020"),Ei("fire-js","")}O1("");var M1="firebase",k1="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ei(M1,k1,"app");function LE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const V1=LE,jE=new hu("auth","Firebase",LE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh=new cp("@firebase/auth");function P1(s,...e){mh.logLevel<=Oe.WARN&&mh.warn(`Auth (${ra}): ${s}`,...e)}function nh(s,...e){mh.logLevel<=Oe.ERROR&&mh.error(`Auth (${ra}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(s,...e){throw dp(s,...e)}function Ti(s,...e){return dp(s,...e)}function BE(s,e,n){const r={...V1(),[e]:n};return new hu("auth","Firebase",r).create(e,{appName:s.name})}function is(s){return BE(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dp(s,...e){if(typeof s!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=s.name),s._errorFactory.create(n,...r)}return jE.create(s,...e)}function Ee(s,e,...n){if(!s)throw dp(e,...n)}function ts(s){const e="INTERNAL ASSERTION FAILED: "+s;throw nh(e),new Error(e)}function os(s,e){s||ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.href)||""}function U1(){return Qv()==="http:"||Qv()==="https:"}function Qv(){var s;return typeof self<"u"&&((s=self.location)==null?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(U1()||fS()||"connection"in navigator)?navigator.onLine:!0}function j1(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n){this.shortDelay=e,this.longDelay=n,os(n>e,"Short delay should be less than long delay!"),this.isMobile=uS()||dS()}get(){return L1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(s,e){os(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],q1=new du(3e4,6e4);function ar(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function hs(s,e,n,r,o={}){return qE(s,o,async()=>{let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});const m=fu({key:s.config.apiKey,...f}).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:g,...u};return hS()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&rr(s.emulatorConfig.host)&&(y.credentials="include"),zE.fetch()(await HE(s,s.config.apiHost,n,m),y)})}async function qE(s,e,n){s._canInitEmulator=!1;const r={...B1,...e};try{const o=new F1(s),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw Yc(s,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const m=u.ok?f.errorMessage:f.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yc(s,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw Yc(s,"email-already-in-use",f);if(g==="USER_DISABLED")throw Yc(s,"user-disabled",f);const T=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw BE(s,T,y);Jn(s,T)}}catch(o){if(o instanceof xi)throw o;Jn(s,"network-request-failed",{message:String(o)})}}async function mu(s,e,n,r,o={}){const u=await hs(s,e,n,r,o);return"mfaPendingCredential"in u&&Jn(s,"multi-factor-auth-required",{_serverResponse:u}),u}async function HE(s,e,n,r){const o=`${e}${n}?${r}`,u=s,f=u.config.emulator?mp(s.config,o):`${s.config.apiScheme}://${o}`;return z1.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function H1(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class F1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ti(this.auth,"network-request-failed")),q1.get())})}}function Yc(s,e,n){const r={appName:s.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const o=Ti(s,e,r);return o.customData._tokenResponse=n,o}function Kv(s){return s!==void 0&&s.enterprise!==void 0}class G1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return H1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Q1(s,e){return hs(s,"GET","/v2/recaptchaConfig",ar(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K1(s,e){return hs(s,"POST","/v1/accounts:delete",e)}async function ph(s,e){return hs(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $l(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Y1(s,e=!1){const n=ot(s),r=await n.getIdToken(e),o=pp(r);Ee(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:o,token:r,authTime:$l(Tm(o.auth_time)),issuedAtTime:$l(Tm(o.iat)),expirationTime:$l(Tm(o.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Tm(s){return Number(s)*1e3}function pp(s){const[e,n,r]=s.split(".");if(e===void 0||n===void 0||r===void 0)return nh("JWT malformed, contained fewer than 3 sections"),null;try{const o=IE(n);return o?JSON.parse(o):(nh("Failed to decode base64 JWT payload"),null)}catch(o){return nh("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Yv(s){const e=pp(s);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ho(s,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof xi&&$1(r)&&s.auth.currentUser===s&&await s.auth.signOut(),r}}function $1({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$l(this.lastLoginAt),this.creationTime=$l(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gh(s){var w;const e=s.auth,n=await s.getIdToken(),r=await ho(s,ph(e,{idToken:n}));Ee(r==null?void 0:r.users.length,e,"internal-error");const o=r.users[0];s._notifyReloadListener(o);const u=(w=o.providerUserInfo)!=null&&w.length?FE(o.providerUserInfo):[],f=Z1(s.providerData,u),m=s.isAnonymous,g=!(s.email&&o.passwordHash)&&!(f!=null&&f.length),y=m?g:!1,T={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new Um(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,T)}async function W1(s){const e=ot(s);await gh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Z1(s,e){return[...s.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function FE(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J1(s,e){const n=await qE(s,{},async()=>{const r=fu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,f=await HE(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:r};return s.emulatorConfig&&rr(s.emulatorConfig.host)&&(g.credentials="include"),zE.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function eR(s,e){return hs(s,"POST","/v2/accounts:revokeToken",ar(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Yv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const n=Yv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:o,expiresIn:u}=await J1(e,n);this.updateTokensAndExpiration(r,o,Number(u))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:o,expirationTime:u}=n,f=new oo;return r&&(Ee(typeof r=="string","internal-error",{appName:e}),f.refreshToken=r),o&&(Ee(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Ee(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oo,this.toJSON())}_performRefresh(){return ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zs(s,e){Ee(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Zn{constructor({uid:e,auth:n,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new X1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Um(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await ho(this,this.stsTokenManager.getToken(this.auth,e));return Ee(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Y1(this,e)}reload(){return W1(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await gh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(In(this.auth.app))return Promise.reject(is(this.auth));const e=await this.getIdToken();return await ho(this,K1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,m=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,T=n.lastLoginAt??void 0,{uid:w,emailVerified:S,isAnonymous:P,providerData:L,stsTokenManager:K}=n;Ee(w&&K,e,"internal-error");const F=oo.fromJSON(this.name,K);Ee(typeof w=="string",e,"internal-error"),zs(r,e.name),zs(o,e.name),Ee(typeof S=="boolean",e,"internal-error"),Ee(typeof P=="boolean",e,"internal-error"),zs(u,e.name),zs(f,e.name),zs(m,e.name),zs(g,e.name),zs(y,e.name),zs(T,e.name);const te=new Zn({uid:w,auth:e,email:o,emailVerified:S,displayName:r,isAnonymous:P,photoURL:f,phoneNumber:u,tenantId:m,stsTokenManager:F,createdAt:y,lastLoginAt:T});return L&&Array.isArray(L)&&(te.providerData=L.map(ie=>({...ie}))),g&&(te._redirectEventId=g),te}static async _fromIdTokenResponse(e,n,r=!1){const o=new oo;o.updateFromServerResponse(n);const u=new Zn({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await gh(u),u}static async _fromGetAccountInfoResponse(e,n,r){const o=n.users[0];Ee(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?FE(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!(u!=null&&u.length),m=new oo;m.updateFromIdToken(r);const g=new Zn({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Um(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(u!=null&&u.length)};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=new Map;function ns(s){os(s instanceof Function,"Expected a class definition");let e=$v.get(s);return e?(os(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,$v.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}GE.type="NONE";const Xv=GE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(s,e,n){return`firebase:${s}:${e}:${n}`}class lo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:o,name:u}=this.auth;this.fullUserKey=ih(this.userKey,o.apiKey,u),this.fullPersistenceKey=ih("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await ph(this.auth,{idToken:e}).catch(()=>{});return n?Zn._fromGetAccountInfoResponse(this.auth,n,e):null}return Zn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new lo(ns(Xv),e,r);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||ns(Xv);const f=ih(r,e.config.apiKey,e.name);let m=null;for(const y of n)try{const T=await y._get(f);if(T){let w;if(typeof T=="string"){const S=await ph(e,{idToken:T}).catch(()=>{});if(!S)break;w=await Zn._fromGetAccountInfoResponse(e,S,T)}else w=Zn._fromJSON(e,T);y!==u&&(m=w),u=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new lo(u,e,r):(u=g[0],m&&await u._set(f,m.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new lo(u,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($E(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(WE(e))return"Blackberry";if(ZE(e))return"Webos";if(KE(e))return"Safari";if((e.includes("chrome/")||YE(e))&&!e.includes("edge/"))return"Chrome";if(XE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=s.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function QE(s=nn()){return/firefox\//i.test(s)}function KE(s=nn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YE(s=nn()){return/crios\//i.test(s)}function $E(s=nn()){return/iemobile/i.test(s)}function XE(s=nn()){return/android/i.test(s)}function WE(s=nn()){return/blackberry/i.test(s)}function ZE(s=nn()){return/webos/i.test(s)}function gp(s=nn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function tR(s=nn()){var e;return gp(s)&&!!((e=window.navigator)!=null&&e.standalone)}function nR(){return mS()&&document.documentMode===10}function JE(s=nn()){return gp(s)||XE(s)||ZE(s)||WE(s)||/windows phone/i.test(s)||$E(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(s,e=[]){let n;switch(s){case"Browser":n=Wv(nn());break;case"Worker":n=`${Wv(nn())}-${s}`;break;default:n=s}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ra}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=u=>new Promise((f,m)=>{try{const g=e(u);f(g)}catch(g){m(g)}});r.onAbort=n,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(s,e={}){return hs(s,"GET","/v2/passwordPolicy",ar(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=6;class aR{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n,r,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zv(this),this.idTokenSubscription=new Zv(this),this.beforeStateQueue=new iR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ns(n)),this._initializationPromise=this.queue(async()=>{var r,o,u;if(!this._deleted&&(this.persistenceManager=await lo.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((u=this.currentUser)==null?void 0:u.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ph(this,{idToken:e}),r=await Zn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var u;if(In(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(m,m))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(u=this.redirectUser)==null?void 0:u._redirectEventId,m=r==null?void 0:r._redirectEventId,g=await this.tryRedirectSignIn(e);(!f||f===m)&&(g!=null&&g.user)&&(r=g.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(f){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await gh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=j1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(In(this.app))return Promise.reject(is(this));const n=e?ot(e):null;return n&&Ee(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return In(this.app)?Promise.reject(is(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return In(this.app)?Promise.reject(is(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ns(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await sR(this),n=new aR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await eR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ns(e)||this._popupRedirectResolver;Ee(n,this,"argument-error"),this.redirectPersistenceManager=await lo.create(this,[ns(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(m,this,"internal-error"),m.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,r,o);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(In(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&P1(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function aa(s){return ot(s)}class Zv{constructor(e){this.auth=e,this.observer=null,this.addObserver=bS(n=>this.observer=n)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lR(s){Vh=s}function tT(s){return Vh.loadJS(s)}function uR(){return Vh.recaptchaEnterpriseScript}function cR(){return Vh.gapiScript}function hR(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class fR{constructor(){this.enterprise=new dR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class dR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const mR="recaptcha-enterprise",nT="NO_RECAPTCHA";class pR{constructor(e){this.type=mR,this.auth=aa(e)}async verify(e="verify",n=!1){async function r(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,m)=>{Q1(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new G1(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,f(y.siteKey)}}).catch(g=>{m(g)})})}function o(u,f,m){const g=window.grecaptcha;Kv(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{f(y)}).catch(()=>{f(nT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new fR().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{r(this.auth).then(m=>{if(!n&&Kv(window.grecaptcha))o(m,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=uR();g.length!==0&&(g+=m),tT(g).then(()=>{o(m,u,f)}).catch(y=>{f(y)})}}).catch(m=>{f(m)})})}}async function Jv(s,e,n,r=!1,o=!1){const u=new pR(s);let f;if(o)f=nT;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:f}):Object.assign(m,{captchaResponse:f}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Lm(s,e,n,r,o){var u;if((u=s._getRecaptchaConfig())!=null&&u.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const f=await Jv(s,e,n,n==="getOobCode");return r(s,f)}else return r(s,e).catch(async f=>{if(f.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const m=await Jv(s,e,n,n==="getOobCode");return r(s,m)}else return Promise.reject(f)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(s,e){const n=kh(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(rs(u,e??{}))return o;Jn(o,"already-initialized")}return n.initialize({options:e})}function yR(s,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ns);e!=null&&e.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function _R(s,e,n){const r=aa(s);Ee(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,u=iT(e),{host:f,port:m}=vR(e),g=m===null?"":`:${m}`,y={url:`${u}//${f}${g}/`},T=Object.freeze({host:f,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){Ee(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ee(rs(y,r.config.emulator)&&rs(T,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=y,r.emulatorConfig=T,r.settings.appVerificationDisabledForTesting=!0,rr(f)?(lp(`${u}//${f}${g}`),up("Auth",!0)):ER()}function iT(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function vR(s){const e=iT(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const u=o[1];return{host:u,port:e0(r.substr(u.length+1))}}else{const[u,f]=r.split(":");return{host:u,port:e0(f)}}}function e0(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function ER(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ts("not implemented")}_getIdTokenResponse(e){return ts("not implemented")}_linkToIdToken(e,n){return ts("not implemented")}_getReauthenticationResolver(e){return ts("not implemented")}}async function TR(s,e){return hs(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bR(s,e){return mu(s,"POST","/v1/accounts:signInWithPassword",ar(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(s,e){return mu(s,"POST","/v1/accounts:signInWithEmailLink",ar(s,e))}async function AR(s,e){return mu(s,"POST","/v1/accounts:signInWithEmailLink",ar(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends yp{constructor(e,n,r,o=null){super("password",r),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new nu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new nu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lm(e,n,"signInWithPassword",bR);case"emailLink":return wR(e,{email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lm(e,r,"signUpPassword",TR);case"emailLink":return AR(e,{idToken:n,email:this._email,oobCode:this._password});default:Jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(s,e){return mu(s,"POST","/v1/accounts:signInWithIdp",ar(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="http://localhost";class Jr extends yp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Jr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...u}=n;if(!r||!o)return null;const f=new Jr(r,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return uo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,uo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,uo(e,n)}buildRequest(){const e={requestUri:SR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=fu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RR(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IR(s){const e=ql(Hl(s)).link,n=e?ql(Hl(e)).deep_link_id:null,r=ql(Hl(s)).deep_link_id;return(r?ql(Hl(r)).link:null)||r||n||e||s}class _p{constructor(e){const n=ql(Hl(e)),r=n.apiKey??null,o=n.oobCode??null,u=RR(n.mode??null);Ee(r&&o&&u,"argument-error"),this.apiKey=r,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=IR(e);try{return new _p(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){this.providerId=Ao.PROVIDER_ID}static credential(e,n){return nu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=_p.parseLink(n);return Ee(r,"argument-error"),nu._fromEmailAndCode(e,r.code,r.tenantId)}}Ao.PROVIDER_ID="password";Ao.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ao.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu extends sT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends pu{constructor(){super("facebook.com")}static credential(e){return Jr._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch{return null}}}qs.FACEBOOK_SIGN_IN_METHOD="facebook.com";qs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends pu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Jr._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Hs.credential(n,r)}catch{return null}}}Hs.GOOGLE_SIGN_IN_METHOD="google.com";Hs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends pu{constructor(){super("github.com")}static credential(e){return Jr._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fs.credential(e.oauthAccessToken)}catch{return null}}}Fs.GITHUB_SIGN_IN_METHOD="github.com";Fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends pu{constructor(){super("twitter.com")}static credential(e,n){return Jr._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Gs.credential(n,r)}catch{return null}}}Gs.TWITTER_SIGN_IN_METHOD="twitter.com";Gs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR(s,e){return mu(s,"POST","/v1/accounts:signUp",ar(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,o=!1){const u=await Zn._fromIdTokenResponse(e,r,o),f=t0(r);return new ea({user:u,providerId:f,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const o=t0(r);return new ea({user:e,providerId:o,_tokenResponse:r,operationType:n})}}function t0(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh extends xi{constructor(e,n,r,o){super(n.code,n.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,yh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,o){return new yh(e,n,r,o)}}function rT(s,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?yh._fromErrorAndOperation(s,u,e,r):u})}async function CR(s,e,n=!1){const r=await ho(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return ea._forOperation(s,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NR(s,e,n=!1){const{auth:r}=s;if(In(r.app))return Promise.reject(is(r));const o="reauthenticate";try{const u=await ho(s,rT(r,o,e,s),n);Ee(u.idToken,r,"internal-error");const f=pp(u.idToken);Ee(f,r,"internal-error");const{sub:m}=f;return Ee(s.uid===m,r,"user-mismatch"),ea._forOperation(s,o,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Jn(r,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aT(s,e,n=!1){if(In(s.app))return Promise.reject(is(s));const r="signIn",o=await rT(s,r,e),u=await ea._fromIdTokenResponse(s,r,o);return n||await s._updateCurrentUser(u.user),u}async function DR(s,e){return aT(aa(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oT(s){const e=aa(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OR(s,e,n){if(In(s.app))return Promise.reject(is(s));const r=aa(s),f=await Lm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xR).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&oT(s),g}),m=await ea._fromIdTokenResponse(r,"signIn",f);return await r._updateCurrentUser(m.user),m}function MR(s,e,n){return In(s.app)?Promise.reject(is(s)):DR(ot(s),Ao.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&oT(s),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(s,e){return hs(s,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(s,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ot(s),u={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},f=await ho(r,kR(r.auth,u));r.displayName=f.displayName||null,r.photoURL=f.photoUrl||null;const m=r.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=r.displayName,m.photoURL=r.photoURL),await r._updateTokensIfNecessary(f)}function PR(s,e,n,r){return ot(s).onIdTokenChanged(e,n,r)}function UR(s,e,n){return ot(s).beforeAuthStateChanged(e,n)}function LR(s,e,n,r){return ot(s).onAuthStateChanged(e,n,r)}function jR(s){return ot(s).signOut()}const _h="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_h,"1"),this.storage.removeItem(_h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=1e3,zR=10;class uT extends lT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),o=this.localCache[n];r!==o&&e(n,o,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,m,g)=>{this.notifyListeners(f,g)});return}const r=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(r);!n&&this.localCache[r]===f||this.notifyListeners(r,f)},u=this.storage.getItem(r);nR()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,zR):o()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},BR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}uT.type="LOCAL";const qR=uT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT extends lT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cT.type="SESSION";const hT=cT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const r=new Ph(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(f).map(async y=>y(n.origin,u)),g=await HR(m);n.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ph.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(s="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((m,g)=>{const y=vp("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},r);f={messageChannel:o,onMessage(w){const S=w;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(S.data.response);break;default:clearTimeout(T),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(){return window}function GR(s){bi().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(){return typeof bi().WorkerGlobalScope<"u"&&typeof bi().importScripts=="function"}async function QR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function KR(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)==null?void 0:s.controller)||null}function YR(){return fT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT="firebaseLocalStorageDb",$R=1,vh="firebaseLocalStorage",mT="fbase_key";class gu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Uh(s,e){return s.transaction([vh],e?"readwrite":"readonly").objectStore(vh)}function XR(){const s=indexedDB.deleteDatabase(dT);return new gu(s).toPromise()}function jm(){const s=indexedDB.open(dT,$R);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const r=s.result;try{r.createObjectStore(vh,{keyPath:mT})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const r=s.result;r.objectStoreNames.contains(vh)?e(r):(r.close(),await XR(),e(await jm()))})})}async function n0(s,e,n){const r=Uh(s,!0).put({[mT]:e,value:n});return new gu(r).toPromise()}async function WR(s,e){const n=Uh(s,!1).get(e),r=await new gu(n).toPromise();return r===void 0?null:r.value}function i0(s,e){const n=Uh(s,!0).delete(e);return new gu(n).toPromise()}const ZR=800,JR=3;class pT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>JR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ph._getInstance(YR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await QR(),!this.activeServiceWorker)return;this.sender=new FR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||KR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jm();return await n0(e,_h,"1"),await i0(e,_h),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>n0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>WR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>i0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Uh(o,!1).getAll();return new gu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ZR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}pT.type="LOCAL";const eI=pT;new du(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(s,e){return e?ns(e):(Ee(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep extends yp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return uo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return uo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return uo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function nI(s){return aT(s.auth,new Ep(s),s.bypassAuthState)}function iI(s){const{auth:e,user:n}=s;return Ee(n,e,"internal-error"),NR(n,new Ep(s),s.bypassAuthState)}async function sI(s){const{auth:e,user:n}=s;return Ee(n,e,"internal-error"),CR(n,new Ep(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n,r,o,u=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:o,tenantId:u,error:f,type:m}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nI;case"linkViaPopup":case"linkViaRedirect":return sI;case"reauthViaPopup":case"reauthViaRedirect":return iI;default:Jn(this.auth,"internal-error")}}resolve(e){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=new du(2e3,1e4);class ao extends gT{constructor(e,n,r,o,u){super(e,n,o,u),this.provider=r,this.authWindow=null,this.pollId=null,ao.currentPopupAction&&ao.currentPopupAction.cancel(),ao.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){os(this.filter.length===1,"Popup operations only handle one event");const e=vp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ao.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rI.get())};e()}}ao.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="pendingRedirect",sh=new Map;class oI extends gT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=sh.get(this.auth._key());if(!e){try{const r=await lI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}sh.set(this.auth._key(),e)}return this.bypassAuthState||sh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lI(s,e){const n=hI(e),r=cI(s);if(!await r._isAvailable())return!1;const o=await r._get(n)==="true";return await r._remove(n),o}function uI(s,e){sh.set(s._key(),e)}function cI(s){return ns(s._redirectPersistence)}function hI(s){return ih(aI,s.config.apiKey,s.name)}async function fI(s,e,n=!1){if(In(s.app))return Promise.reject(is(s));const r=aa(s),o=tI(r,e),f=await new oI(r,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await r._persistUserIfCurrent(f.user),await r._setRedirectUser(null,e)),f}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=600*1e3;class mI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!yT(e)){const o=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ti(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dI&&this.cachedEventUids.clear(),this.cachedEventUids.has(s0(e))}saveEventToCache(e){this.cachedEventUids.add(s0(e)),this.lastProcessedEventTime=Date.now()}}function s0(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function yT({type:s,error:e}){return s==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pI(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yT(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gI(s,e={}){return hs(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_I=/^https?/;async function vI(s){if(s.config.emulator)return;const{authorizedDomains:e}=await gI(s);for(const n of e)try{if(EI(n))return}catch{}Jn(s,"unauthorized-domain")}function EI(s){const e=Pm(),{protocol:n,hostname:r}=new URL(e);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&r===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===r}if(!_I.test(n))return!1;if(yI.test(s))return r===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=new du(3e4,6e4);function r0(){const s=bi().___jsl;if(s!=null&&s.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function bI(s){return new Promise((e,n)=>{var o,u,f;function r(){r0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{r0(),n(Ti(s,"network-request-failed"))},timeout:TI.get()})}if((u=(o=bi().gapi)==null?void 0:o.iframes)!=null&&u.Iframe)e(gapi.iframes.getContext());else if((f=bi().gapi)!=null&&f.load)r();else{const m=hR("iframefcb");return bi()[m]=()=>{gapi.load?r():n(Ti(s,"network-request-failed"))},tT(`${cR()}?onload=${m}`).catch(g=>n(g))}}).catch(e=>{throw rh=null,e})}let rh=null;function wI(s){return rh=rh||bI(s),rh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=new du(5e3,15e3),SI="__/auth/iframe",RI="emulator/auth/iframe",II={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function CI(s){const e=s.config;Ee(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?mp(e,RI):`https://${s.config.authDomain}/${SI}`,r={apiKey:e.apiKey,appName:s.name,v:ra},o=xI.get(s.config.apiHost);o&&(r.eid=o);const u=s._getFrameworks();return u.length&&(r.fw=u.join(",")),`${n}?${fu(r).slice(1)}`}async function NI(s){const e=await wI(s),n=bi().gapi;return Ee(n,s,"internal-error"),e.open({where:document.body,url:CI(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:II,dontclear:!0},r=>new Promise(async(o,u)=>{await r.restyle({setHideOnLeave:!1});const f=Ti(s,"network-request-failed"),m=bi().setTimeout(()=>{u(f)},AI.get());function g(){bi().clearTimeout(m),o(r)}r.ping(g).then(g,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OI=500,MI=600,kI="_blank",VI="http://localhost";class a0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PI(s,e,n,r=OI,o=MI){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const g={...DI,width:r.toString(),height:o.toString(),top:u,left:f},y=nn().toLowerCase();n&&(m=YE(y)?kI:n),QE(y)&&(e=e||VI,g.scrollbars="yes");const T=Object.entries(g).reduce((S,[P,L])=>`${S}${P}=${L},`,"");if(tR(y)&&m!=="_self")return UI(e||"",m),new a0(null);const w=window.open(e||"",m,T);Ee(w,s,"popup-blocked");try{w.focus()}catch{}return new a0(w)}function UI(s,e){const n=document.createElement("a");n.href=s,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="__/auth/handler",jI="emulator/auth/handler",BI=encodeURIComponent("fac");async function o0(s,e,n,r,o,u){Ee(s.config.authDomain,s,"auth-domain-config-required"),Ee(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:r,v:ra,eventId:o};if(e instanceof sT){e.setDefaultLanguage(s.languageCode),f.providerId=e.providerId||"",TS(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,w]of Object.entries({}))f[T]=w}if(e instanceof pu){const T=e.getScopes().filter(w=>w!=="");T.length>0&&(f.scopes=T.join(","))}s.tenantId&&(f.tid=s.tenantId);const m=f;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const g=await s._getAppCheckToken(),y=g?`#${BI}=${encodeURIComponent(g)}`:"";return`${zI(s)}?${fu(m).slice(1)}${y}`}function zI({config:s}){return s.emulator?mp(s,jI):`https://${s.authDomain}/${LI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="webStorageSupport";class qI{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hT,this._completeRedirectFn=fI,this._overrideRedirectResult=uI}async _openPopup(e,n,r,o){var f;os((f=this.eventManagers[e._key()])==null?void 0:f.manager,"_initialize() not called before _openPopup()");const u=await o0(e,n,r,Pm(),o);return PI(e,u,vp())}async _openRedirect(e,n,r,o){await this._originValidation(e);const u=await o0(e,n,r,Pm(),o);return GR(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(os(u,"If manager is not set, promise should be"),u)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await NI(e),r=new mI(e);return n.register("authEvent",o=>(Ee(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(bm,{type:bm},o=>{var f;const u=(f=o==null?void 0:o[0])==null?void 0:f[bm];u!==void 0&&n(!!u),Jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=vI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return JE()||KE()||gp()}}const HI=qI;var l0="@firebase/auth",u0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QI(s){Zr(new Zs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:m}=r.options;Ee(f&&!f.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:f,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eT(s)},y=new oR(r,o,u,g);return yR(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Zr(new Zs("auth-internal",e=>{const n=aa(e.getProvider("auth").getImmediate());return(r=>new FI(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ei(l0,u0,GI(s)),Ei(l0,u0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=300,YI=DE("authIdTokenMaxAge")||KI;let c0=null;const $I=s=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>YI)return;const o=n==null?void 0:n.token;c0!==o&&(c0=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function XI(s=fp()){const e=kh(s,"auth");if(e.isInitialized())return e.getImmediate();const n=gR(s,{popupRedirectResolver:HI,persistence:[eI,qR,hT]}),r=DE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(r,location.origin);if(location.origin===u.origin){const f=$I(u.toString());UR(n,f,()=>f(n.currentUser)),PR(n,m=>f(m))}}const o=xE("auth");return o&&_R(n,`http://${o}`),n}function WI(){var s;return((s=document.getElementsByTagName("head"))==null?void 0:s[0])??document}lR({loadJS(s){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",s),r.onload=e,r.onerror=o=>{const u=Ti("internal-error");u.customData=o,n(u)},r.type="text/javascript",r.charset="UTF-8",WI().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QI("Browser");var h0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xs,_T;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,R){function I(){}I.prototype=R.prototype,C.D=R.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(O,D,k){for(var x=Array(arguments.length-2),He=2;He<arguments.length;He++)x[He-2]=arguments[He];return R.prototype[D].apply(O,x)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(C,R,I){I||(I=0);var O=Array(16);if(typeof R=="string")for(var D=0;16>D;++D)O[D]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(D=0;16>D;++D)O[D]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=C.g[0],I=C.g[1],D=C.g[2];var k=C.g[3],x=R+(k^I&(D^k))+O[0]+3614090360&4294967295;R=I+(x<<7&4294967295|x>>>25),x=k+(D^R&(I^D))+O[1]+3905402710&4294967295,k=R+(x<<12&4294967295|x>>>20),x=D+(I^k&(R^I))+O[2]+606105819&4294967295,D=k+(x<<17&4294967295|x>>>15),x=I+(R^D&(k^R))+O[3]+3250441966&4294967295,I=D+(x<<22&4294967295|x>>>10),x=R+(k^I&(D^k))+O[4]+4118548399&4294967295,R=I+(x<<7&4294967295|x>>>25),x=k+(D^R&(I^D))+O[5]+1200080426&4294967295,k=R+(x<<12&4294967295|x>>>20),x=D+(I^k&(R^I))+O[6]+2821735955&4294967295,D=k+(x<<17&4294967295|x>>>15),x=I+(R^D&(k^R))+O[7]+4249261313&4294967295,I=D+(x<<22&4294967295|x>>>10),x=R+(k^I&(D^k))+O[8]+1770035416&4294967295,R=I+(x<<7&4294967295|x>>>25),x=k+(D^R&(I^D))+O[9]+2336552879&4294967295,k=R+(x<<12&4294967295|x>>>20),x=D+(I^k&(R^I))+O[10]+4294925233&4294967295,D=k+(x<<17&4294967295|x>>>15),x=I+(R^D&(k^R))+O[11]+2304563134&4294967295,I=D+(x<<22&4294967295|x>>>10),x=R+(k^I&(D^k))+O[12]+1804603682&4294967295,R=I+(x<<7&4294967295|x>>>25),x=k+(D^R&(I^D))+O[13]+4254626195&4294967295,k=R+(x<<12&4294967295|x>>>20),x=D+(I^k&(R^I))+O[14]+2792965006&4294967295,D=k+(x<<17&4294967295|x>>>15),x=I+(R^D&(k^R))+O[15]+1236535329&4294967295,I=D+(x<<22&4294967295|x>>>10),x=R+(D^k&(I^D))+O[1]+4129170786&4294967295,R=I+(x<<5&4294967295|x>>>27),x=k+(I^D&(R^I))+O[6]+3225465664&4294967295,k=R+(x<<9&4294967295|x>>>23),x=D+(R^I&(k^R))+O[11]+643717713&4294967295,D=k+(x<<14&4294967295|x>>>18),x=I+(k^R&(D^k))+O[0]+3921069994&4294967295,I=D+(x<<20&4294967295|x>>>12),x=R+(D^k&(I^D))+O[5]+3593408605&4294967295,R=I+(x<<5&4294967295|x>>>27),x=k+(I^D&(R^I))+O[10]+38016083&4294967295,k=R+(x<<9&4294967295|x>>>23),x=D+(R^I&(k^R))+O[15]+3634488961&4294967295,D=k+(x<<14&4294967295|x>>>18),x=I+(k^R&(D^k))+O[4]+3889429448&4294967295,I=D+(x<<20&4294967295|x>>>12),x=R+(D^k&(I^D))+O[9]+568446438&4294967295,R=I+(x<<5&4294967295|x>>>27),x=k+(I^D&(R^I))+O[14]+3275163606&4294967295,k=R+(x<<9&4294967295|x>>>23),x=D+(R^I&(k^R))+O[3]+4107603335&4294967295,D=k+(x<<14&4294967295|x>>>18),x=I+(k^R&(D^k))+O[8]+1163531501&4294967295,I=D+(x<<20&4294967295|x>>>12),x=R+(D^k&(I^D))+O[13]+2850285829&4294967295,R=I+(x<<5&4294967295|x>>>27),x=k+(I^D&(R^I))+O[2]+4243563512&4294967295,k=R+(x<<9&4294967295|x>>>23),x=D+(R^I&(k^R))+O[7]+1735328473&4294967295,D=k+(x<<14&4294967295|x>>>18),x=I+(k^R&(D^k))+O[12]+2368359562&4294967295,I=D+(x<<20&4294967295|x>>>12),x=R+(I^D^k)+O[5]+4294588738&4294967295,R=I+(x<<4&4294967295|x>>>28),x=k+(R^I^D)+O[8]+2272392833&4294967295,k=R+(x<<11&4294967295|x>>>21),x=D+(k^R^I)+O[11]+1839030562&4294967295,D=k+(x<<16&4294967295|x>>>16),x=I+(D^k^R)+O[14]+4259657740&4294967295,I=D+(x<<23&4294967295|x>>>9),x=R+(I^D^k)+O[1]+2763975236&4294967295,R=I+(x<<4&4294967295|x>>>28),x=k+(R^I^D)+O[4]+1272893353&4294967295,k=R+(x<<11&4294967295|x>>>21),x=D+(k^R^I)+O[7]+4139469664&4294967295,D=k+(x<<16&4294967295|x>>>16),x=I+(D^k^R)+O[10]+3200236656&4294967295,I=D+(x<<23&4294967295|x>>>9),x=R+(I^D^k)+O[13]+681279174&4294967295,R=I+(x<<4&4294967295|x>>>28),x=k+(R^I^D)+O[0]+3936430074&4294967295,k=R+(x<<11&4294967295|x>>>21),x=D+(k^R^I)+O[3]+3572445317&4294967295,D=k+(x<<16&4294967295|x>>>16),x=I+(D^k^R)+O[6]+76029189&4294967295,I=D+(x<<23&4294967295|x>>>9),x=R+(I^D^k)+O[9]+3654602809&4294967295,R=I+(x<<4&4294967295|x>>>28),x=k+(R^I^D)+O[12]+3873151461&4294967295,k=R+(x<<11&4294967295|x>>>21),x=D+(k^R^I)+O[15]+530742520&4294967295,D=k+(x<<16&4294967295|x>>>16),x=I+(D^k^R)+O[2]+3299628645&4294967295,I=D+(x<<23&4294967295|x>>>9),x=R+(D^(I|~k))+O[0]+4096336452&4294967295,R=I+(x<<6&4294967295|x>>>26),x=k+(I^(R|~D))+O[7]+1126891415&4294967295,k=R+(x<<10&4294967295|x>>>22),x=D+(R^(k|~I))+O[14]+2878612391&4294967295,D=k+(x<<15&4294967295|x>>>17),x=I+(k^(D|~R))+O[5]+4237533241&4294967295,I=D+(x<<21&4294967295|x>>>11),x=R+(D^(I|~k))+O[12]+1700485571&4294967295,R=I+(x<<6&4294967295|x>>>26),x=k+(I^(R|~D))+O[3]+2399980690&4294967295,k=R+(x<<10&4294967295|x>>>22),x=D+(R^(k|~I))+O[10]+4293915773&4294967295,D=k+(x<<15&4294967295|x>>>17),x=I+(k^(D|~R))+O[1]+2240044497&4294967295,I=D+(x<<21&4294967295|x>>>11),x=R+(D^(I|~k))+O[8]+1873313359&4294967295,R=I+(x<<6&4294967295|x>>>26),x=k+(I^(R|~D))+O[15]+4264355552&4294967295,k=R+(x<<10&4294967295|x>>>22),x=D+(R^(k|~I))+O[6]+2734768916&4294967295,D=k+(x<<15&4294967295|x>>>17),x=I+(k^(D|~R))+O[13]+1309151649&4294967295,I=D+(x<<21&4294967295|x>>>11),x=R+(D^(I|~k))+O[4]+4149444226&4294967295,R=I+(x<<6&4294967295|x>>>26),x=k+(I^(R|~D))+O[11]+3174756917&4294967295,k=R+(x<<10&4294967295|x>>>22),x=D+(R^(k|~I))+O[2]+718787259&4294967295,D=k+(x<<15&4294967295|x>>>17),x=I+(k^(D|~R))+O[9]+3951481745&4294967295,C.g[0]=C.g[0]+R&4294967295,C.g[1]=C.g[1]+(D+(x<<21&4294967295|x>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+k&4294967295}r.prototype.u=function(C,R){R===void 0&&(R=C.length);for(var I=R-this.blockSize,O=this.B,D=this.h,k=0;k<R;){if(D==0)for(;k<=I;)o(this,C,k),k+=this.blockSize;if(typeof C=="string"){for(;k<R;)if(O[D++]=C.charCodeAt(k++),D==this.blockSize){o(this,O),D=0;break}}else for(;k<R;)if(O[D++]=C[k++],D==this.blockSize){o(this,O),D=0;break}}this.h=D,this.o+=R},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var R=1;R<C.length-8;++R)C[R]=0;var I=8*this.o;for(R=C.length-8;R<C.length;++R)C[R]=I&255,I/=256;for(this.u(C),C=Array(16),R=I=0;4>R;++R)for(var O=0;32>O;O+=8)C[I++]=this.g[R]>>>O&255;return C};function u(C,R){var I=m;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=R(C)}function f(C,R){this.h=R;for(var I=[],O=!0,D=C.length-1;0<=D;D--){var k=C[D]|0;O&&k==R||(I[D]=k,O=!1)}this.g=I}var m={};function g(C){return-128<=C&&128>C?u(C,function(R){return new f([R|0],0>R?-1:0)}):new f([C|0],0>C?-1:0)}function y(C){if(isNaN(C)||!isFinite(C))return w;if(0>C)return F(y(-C));for(var R=[],I=1,O=0;C>=I;O++)R[O]=C/I|0,I*=4294967296;return new f(R,0)}function T(C,R){if(C.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(C.charAt(0)=="-")return F(T(C.substring(1),R));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=y(Math.pow(R,8)),O=w,D=0;D<C.length;D+=8){var k=Math.min(8,C.length-D),x=parseInt(C.substring(D,D+k),R);8>k?(k=y(Math.pow(R,k)),O=O.j(k).add(y(x))):(O=O.j(I),O=O.add(y(x)))}return O}var w=g(0),S=g(1),P=g(16777216);s=f.prototype,s.m=function(){if(K(this))return-F(this).m();for(var C=0,R=1,I=0;I<this.g.length;I++){var O=this.i(I);C+=(0<=O?O:4294967296+O)*R,R*=4294967296}return C},s.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(L(this))return"0";if(K(this))return"-"+F(this).toString(C);for(var R=y(Math.pow(C,6)),I=this,O="";;){var D=se(I,R).g;I=te(I,D.j(R));var k=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=D,L(I))return k+O;for(;6>k.length;)k="0"+k;O=k+O}},s.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function L(C){if(C.h!=0)return!1;for(var R=0;R<C.g.length;R++)if(C.g[R]!=0)return!1;return!0}function K(C){return C.h==-1}s.l=function(C){return C=te(this,C),K(C)?-1:L(C)?0:1};function F(C){for(var R=C.g.length,I=[],O=0;O<R;O++)I[O]=~C.g[O];return new f(I,~C.h).add(S)}s.abs=function(){return K(this)?F(this):this},s.add=function(C){for(var R=Math.max(this.g.length,C.g.length),I=[],O=0,D=0;D<=R;D++){var k=O+(this.i(D)&65535)+(C.i(D)&65535),x=(k>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);O=x>>>16,k&=65535,x&=65535,I[D]=x<<16|k}return new f(I,I[I.length-1]&-2147483648?-1:0)};function te(C,R){return C.add(F(R))}s.j=function(C){if(L(this)||L(C))return w;if(K(this))return K(C)?F(this).j(F(C)):F(F(this).j(C));if(K(C))return F(this.j(F(C)));if(0>this.l(P)&&0>C.l(P))return y(this.m()*C.m());for(var R=this.g.length+C.g.length,I=[],O=0;O<2*R;O++)I[O]=0;for(O=0;O<this.g.length;O++)for(var D=0;D<C.g.length;D++){var k=this.i(O)>>>16,x=this.i(O)&65535,He=C.i(D)>>>16,Ve=C.i(D)&65535;I[2*O+2*D]+=x*Ve,ie(I,2*O+2*D),I[2*O+2*D+1]+=k*Ve,ie(I,2*O+2*D+1),I[2*O+2*D+1]+=x*He,ie(I,2*O+2*D+1),I[2*O+2*D+2]+=k*He,ie(I,2*O+2*D+2)}for(O=0;O<R;O++)I[O]=I[2*O+1]<<16|I[2*O];for(O=R;O<2*R;O++)I[O]=0;return new f(I,0)};function ie(C,R){for(;(C[R]&65535)!=C[R];)C[R+1]+=C[R]>>>16,C[R]&=65535,R++}function re(C,R){this.g=C,this.h=R}function se(C,R){if(L(R))throw Error("division by zero");if(L(C))return new re(w,w);if(K(C))return R=se(F(C),R),new re(F(R.g),F(R.h));if(K(R))return R=se(C,F(R)),new re(F(R.g),R.h);if(30<C.g.length){if(K(C)||K(R))throw Error("slowDivide_ only works with positive integers.");for(var I=S,O=R;0>=O.l(C);)I=W(I),O=W(O);var D=fe(I,1),k=fe(O,1);for(O=fe(O,2),I=fe(I,2);!L(O);){var x=k.add(O);0>=x.l(C)&&(D=D.add(I),k=x),O=fe(O,1),I=fe(I,1)}return R=te(C,D.j(R)),new re(D,R)}for(D=w;0<=C.l(R);){for(I=Math.max(1,Math.floor(C.m()/R.m())),O=Math.ceil(Math.log(I)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),k=y(I),x=k.j(R);K(x)||0<x.l(C);)I-=O,k=y(I),x=k.j(R);L(k)&&(k=S),D=D.add(k),C=te(C,x)}return new re(D,C)}s.A=function(C){return se(this,C).h},s.and=function(C){for(var R=Math.max(this.g.length,C.g.length),I=[],O=0;O<R;O++)I[O]=this.i(O)&C.i(O);return new f(I,this.h&C.h)},s.or=function(C){for(var R=Math.max(this.g.length,C.g.length),I=[],O=0;O<R;O++)I[O]=this.i(O)|C.i(O);return new f(I,this.h|C.h)},s.xor=function(C){for(var R=Math.max(this.g.length,C.g.length),I=[],O=0;O<R;O++)I[O]=this.i(O)^C.i(O);return new f(I,this.h^C.h)};function W(C){for(var R=C.g.length+1,I=[],O=0;O<R;O++)I[O]=C.i(O)<<1|C.i(O-1)>>>31;return new f(I,C.h)}function fe(C,R){var I=R>>5;R%=32;for(var O=C.g.length-I,D=[],k=0;k<O;k++)D[k]=0<R?C.i(k+I)>>>R|C.i(k+I+1)<<32-R:C.i(k+I);return new f(D,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,_T=r,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=T,Xs=f}).apply(typeof h0<"u"?h0:typeof self<"u"?self:typeof window<"u"?window:{});var $c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vT,Fl,ET,ah,Bm,TT,bT,wT;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,_){return c==Array.prototype||c==Object.prototype||(c[p]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof $c=="object"&&$c];for(var p=0;p<c.length;++p){var _=c[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function o(c,p){if(p)e:{var _=r;c=c.split(".");for(var A=0;A<c.length-1;A++){var j=c[A];if(!(j in _))break e;_=_[j]}c=c[c.length-1],A=_[c],p=p(A),p!=A&&p!=null&&e(_,c,{configurable:!0,writable:!0,value:p})}}function u(c,p){c instanceof String&&(c+="");var _=0,A=!1,j={next:function(){if(!A&&_<c.length){var G=_++;return{value:p(G,c[G]),done:!1}}return A=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(c){return c||function(){return u(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},m=this||self;function g(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function y(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function T(c,p,_){return c.call.apply(c.bind,arguments)}function w(c,p,_){if(!c)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,A),c.apply(p,j)}}return function(){return c.apply(p,arguments)}}function S(c,p,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:w,S.apply(null,arguments)}function P(c,p){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function L(c,p){function _(){}_.prototype=p.prototype,c.aa=p.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(A,j,G){for(var oe=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)oe[Pe-2]=arguments[Pe];return p.prototype[j].apply(A,oe)}}function K(c){const p=c.length;if(0<p){const _=Array(p);for(let A=0;A<p;A++)_[A]=c[A];return _}return[]}function F(c,p){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(g(A)){const j=c.length||0,G=A.length||0;c.length=j+G;for(let oe=0;oe<G;oe++)c[j+oe]=A[oe]}else c.push(A)}}class te{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function ie(c){return/^[\s\xa0]*$/.test(c)}function re(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function se(c){return se[" "](c),c}se[" "]=function(){};var W=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function fe(c,p,_){for(const A in c)p.call(_,c[A],A,c)}function C(c,p){for(const _ in c)p.call(void 0,c[_],_,c)}function R(c){const p={};for(const _ in c)p[_]=c[_];return p}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(c,p){let _,A;for(let j=1;j<arguments.length;j++){A=arguments[j];for(_ in A)c[_]=A[_];for(let G=0;G<I.length;G++)_=I[G],Object.prototype.hasOwnProperty.call(A,_)&&(c[_]=A[_])}}function D(c){var p=1;c=c.split(":");const _=[];for(;0<p&&c.length;)_.push(c.shift()),p--;return c.length&&_.push(c.join(":")),_}function k(c){m.setTimeout(()=>{throw c},0)}function x(){var c=ze;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class He{constructor(){this.h=this.g=null}add(p,_){const A=Ve.get();A.set(p,_),this.h?this.h.next=A:this.g=A,this.h=A}}var Ve=new te(()=>new Q,c=>c.reset());class Q{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let le,pe=!1,ze=new He,M=()=>{const c=m.Promise.resolve(void 0);le=()=>{c.then(ee)}};var ee=()=>{for(var c;c=x();){try{c.h.call(c.g)}catch(_){k(_)}var p=Ve;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}pe=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};m.addEventListener("test",_,p),m.removeEventListener("test",_,p)}catch{}return c}();function xe(c,p){if(ae.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(W){e:{try{se(p.nodeName);var j=!0;break e}catch{}j=!1}j||(p=null)}}else _=="mouseover"?p=c.fromElement:_=="mouseout"&&(p=c.toElement);this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:we[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&xe.aa.h.call(this)}}L(xe,ae);var we={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Mt="closure_listenable_"+(1e6*Math.random()|0),tt=0;function ti(c,p,_,A,j){this.listener=c,this.proxy=null,this.src=p,this.type=_,this.capture=!!A,this.ha=j,this.key=++tt,this.da=this.fa=!1}function fs(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ci(c){this.src=c,this.g={},this.h=0}Ci.prototype.add=function(c,p,_,A,j){var G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);var oe=hr(c,p,A,j);return-1<oe?(p=c[oe],_||(p.fa=!1)):(p=new ti(p,this.src,G,!!A,j),p.fa=_,c.push(p)),p};function cr(c,p){var _=p.type;if(_ in c.g){var A=c.g[_],j=Array.prototype.indexOf.call(A,p,void 0),G;(G=0<=j)&&Array.prototype.splice.call(A,j,1),G&&(fs(p),c.g[_].length==0&&(delete c.g[_],c.h--))}}function hr(c,p,_,A){for(var j=0;j<c.length;++j){var G=c[j];if(!G.da&&G.listener==p&&G.capture==!!_&&G.ha==A)return j}return-1}var fr="closure_lm_"+(1e6*Math.random()|0),Do={};function Au(c,p,_,A,j){if(Array.isArray(p)){for(var G=0;G<p.length;G++)Au(c,p[G],_,A,j);return null}return _=Su(_),c&&c[Mt]?c.K(p,_,y(A)?!!A.capture:!1,j):Nn(c,p,_,!1,A,j)}function Nn(c,p,_,A,j,G){if(!p)throw Error("Invalid event type");var oe=y(j)?!!j.capture:!!j,Pe=ha(c);if(Pe||(c[fr]=Pe=new Ci(c)),_=Pe.add(p,_,A,oe,G),_.proxy)return _;if(A=cf(),_.proxy=A,A.src=c,A.listener=_,c.addEventListener)ye||(j=oe),j===void 0&&(j=!1),c.addEventListener(p.toString(),A,j);else if(c.attachEvent)c.attachEvent(dr(p.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function cf(){function c(_){return p.call(c.src,c.listener,_)}const p=hf;return c}function Oo(c,p,_,A,j){if(Array.isArray(p))for(var G=0;G<p.length;G++)Oo(c,p[G],_,A,j);else A=y(A)?!!A.capture:!!A,_=Su(_),c&&c[Mt]?(c=c.i,p=String(p).toString(),p in c.g&&(G=c.g[p],_=hr(G,_,A,j),-1<_&&(fs(G[_]),Array.prototype.splice.call(G,_,1),G.length==0&&(delete c.g[p],c.h--)))):c&&(c=ha(c))&&(p=c.g[p.toString()],c=-1,p&&(c=hr(p,_,A,j)),(_=-1<c?p[c]:null)&&ca(_))}function ca(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Mt])cr(p.i,c);else{var _=c.type,A=c.proxy;p.removeEventListener?p.removeEventListener(_,A,c.capture):p.detachEvent?p.detachEvent(dr(_),A):p.addListener&&p.removeListener&&p.removeListener(A),(_=ha(p))?(cr(_,c),_.h==0&&(_.src=null,p[fr]=null)):fs(c)}}}function dr(c){return c in Do?Do[c]:Do[c]="on"+c}function hf(c,p){if(c.da)c=!0;else{p=new xe(p,this);var _=c.listener,A=c.ha||c.src;c.fa&&ca(c),c=_.call(A,p)}return c}function ha(c){return c=c[fr],c instanceof Ci?c:null}var Mo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Su(c){return typeof c=="function"?c:(c[Mo]||(c[Mo]=function(p){return c.handleEvent(p)}),c[Mo])}function ct(){ue.call(this),this.i=new Ci(this),this.M=this,this.F=null}L(ct,ue),ct.prototype[Mt]=!0,ct.prototype.removeEventListener=function(c,p,_,A){Oo(this,c,p,_,A)};function Qe(c,p){var _,A=c.F;if(A)for(_=[];A;A=A.F)_.push(A);if(c=c.M,A=p.type||p,typeof p=="string")p=new ae(p,c);else if(p instanceof ae)p.target=p.target||c;else{var j=p;p=new ae(A,c),O(p,j)}if(j=!0,_)for(var G=_.length-1;0<=G;G--){var oe=p.g=_[G];j=_n(oe,A,!0,p)&&j}if(oe=p.g=c,j=_n(oe,A,!0,p)&&j,j=_n(oe,A,!1,p)&&j,_)for(G=0;G<_.length;G++)oe=p.g=_[G],j=_n(oe,A,!1,p)&&j}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var _=c.g[p],A=0;A<_.length;A++)fs(_[A]);delete c.g[p],c.h--}}this.F=null},ct.prototype.K=function(c,p,_,A){return this.i.add(String(c),p,!1,_,A)},ct.prototype.L=function(c,p,_,A){return this.i.add(String(c),p,!0,_,A)};function _n(c,p,_,A){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var j=!0,G=0;G<p.length;++G){var oe=p[G];if(oe&&!oe.da&&oe.capture==_){var Pe=oe.listener,xt=oe.ha||oe.src;oe.fa&&cr(c.i,oe),j=Pe.call(xt,A)!==!1&&j}}return j&&!A.defaultPrevented}function $t(c,p,_){if(typeof c=="function")_&&(c=S(c,_));else if(c&&typeof c.handleEvent=="function")c=S(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:m.setTimeout(c,p||0)}function Ru(c){c.g=$t(()=>{c.g=null,c.i&&(c.i=!1,Ru(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class ff extends ue{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Ru(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mr(c){ue.call(this),this.h=c,this.g={}}L(mr,ue);var pr=[];function gr(c){fe(c.g,function(p,_){this.g.hasOwnProperty(_)&&ca(p)},c),c.g={}}mr.prototype.N=function(){mr.aa.N.call(this),gr(this)},mr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qn=m.JSON.stringify,fa=m.JSON.parse,yr=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function ko(){}ko.prototype.h=null;function Vo(c){return c.h||(c.h=c.i())}function Po(){}var Ni={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Di(){ae.call(this,"d")}L(Di,ae);function Uo(){ae.call(this,"c")}L(Uo,ae);var ni={},Lo=null;function ds(){return Lo=Lo||new ct}ni.La="serverreachability";function da(c){ae.call(this,ni.La,c)}L(da,ae);function ms(c){const p=ds();Qe(p,new da(p))}ni.STAT_EVENT="statevent";function Iu(c,p){ae.call(this,ni.STAT_EVENT,c),this.stat=p}L(Iu,ae);function rt(c){const p=ds();Qe(p,new Iu(p,c))}ni.Ma="timingevent";function It(c,p){ae.call(this,ni.Ma,c),this.size=p}L(It,ae);function Et(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},p)}function Dn(){this.g=!0}Dn.prototype.xa=function(){this.g=!1};function jo(c,p,_,A,j,G){c.info(function(){if(c.g)if(G)for(var oe="",Pe=G.split("&"),xt=0;xt<Pe.length;xt++){var Ue=Pe[xt].split("=");if(1<Ue.length){var Vt=Ue[0];Ue=Ue[1];var Ct=Vt.split("_");oe=2<=Ct.length&&Ct[1]=="type"?oe+(Vt+"="+Ue+"&"):oe+(Vt+"=redacted&")}}else oe=null;else oe=G;return"XMLHTTP REQ ("+A+") [attempt "+j+"]: "+p+`
`+_+`
`+oe})}function df(c,p,_,A,j,G,oe){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+j+"]: "+p+`
`+_+`
`+G+" "+oe})}function ps(c,p,_,A){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+_r(c,_)+(A?" "+A:"")})}function xu(c,p){c.info(function(){return"TIMEOUT: "+p})}Dn.prototype.info=function(){};function _r(c,p){if(!c.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var A=_[c];if(!(2>A.length)){var j=A[1];if(Array.isArray(j)&&!(1>j.length)){var G=j[0];if(G!="noop"&&G!="stop"&&G!="close")for(var oe=1;oe<j.length;oe++)j[oe]=""}}}}return Qn(_)}catch{return p}}var gs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ii;function si(){}L(si,ko),si.prototype.g=function(){return new XMLHttpRequest},si.prototype.i=function(){return{}},ii=new si;function rn(c,p,_,A){this.j=c,this.i=p,this.l=_,this.R=A||1,this.U=new mr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gt}function gt(){this.i=null,this.g="",this.h=!1}var Bo={},ma={};function Kn(c,p,_){c.L=1,c.v=wr(vn(p)),c.m=_,c.P=!0,Mi(c,null)}function Mi(c,p){c.F=Date.now(),vr(c),c.A=vn(c.v);var _=c.A,A=c.R;Array.isArray(A)||(A=[String(A)]),Qo(_.i,"t",A),c.C=0,_=c.j.J,c.h=new gt,c.g=Fu(c.j,_?p:null,!c.m),0<c.O&&(c.M=new ff(S(c.Y,c,c.g),c.O)),p=c.U,_=c.g,A=c.ca;var j="readystatechange";Array.isArray(j)||(j&&(pr[0]=j.toString()),j=pr);for(var G=0;G<j.length;G++){var oe=Au(_,j[G],A||p.handleEvent,!1,p.h||p);if(!oe)break;p.g[oe.key]=oe}p=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),ms(),jo(c.i,c.u,c.A,c.l,c.R,c.m)}rn.prototype.ca=function(c){c=c.target;const p=this.M;p&&Vn(c)==3?p.j():this.Y(c)},rn.prototype.Y=function(c){try{if(c==this.g)e:{const Ct=Vn(this.g);var p=this.g.Ba();const zi=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||Pu(this.g)))){this.J||Ct!=4||p==7||(p==8||0>=zi?ms(3):ms(2)),ys(this);var _=this.g.Z();this.X=_;t:if(Cu(this)){var A=Pu(this.g);c="";var j=A.length,G=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zt(this),ri(this);var oe="";break t}this.h.i=new m.TextDecoder}for(p=0;p<j;p++)this.h.h=!0,c+=this.h.i.decode(A[p],{stream:!(G&&p==j-1)});A.length=0,this.h.g+=c,this.C=0,oe=this.h.g}else oe=this.g.oa();if(this.o=_==200,df(this.i,this.u,this.A,this.l,this.R,Ct,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,xt=this.g;if((Pe=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(Pe)){var Ue=Pe;break t}}Ue=null}if(_=Ue)ps(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Er(this,_);else{this.o=!1,this.s=3,rt(12),zt(this),ri(this);break e}}if(this.P){_=!0;let qt;for(;!this.J&&this.C<oe.length;)if(qt=Nu(this,oe),qt==ma){Ct==4&&(this.s=4,rt(14),_=!1),ps(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==Bo){this.s=4,rt(15),ps(this.i,this.l,oe,"[Invalid Chunk]"),_=!1;break}else ps(this.i,this.l,qt,null),Er(this,qt);if(Cu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||oe.length!=0||this.h.h||(this.s=1,rt(16),_=!1),this.o=this.o&&_,!_)ps(this.i,this.l,oe,"[Invalid Chunked Response]"),zt(this),ri(this);else if(0<oe.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+oe.length),Dr(Vt),Vt.M=!0,rt(11))}}else ps(this.i,this.l,oe,null),Er(this,oe);Ct==4&&zt(this),this.o&&!this.J&&(Ct==4?zu(this.j,this):(this.o=!1,vr(this)))}else _f(this.g),_==400&&0<oe.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),zt(this),ri(this)}}}catch{}finally{}};function Cu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Nu(c,p){var _=c.C,A=p.indexOf(`
`,_);return A==-1?ma:(_=Number(p.substring(_,A)),isNaN(_)?Bo:(A+=1,A+_>p.length?ma:(p=p.slice(A,A+_),c.C=A+_,p)))}rn.prototype.cancel=function(){this.J=!0,zt(this)};function vr(c){c.S=Date.now()+c.I,Du(c,c.I)}function Du(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Et(S(c.ba,c),p)}function ys(c){c.B&&(m.clearTimeout(c.B),c.B=null)}rn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(xu(this.i,this.A),this.L!=2&&(ms(),rt(17)),zt(this),this.s=2,ri(this)):Du(this,this.S-c)};function ri(c){c.j.G==0||c.J||zu(c.j,c)}function zt(c){ys(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,gr(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function Er(c,p){try{var _=c.j;if(_.G!=0&&(_.g==c||zo(_.h,c))){if(!c.K&&zo(_.h,c)&&_.G==3){try{var A=_.Da.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var j=A;if(j[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Ra(_),Aa(_);else break e;Wo(_),rt(18)}}else _.za=j[1],0<_.za-_.T&&37500>j[2]&&_.F&&_.v==0&&!_.C&&(_.C=Et(S(_.Za,_),6e3));if(1>=ga(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Bi(_,11)}else if((c.K||_.g==c)&&Ra(_),!ie(p))for(j=_.Da.g.parse(p),p=0;p<j.length;p++){let Ue=j[p];if(_.T=Ue[0],Ue=Ue[1],_.G==2)if(Ue[0]=="c"){_.K=Ue[1],_.ia=Ue[2];const Vt=Ue[3];Vt!=null&&(_.la=Vt,_.j.info("VER="+_.la));const Ct=Ue[4];Ct!=null&&(_.Aa=Ct,_.j.info("SVER="+_.Aa));const zi=Ue[5];zi!=null&&typeof zi=="number"&&0<zi&&(A=1.5*zi,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const qt=c.g;if(qt){const fi=qt.g?qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fi){var G=A.h;G.g||fi.indexOf("spdy")==-1&&fi.indexOf("quic")==-1&&fi.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(ya(G,G.h),G.h=null))}if(A.D){const Jo=qt.g?qt.g.getResponseHeader("X-HTTP-Session-Id"):null;Jo&&(A.ya=Jo,$e(A.I,A.D,Jo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var oe=c;if(A.qa=Hu(A,A.J?A.ia:null,A.W),oe.K){an(A.h,oe);var Pe=oe,xt=A.L;xt&&(Pe.I=xt),Pe.B&&(ys(Pe),vr(Pe)),A.g=oe}else ju(A);0<_.i.length&&Sa(_)}else Ue[0]!="stop"&&Ue[0]!="close"||Bi(_,7);else _.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?Bi(_,7):$o(_):Ue[0]!="noop"&&_.l&&_.l.ta(Ue),_.v=0)}}ms(4)}catch{}}var Ou=class{constructor(c,p){this.g=c,this.map=p}};function ki(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pa(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ga(c){return c.h?1:c.g?c.g.size:0}function zo(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function ya(c,p){c.g?c.g.add(p):c.h=p}function an(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}ki.prototype.cancel=function(){if(this.i=qo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function qo(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const _ of c.g.values())p=p.concat(_.D);return p}return K(c.i)}function mf(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(g(c)){for(var p=[],_=c.length,A=0;A<_;A++)p.push(c[A]);return p}p=[],_=0;for(A in c)p[_++]=c[A];return p}function _a(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(g(c)||typeof c=="string"){var p=[];c=c.length;for(var _=0;_<c;_++)p.push(_);return p}p=[],_=0;for(const A in c)p[_++]=A;return p}}}function Ho(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(g(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var _=_a(c),A=mf(c),j=A.length,G=0;G<j;G++)p.call(void 0,A[G],_&&_[G],c)}var Tr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pf(c,p){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var A=c[_].indexOf("="),j=null;if(0<=A){var G=c[_].substring(0,A);j=c[_].substring(A+1)}else G=c[_];p(G,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Tt(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Tt){this.h=c.h,br(this,c.j),this.o=c.o,this.g=c.g,_s(this,c.s),this.l=c.l;var p=c.i,_=new Pi;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),Vi(this,_),this.m=c.m}else c&&(p=String(c).match(Tr))?(this.h=!1,br(this,p[1]||"",!0),this.o=On(p[2]||""),this.g=On(p[3]||"",!0),_s(this,p[4]),this.l=On(p[5]||"",!0),Vi(this,p[6]||"",!0),this.m=On(p[7]||"")):(this.h=!1,this.i=new Pi(null,this.h))}Tt.prototype.toString=function(){var c=[],p=this.j;p&&c.push(Ar(p,Fo,!0),":");var _=this.g;return(_||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Ar(p,Fo,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(Ar(_,_.charAt(0)=="/"?gf:Go,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",Ar(_,va)),c.join("")};function vn(c){return new Tt(c)}function br(c,p,_){c.j=_?On(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function _s(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function Vi(c,p,_){p instanceof Pi?(c.i=p,ku(c.i,c.h)):(_||(p=Ar(p,yf)),c.i=new Pi(p,c.h))}function $e(c,p,_){c.i.set(p,_)}function wr(c){return $e(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function On(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ar(c,p,_){return typeof c=="string"?(c=encodeURI(c).replace(p,Mu),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Mu(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Fo=/[#\/\?@]/g,Go=/[#\?:]/g,gf=/[#\?]/g,yf=/[#\?@]/g,va=/#/g;function Pi(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Mn(c){c.g||(c.g=new Map,c.h=0,c.i&&pf(c.i,function(p,_){c.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}s=Pi.prototype,s.add=function(c,p){Mn(this),this.i=null,c=ai(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(p),this.h+=1,this};function Ui(c,p){Mn(c),p=ai(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Li(c,p){return Mn(c),p=ai(c,p),c.g.has(p)}s.forEach=function(c,p){Mn(this),this.g.forEach(function(_,A){_.forEach(function(j){c.call(p,j,A,this)},this)},this)},s.na=function(){Mn(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let A=0;A<p.length;A++){const j=c[A];for(let G=0;G<j.length;G++)_.push(p[A])}return _},s.V=function(c){Mn(this);let p=[];if(typeof c=="string")Li(this,c)&&(p=p.concat(this.g.get(ai(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)p=p.concat(c[_])}return p},s.set=function(c,p){return Mn(this),this.i=null,c=ai(this,c),Li(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},s.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Qo(c,p,_){Ui(c,p),0<_.length&&(c.i=null,c.g.set(ai(c,p),K(_)),c.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var A=p[_];const G=encodeURIComponent(String(A)),oe=this.V(A);for(A=0;A<oe.length;A++){var j=G;oe[A]!==""&&(j+="="+encodeURIComponent(String(oe[A]))),c.push(j)}}return this.i=c.join("&")};function ai(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function ku(c,p){p&&!c.j&&(Mn(c),c.i=null,c.g.forEach(function(_,A){var j=A.toLowerCase();A!=j&&(Ui(this,A),Qo(this,j,_))},c)),c.j=p}function Sr(c,p){const _=new Dn;if(m.Image){const A=new Image;A.onload=P(kn,_,"TestLoadImage: loaded",!0,p,A),A.onerror=P(kn,_,"TestLoadImage: error",!1,p,A),A.onabort=P(kn,_,"TestLoadImage: abort",!1,p,A),A.ontimeout=P(kn,_,"TestLoadImage: timeout",!1,p,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else p(!1)}function Yn(c,p){const _=new Dn,A=new AbortController,j=setTimeout(()=>{A.abort(),kn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:A.signal}).then(G=>{clearTimeout(j),G.ok?kn(_,"TestPingServer: ok",!0,p):kn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(j),kn(_,"TestPingServer: error",!1,p)})}function kn(c,p,_,A,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),A(_)}catch{}}function Rr(){this.g=new yr}function oi(c,p,_){const A=_||"";try{Ho(c,function(j,G){let oe=j;y(j)&&(oe=Qn(j)),p.push(A+G+"="+encodeURIComponent(oe))})}catch(j){throw p.push(A+"type="+encodeURIComponent("_badmap")),j}}function vs(c){this.l=c.Ub||null,this.j=c.eb||!1}L(vs,ko),vs.prototype.g=function(){return new ji(this.l,this.j)},vs.prototype.i=function(c){return function(){return c}}({});function ji(c,p){ct.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(ji,ct),s=ji.prototype,s.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,ui(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||m).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,li(this)),this.readyState=0},s.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ko(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ko(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}s.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?li(this):ui(this),this.readyState==3&&Ko(this)}},s.Ra=function(c){this.g&&(this.response=this.responseText=c,li(this))},s.Qa=function(c){this.g&&(this.response=c,li(this))},s.ga=function(){this.g&&li(this)};function li(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ui(c)}s.setRequestHeader=function(c,p){this.u.append(c,p)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=p.next();return c.join(`\r
`)};function ui(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ji.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Yo(c){let p="";return fe(c,function(_,A){p+=A,p+=":",p+=_,p+=`\r
`}),p}function kt(c,p,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=Yo(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):$e(c,p,_))}function Fe(c){ct.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(Fe,ct);var Ea=/^https?$/i,Ir=["POST","PUT"];s=Fe.prototype,s.Ha=function(c){this.J=c},s.ea=function(c,p,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ii.g(),this.v=this.o?Vo(this.o):Vo(ii),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(G){Vu(this,G);return}if(c=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var j in A)_.set(j,A[j]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const G of A.keys())_.set(G,A.get(G));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(G=>G.toLowerCase()=="content-type"),j=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Ir,p,void 0))||A||j||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,oe]of _)this.g.setRequestHeader(G,oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xr(this),this.u=!0,this.g.send(c),this.u=!1}catch(G){Vu(this,G)}};function Vu(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,Ta(c),ci(c)}function Ta(c){c.A||(c.A=!0,Qe(c,"complete"),Qe(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Qe(this,"complete"),Qe(this,"abort"),ci(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ci(this,!0)),Fe.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?ba(this):this.bb())},s.bb=function(){ba(this)};function ba(c){if(c.h&&typeof f<"u"&&(!c.v[1]||Vn(c)!=4||c.Z()!=2)){if(c.u&&Vn(c)==4)$t(c.Ea,0,c);else if(Qe(c,"readystatechange"),Vn(c)==4){c.h=!1;try{const oe=c.Z();e:switch(oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var A;if(A=oe===0){var j=String(c.D).match(Tr)[1]||null;!j&&m.self&&m.self.location&&(j=m.self.location.protocol.slice(0,-1)),A=!Ea.test(j?j.toLowerCase():"")}_=A}if(_)Qe(c,"complete"),Qe(c,"success");else{c.m=6;try{var G=2<Vn(c)?c.g.statusText:""}catch{G=""}c.l=G+" ["+c.Z()+"]",Ta(c)}}finally{ci(c)}}}}function ci(c,p){if(c.g){xr(c);const _=c.g,A=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Qe(c,"ready");try{_.onreadystatechange=A}catch{}}}function xr(c){c.I&&(m.clearTimeout(c.I),c.I=null)}s.isActive=function(){return!!this.g};function Vn(c){return c.g?c.g.readyState:0}s.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),fa(p)}};function Pu(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function _f(c){const p={};c=(c.g&&2<=Vn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(ie(c[A]))continue;var _=D(c[A]);const j=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const G=p[j]||[];p[j]=G,G.push(_)}C(p,function(A){return A.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cr(c,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||p}function wa(c){this.Aa=0,this.i=[],this.j=new Dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Cr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Cr("baseRetryDelayMs",5e3,c),this.cb=Cr("retryDelaySeedMs",1e4,c),this.Wa=Cr("forwardChannelMaxRetries",2,c),this.wa=Cr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new ki(c&&c.concurrentRequestLimit),this.Da=new Rr,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=wa.prototype,s.la=8,s.G=1,s.connect=function(c,p,_,A){rt(0),this.W=c,this.H=p||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=Hu(this,null,this.W),Sa(this)};function $o(c){if(Uu(c),c.G==3){var p=c.U++,_=vn(c.I);if($e(_,"SID",c.K),$e(_,"RID",p),$e(_,"TYPE","terminate"),Nr(c,_),p=new rn(c,c.j,p),p.L=2,p.v=wr(vn(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=p.v,_=!0),_||(p.g=Fu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),vr(p)}qu(c)}function Aa(c){c.g&&(Dr(c),c.g.cancel(),c.g=null)}function Uu(c){Aa(c),c.u&&(m.clearTimeout(c.u),c.u=null),Ra(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function Sa(c){if(!pa(c.h)&&!c.s){c.s=!0;var p=c.Ga;le||M(),pe||(le(),pe=!0),ze.add(p,c),c.B=0}}function vf(c,p){return ga(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Et(S(c.Ga,c,p),Zo(c,c.B)),c.B++,!0)}s.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const j=new rn(this,this.j,c);let G=this.o;if(this.S&&(G?(G=R(G),O(G,this.S)):G=this.S),this.m!==null||this.O||(j.H=G,G=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(p+=A,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Lu(this,j,p),_=vn(this.I),$e(_,"RID",c),$e(_,"CVER",22),this.D&&$e(_,"X-HTTP-Session-Id",this.D),Nr(this,_),G&&(this.O?p="headers="+encodeURIComponent(String(Yo(G)))+"&"+p:this.m&&kt(_,this.m,G)),ya(this.h,j),this.Ua&&$e(_,"TYPE","init"),this.P?($e(_,"$req",p),$e(_,"SID","null"),j.T=!0,Kn(j,_,null)):Kn(j,_,p),this.G=2}}else this.G==3&&(c?Xo(this,c):this.i.length==0||pa(this.h)||Xo(this))};function Xo(c,p){var _;p?_=p.l:_=c.U++;const A=vn(c.I);$e(A,"SID",c.K),$e(A,"RID",_),$e(A,"AID",c.T),Nr(c,A),c.m&&c.o&&kt(A,c.m,c.o),_=new rn(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),p&&(c.i=p.D.concat(c.i)),p=Lu(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),ya(c.h,_),Kn(_,A,p)}function Nr(c,p){c.H&&fe(c.H,function(_,A){$e(p,A,_)}),c.l&&Ho({},function(_,A){$e(p,A,_)})}function Lu(c,p,_){_=Math.min(c.i.length,_);var A=c.l?S(c.l.Na,c.l,c):null;e:{var j=c.i;let G=-1;for(;;){const oe=["count="+_];G==-1?0<_?(G=j[0].g,oe.push("ofs="+G)):G=0:oe.push("ofs="+G);let Pe=!0;for(let xt=0;xt<_;xt++){let Ue=j[xt].g;const Vt=j[xt].map;if(Ue-=G,0>Ue)G=Math.max(0,j[xt].g-100),Pe=!1;else try{oi(Vt,oe,"req"+Ue+"_")}catch{A&&A(Vt)}}if(Pe){A=oe.join("&");break e}}}return c=c.i.splice(0,_),p.D=c,A}function ju(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;le||M(),pe||(le(),pe=!0),ze.add(p,c),c.v=0}}function Wo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Et(S(c.Fa,c),Zo(c,c.v)),c.v++,!0)}s.Fa=function(){if(this.u=null,Bu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Et(S(this.ab,this),c)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),Aa(this),Bu(this))};function Dr(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function Bu(c){c.g=new rn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=vn(c.qa);$e(p,"RID","rpc"),$e(p,"SID",c.K),$e(p,"AID",c.T),$e(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&$e(p,"TO",c.ja),$e(p,"TYPE","xmlhttp"),Nr(c,p),c.m&&c.o&&kt(p,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=wr(vn(p)),_.m=null,_.P=!0,Mi(_,c)}s.Za=function(){this.C!=null&&(this.C=null,Aa(this),Wo(this),rt(19))};function Ra(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function zu(c,p){var _=null;if(c.g==p){Ra(c),Dr(c),c.g=null;var A=2}else if(zo(c.h,p))_=p.D,an(c.h,p),A=1;else return;if(c.G!=0){if(p.o)if(A==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var j=c.B;A=ds(),Qe(A,new It(A,_)),Sa(c)}else ju(c);else if(j=p.s,j==3||j==0&&0<p.X||!(A==1&&vf(c,p)||A==2&&Wo(c)))switch(_&&0<_.length&&(p=c.h,p.i=p.i.concat(_)),j){case 1:Bi(c,5);break;case 4:Bi(c,10);break;case 3:Bi(c,6);break;default:Bi(c,2)}}}function Zo(c,p){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*p}function Bi(c,p){if(c.j.info("Error code "+p),p==2){var _=S(c.fb,c),A=c.Xa;const j=!A;A=new Tt(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||br(A,"https"),wr(A),j?Sr(A.toString(),_):Yn(A.toString(),_)}else rt(2);c.G=0,c.l&&c.l.sa(p),qu(c),Uu(c)}s.fb=function(c){c?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function qu(c){if(c.G=0,c.ka=[],c.l){const p=qo(c.h);(p.length!=0||c.i.length!=0)&&(F(c.ka,p),F(c.ka,c.i),c.h.i.length=0,K(c.i),c.i.length=0),c.l.ra()}}function Hu(c,p,_){var A=_ instanceof Tt?vn(_):new Tt(_);if(A.g!="")p&&(A.g=p+"."+A.g),_s(A,A.s);else{var j=m.location;A=j.protocol,p=p?p+"."+j.hostname:j.hostname,j=+j.port;var G=new Tt(null);A&&br(G,A),p&&(G.g=p),j&&_s(G,j),_&&(G.l=_),A=G}return _=c.D,p=c.ya,_&&p&&$e(A,_,p),$e(A,"VER",c.la),Nr(c,A),A}function Fu(c,p,_){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Fe(new vs({eb:_})):new Fe(c.pa),p.Ha(c.J),p}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gu(){}s=Gu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Ia(){}Ia.prototype.g=function(c,p){return new on(c,p)};function on(c,p){ct.call(this),this.g=new wa(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!ie(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!ie(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new hi(this)}L(on,ct),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){$o(this.g)},on.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=Qn(c),c=_);p.i.push(new Ou(p.Ya++,c)),p.G==3&&Sa(p)},on.prototype.N=function(){this.g.l=null,delete this.j,$o(this.g),delete this.g,on.aa.N.call(this)};function Qu(c){Di.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const _ in p){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}L(Qu,Di);function Ku(){Uo.call(this),this.status=1}L(Ku,Uo);function hi(c){this.g=c}L(hi,Gu),hi.prototype.ua=function(){Qe(this.g,"a")},hi.prototype.ta=function(c){Qe(this.g,new Qu(c))},hi.prototype.sa=function(c){Qe(this.g,new Ku)},hi.prototype.ra=function(){Qe(this.g,"b")},Ia.prototype.createWebChannel=Ia.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,wT=function(){return new Ia},bT=function(){return ds()},TT=ni,Bm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gs.NO_ERROR=0,gs.TIMEOUT=8,gs.HTTP_ERROR=6,ah=gs,Oi.COMPLETE="complete",ET=Oi,Po.EventType=Ni,Ni.OPEN="a",Ni.CLOSE="b",Ni.ERROR="c",Ni.MESSAGE="d",ct.prototype.listen=ct.prototype.K,Fl=Po,Fe.prototype.listenOnce=Fe.prototype.L,Fe.prototype.getLastError=Fe.prototype.Ka,Fe.prototype.getLastErrorCode=Fe.prototype.Ba,Fe.prototype.getStatus=Fe.prototype.Z,Fe.prototype.getResponseJson=Fe.prototype.Oa,Fe.prototype.getResponseText=Fe.prototype.oa,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Ha,vT=Fe}).apply(typeof $c<"u"?$c:typeof self<"u"?self:typeof window<"u"?window:{});const f0="@firebase/firestore",d0="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let So="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=new cp("@firebase/firestore");function no(){return ta.logLevel}function he(s,...e){if(ta.logLevel<=Oe.DEBUG){const n=e.map(Tp);ta.debug(`Firestore (${So}): ${s}`,...n)}}function ls(s,...e){if(ta.logLevel<=Oe.ERROR){const n=e.map(Tp);ta.error(`Firestore (${So}): ${s}`,...n)}}function fo(s,...e){if(ta.logLevel<=Oe.WARN){const n=e.map(Tp);ta.warn(`Firestore (${So}): ${s}`,...n)}}function Tp(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(s,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,AT(s,r,n)}function AT(s,e,n){let r=`FIRESTORE (${So}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ls(r),new Error(r)}function Ge(s,e,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||AT(e,o,r)}function Se(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends xi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Jt.UNAUTHENTICATED))}shutdown(){}}class JI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class e2{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ge(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let u=new ss;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ss,e.enqueueRetryable(()=>o(this.currentUser))};const f=()=>{const g=u;e.enqueueRetryable(async()=>{await g.promise,await o(this.currentUser)})},m=g=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(g=>m(g)),setTimeout(()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ss)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge(typeof r.accessToken=="string",31837,{l:r}),new ST(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string",2055,{h:e}),new Jt(e)}}class t2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class n2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new t2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class m0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class i2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,In(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ge(this.o===void 0,3512);const r=u=>{u.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,he("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new m0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new m0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=s2(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=e.charAt(o[u]%62))}return r}}function Me(s,e){return s<e?-1:s>e?1:0}function zm(s,e){const n=Math.min(s.length,e.length);for(let r=0;r<n;r++){const o=s.charAt(r),u=e.charAt(r);if(o!==u)return wm(o)===wm(u)?Me(o,u):wm(o)?1:-1}return Me(s.length,e.length)}const r2=55296,a2=57343;function wm(s){const e=s.charCodeAt(0);return e>=r2&&e<=a2}function mo(s,e,n){return s.length===e.length&&s.every((r,o)=>n(r,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="__name__";class _i{constructor(e,n,r){n===void 0?n=0:n>e.length&&Te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _i.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _i?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let o=0;o<r;o++){const u=_i.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Me(e.length,n.length)}static compareSegments(e,n){const r=_i.isNumericId(e),o=_i.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?_i.extractNumericId(e).compare(_i.extractNumericId(n)):zm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xs.fromString(e.substring(4,e.length-2))}}class it extends _i{construct(e,n,r){return new it(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(o=>o.length>0))}return new it(n)}static emptyPath(){return new it([])}}const o2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends _i{construct(e,n,r){return new Kt(e,n,r)}static isValidIdentifier(e){return o2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===p0}static keyField(){return new Kt([p0])}static fromServerFormat(e){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new ce(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let f=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ce(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ce(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,o+=2}else m==="`"?(f=!f,o++):m!=="."||f?(r+=m,o++):(u(),o++)}if(u(),f)throw new ce(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(n)}static emptyPath(){return new Kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(it.fromString(e))}static fromName(e){return new ge(it.fromString(e).popFirst(5))}static empty(){return new ge(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return it.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new it(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(s,e,n){if(!n)throw new ce(X.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function l2(s,e,n,r){if(e===!0&&r===!0)throw new ce(X.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function g0(s){if(!ge.isDocumentKey(s))throw new ce(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function y0(s){if(ge.isDocumentKey(s))throw new ce(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function IT(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Lh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Te(12329,{type:typeof s})}function pn(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ce(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lh(s);throw new ce(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(s,e){const n={typeString:s};return e&&(n.value=e),n}function yu(s,e){if(!IT(s))throw new ce(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const o=e[r].typeString,u="value"in e[r]?{value:e[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const f=s[r];if(o&&typeof f!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new ce(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=-62135596800,v0=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*v0);return new st(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<_0)throw new ce(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/v0}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yu(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:Rt("string",st._jsonSchemaVersion),seconds:Rt("number"),nanoseconds:Rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new st(0,0))}static max(){return new Ae(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=-1;function u2(s,e){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(r===1e9?new st(n+1,0):new st(n,r));return new Js(o,ge.empty(),e)}function c2(s){return new Js(s.readTime,s.key,iu)}class Js{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Js(Ae.min(),ge.empty(),iu)}static max(){return new Js(Ae.max(),ge.empty(),iu)}}function h2(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(s.documentKey,e.documentKey),n!==0?n:Me(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class d2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ro(s){if(s.code!==X.FAILED_PRECONDITION||s.message!==f2)throw s;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):J.reject(n)}static resolve(e){return new J((n,r)=>{n(e)})}static reject(e){return new J((n,r)=>{r(e)})}static waitFor(e){return new J((n,r)=>{let o=0,u=0,f=!1;e.forEach(m=>{++o,m.next(()=>{++u,f&&u===o&&n()},g=>r(g))}),f=!0,u===o&&n()})}static or(e){let n=J.resolve(!1);for(const r of e)n=n.next(o=>o?J.resolve(o):r());return n}static forEach(e,n){const r=[];return e.forEach((o,u)=>{r.push(n.call(this,o,u))}),this.waitFor(r)}static mapArray(e,n){return new J((r,o)=>{const u=e.length,f=new Array(u);let m=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next(T=>{f[y]=T,++m,m===u&&r(f)},T=>o(T))}})}static doWhile(e,n){return new J((r,o)=>{const u=()=>{e()===!0?n().next(()=>{u()},o):r()};u()})}}function m2(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Io(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp=-1;function Bh(s){return s==null}function Eh(s){return s===0&&1/s==-1/0}function p2(s){return typeof s=="number"&&Number.isInteger(s)&&!Eh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="";function g2(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=E0(e)),e=y2(s.get(n),e);return E0(e)}function y2(s,e){let n=e;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case xT:n+="";break;default:n+=u}}return n}function E0(s){return s+xT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function or(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function CT(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||Qt.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xc(this.root,e,this.comparator,!0)}}class Xc{constructor(e,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?r(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,n,r,o,u){this.key=e,this.value=n,this.color=r??Qt.RED,this.left=o??Qt.EMPTY,this.right=u??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,o,u){return new Qt(e??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Qt.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,n,r,o,u){return this}insert(e,n,r){return new Qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new b0(this.data.getIterator())}getIteratorFrom(e){return new b0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ot(this.comparator);return n.data=e,n}}class b0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new xn([])}unionWith(e){let n=new Ot(Kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return mo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new NT("Invalid base64 string: "+u):u}}(e);return new Yt(n)}static fromUint8Array(e){const n=function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u}(e);return new Yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const _2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function er(s){if(Ge(!!s,39018),typeof s=="string"){let e=0;const n=_2.exec(s);if(Ge(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vt(s.seconds),nanos:vt(s.nanos)}}function vt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function tr(s){return typeof s=="string"?Yt.fromBase64String(s):Yt.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="server_timestamp",OT="__type__",MT="__previous_value__",kT="__local_write_time__";function Ap(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[OT])==null?void 0:r.stringValue)===DT}function zh(s){const e=s.mapValue.fields[MT];return Ap(e)?zh(e):e}function su(s){const e=er(s.mapValue.fields[kT].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,n,r,o,u,f,m,g,y,T){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=T}}const Th="(default)";class ru{constructor(e,n){this.projectId=e,this.database=n||Th}static empty(){return new ru("","")}get isDefaultDatabase(){return this.database===Th}isEqual(e){return e instanceof ru&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="__type__",E2="__max__",Wc={mapValue:{}},PT="__vector__",bh="value";function nr(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Ap(s)?4:b2(s)?9007199254740991:T2(s)?10:11:Te(28295,{value:s})}function Ii(s,e){if(s===e)return!0;const n=nr(s);if(n!==nr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return su(s).isEqual(su(e));case 3:return function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=er(o.timestampValue),m=er(u.timestampValue);return f.seconds===m.seconds&&f.nanos===m.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(o,u){return tr(o.bytesValue).isEqual(tr(u.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(o,u){return vt(o.geoPointValue.latitude)===vt(u.geoPointValue.latitude)&&vt(o.geoPointValue.longitude)===vt(u.geoPointValue.longitude)}(s,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return vt(o.integerValue)===vt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=vt(o.doubleValue),m=vt(u.doubleValue);return f===m?Eh(f)===Eh(m):isNaN(f)&&isNaN(m)}return!1}(s,e);case 9:return mo(s.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:case 11:return function(o,u){const f=o.mapValue.fields||{},m=u.mapValue.fields||{};if(T0(f)!==T0(m))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(m[g]===void 0||!Ii(f[g],m[g])))return!1;return!0}(s,e);default:return Te(52216,{left:s})}}function au(s,e){return(s.values||[]).find(n=>Ii(n,e))!==void 0}function po(s,e){if(s===e)return 0;const n=nr(s),r=nr(e);if(n!==r)return Me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(s.booleanValue,e.booleanValue);case 2:return function(u,f){const m=vt(u.integerValue||u.doubleValue),g=vt(f.integerValue||f.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1}(s,e);case 3:return w0(s.timestampValue,e.timestampValue);case 4:return w0(su(s),su(e));case 5:return zm(s.stringValue,e.stringValue);case 6:return function(u,f){const m=tr(u),g=tr(f);return m.compareTo(g)}(s.bytesValue,e.bytesValue);case 7:return function(u,f){const m=u.split("/"),g=f.split("/");for(let y=0;y<m.length&&y<g.length;y++){const T=Me(m[y],g[y]);if(T!==0)return T}return Me(m.length,g.length)}(s.referenceValue,e.referenceValue);case 8:return function(u,f){const m=Me(vt(u.latitude),vt(f.latitude));return m!==0?m:Me(vt(u.longitude),vt(f.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return A0(s.arrayValue,e.arrayValue);case 10:return function(u,f){var S,P,L,K;const m=u.fields||{},g=f.fields||{},y=(S=m[bh])==null?void 0:S.arrayValue,T=(P=g[bh])==null?void 0:P.arrayValue,w=Me(((L=y==null?void 0:y.values)==null?void 0:L.length)||0,((K=T==null?void 0:T.values)==null?void 0:K.length)||0);return w!==0?w:A0(y,T)}(s.mapValue,e.mapValue);case 11:return function(u,f){if(u===Wc.mapValue&&f===Wc.mapValue)return 0;if(u===Wc.mapValue)return 1;if(f===Wc.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),y=f.fields||{},T=Object.keys(y);g.sort(),T.sort();for(let w=0;w<g.length&&w<T.length;++w){const S=zm(g[w],T[w]);if(S!==0)return S;const P=po(m[g[w]],y[T[w]]);if(P!==0)return P}return Me(g.length,T.length)}(s.mapValue,e.mapValue);default:throw Te(23264,{he:n})}}function w0(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Me(s,e);const n=er(s),r=er(e),o=Me(n.seconds,r.seconds);return o!==0?o:Me(n.nanos,r.nanos)}function A0(s,e){const n=s.values||[],r=e.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=po(n[o],r[o]);if(u)return u}return Me(n.length,r.length)}function go(s){return qm(s)}function qm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(n){const r=er(n);return`time(${r.seconds},${r.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(n){return tr(n).toBase64()}(s.bytesValue):"referenceValue"in s?function(n){return ge.fromName(n).toString()}(s.referenceValue):"geoPointValue"in s?function(n){return`geo(${n.latitude},${n.longitude})`}(s.geoPointValue):"arrayValue"in s?function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=qm(u);return r+"]"}(s.arrayValue):"mapValue"in s?function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of r)u?u=!1:o+=",",o+=`${f}:${qm(n.fields[f])}`;return o+"}"}(s.mapValue):Te(61005,{value:s})}function oh(s){switch(nr(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zh(s);return e?16+oh(e):16;case 5:return 2*s.stringValue.length;case 6:return tr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((o,u)=>o+oh(u),0)}(s.arrayValue);case 10:case 11:return function(r){let o=0;return or(r.fields,(u,f)=>{o+=u.length+oh(f)}),o}(s.mapValue);default:throw Te(13486,{value:s})}}function S0(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Hm(s){return!!s&&"integerValue"in s}function Sp(s){return!!s&&"arrayValue"in s}function R0(s){return!!s&&"nullValue"in s}function I0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function lh(s){return!!s&&"mapValue"in s}function T2(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[VT])==null?void 0:r.stringValue)===PT}function Xl(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return or(s.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Xl(r)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xl(s.arrayValue.values[n]);return e}return{...s}}function b2(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===E2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.value=e}static empty(){return new mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!lh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xl(n)}setAll(e){let n=Kt.emptyPath(),r={},o=[];e.forEach((f,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=m.popLast()}f?r[m.lastSegment()]=Xl(f):o.push(m.lastSegment())});const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(e){const n=this.field(e.popLast());lh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ii(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=n.mapValue.fields[e.get(r)];lh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,r){or(n,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new mn(Xl(this.value))}}function UT(s){const e=[];return or(s.fields,(n,r)=>{const o=new Kt([n]);if(lh(r)){const u=UT(r.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n,r,o,u,f,m){this.key=e,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=f,this.documentState=m}static newInvalidDocument(e){return new en(e,0,Ae.min(),Ae.min(),Ae.min(),mn.empty(),0)}static newFoundDocument(e,n,r,o){return new en(e,1,n,Ae.min(),r,o,0)}static newNoDocument(e,n){return new en(e,2,n,Ae.min(),Ae.min(),mn.empty(),0)}static newUnknownDocument(e,n){return new en(e,3,n,Ae.min(),Ae.min(),mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,n){this.position=e,this.inclusive=n}}function x0(s,e,n){let r=0;for(let o=0;o<s.position.length;o++){const u=e[o],f=s.position[o];if(u.field.isKeyField()?r=ge.comparator(ge.fromName(f.referenceValue),n.key):r=po(f,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function C0(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Ii(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n="asc"){this.field=e,this.dir=n}}function w2(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{}class St extends LT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new S2(e,n,r):n==="array-contains"?new x2(e,r):n==="in"?new C2(e,r):n==="not-in"?new N2(e,r):n==="array-contains-any"?new D2(e,r):new St(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new R2(e,r):new I2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(po(n,this.value)):n!==null&&nr(this.value)===nr(n)&&this.matchesComparison(po(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ei extends LT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ei(e,n)}matches(e){return jT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function jT(s){return s.op==="and"}function BT(s){return A2(s)&&jT(s)}function A2(s){for(const e of s.filters)if(e instanceof ei)return!1;return!0}function Fm(s){if(s instanceof St)return s.field.canonicalString()+s.op.toString()+go(s.value);if(BT(s))return s.filters.map(e=>Fm(e)).join(",");{const e=s.filters.map(n=>Fm(n)).join(",");return`${s.op}(${e})`}}function zT(s,e){return s instanceof St?function(r,o){return o instanceof St&&r.op===o.op&&r.field.isEqual(o.field)&&Ii(r.value,o.value)}(s,e):s instanceof ei?function(r,o){return o instanceof ei&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce((u,f,m)=>u&&zT(f,o.filters[m]),!0):!1}(s,e):void Te(19439)}function qT(s){return s instanceof St?function(n){return`${n.field.canonicalString()} ${n.op} ${go(n.value)}`}(s):s instanceof ei?function(n){return n.op.toString()+" {"+n.getFilters().map(qT).join(" ,")+"}"}(s):"Filter"}class S2 extends St{constructor(e,n,r){super(e,n,r),this.key=ge.fromName(r.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class R2 extends St{constructor(e,n){super(e,"in",n),this.keys=HT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class I2 extends St{constructor(e,n){super(e,"not-in",n),this.keys=HT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function HT(s,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ge.fromName(r.referenceValue))}class x2 extends St{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Sp(n)&&au(n.arrayValue,this.value)}}class C2 extends St{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&au(this.value.arrayValue,n)}}class N2 extends St{constructor(e,n){super(e,"not-in",n)}matches(e){if(au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!au(this.value.arrayValue,n)}}class D2 extends St{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Sp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>au(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,n=null,r=[],o=[],u=null,f=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=f,this.endAt=m,this.Te=null}}function N0(s,e=null,n=[],r=[],o=null,u=null,f=null){return new O2(s,e,n,r,o,u,f)}function Rp(s){const e=Se(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Fm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(u){return u.field.canonicalString()+u.dir}(r)).join(","),Bh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>go(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>go(r)).join(",")),e.Te=n}return e.Te}function Ip(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!w2(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!zT(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!C0(s.startAt,e.startAt)&&C0(s.endAt,e.endAt)}function Gm(s){return ge.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,n=null,r=[],o=[],u=null,f="F",m=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=f,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function M2(s,e,n,r,o,u,f,m){return new xo(s,e,n,r,o,u,f,m)}function qh(s){return new xo(s)}function D0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function FT(s){return s.collectionGroup!==null}function Wl(s){const e=Se(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let m=new Ot(Kt.comparator);return f.filters.forEach(g=>{g.getFlattenedFilters().forEach(y=>{y.isInequality()&&(m=m.add(y.field))})}),m})(e).forEach(u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new ou(u,r))}),n.has(Kt.keyField().canonicalString())||e.Ie.push(new ou(Kt.keyField(),r))}return e.Ie}function wi(s){const e=Se(s);return e.Ee||(e.Ee=k2(e,Wl(s))),e.Ee}function k2(s,e){if(s.limitType==="F")return N0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(o=>{const u=o.dir==="desc"?"asc":"desc";return new ou(o.field,u)});const n=s.endAt?new wh(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new wh(s.startAt.position,s.startAt.inclusive):null;return N0(s.path,s.collectionGroup,e,s.filters,s.limit,n,r)}}function Qm(s,e){const n=s.filters.concat([e]);return new xo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Km(s,e,n){return new xo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Hh(s,e){return Ip(wi(s),wi(e))&&s.limitType===e.limitType}function GT(s){return`${Rp(wi(s))}|lt:${s.limitType}`}function io(s){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(o=>qT(o)).join(", ")}]`),Bh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(o=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(o)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(o=>go(o)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(o=>go(o)).join(",")),`Target(${r})`}(wi(s))}; limitType=${s.limitType})`}function Fh(s,e){return e.isFoundDocument()&&function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):ge.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(s,e)&&function(r,o){for(const u of Wl(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0}(s,e)&&function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0}(s,e)&&function(r,o){return!(r.startAt&&!function(f,m,g){const y=x0(f,m,g);return f.inclusive?y<=0:y<0}(r.startAt,Wl(r),o)||r.endAt&&!function(f,m,g){const y=x0(f,m,g);return f.inclusive?y>=0:y>0}(r.endAt,Wl(r),o))}(s,e)}function V2(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function QT(s){return(e,n)=>{let r=!1;for(const o of Wl(s)){const u=P2(o,e,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function P2(s,e,n){const r=s.field.isKeyField()?ge.comparator(e.key,n.key):function(u,f,m){const g=f.data.field(u),y=m.data.field(u);return g!==null&&y!==null?po(g,y):Te(42886)}(s.field,e,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){or(this.inner,(n,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return CT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=new ut(ge.comparator);function us(){return U2}const KT=new ut(ge.comparator);function Gl(...s){let e=KT;for(const n of s)e=e.insert(n.key,n);return e}function YT(s){let e=KT;return s.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yr(){return Zl()}function $T(){return Zl()}function Zl(){return new oa(s=>s.toString(),(s,e)=>s.isEqual(e))}const L2=new ut(ge.comparator),j2=new Ot(ge.comparator);function ke(...s){let e=j2;for(const n of s)e=e.add(n);return e}const B2=new Ot(Me);function z2(){return B2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eh(e)?"-0":e}}function XT(s){return{integerValue:""+s}}function q2(s,e){return p2(e)?XT(e):xp(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(){this._=void 0}}function H2(s,e,n){return s instanceof lu?function(o,u){const f={fields:{[OT]:{stringValue:DT},[kT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Ap(u)&&(u=zh(u)),u&&(f.fields[MT]=u),{mapValue:f}}(n,e):s instanceof yo?ZT(s,e):s instanceof _o?JT(s,e):function(o,u){const f=WT(o,u),m=O0(f)+O0(o.Ae);return Hm(f)&&Hm(o.Ae)?XT(m):xp(o.serializer,m)}(s,e)}function F2(s,e,n){return s instanceof yo?ZT(s,e):s instanceof _o?JT(s,e):n}function WT(s,e){return s instanceof Ah?function(r){return Hm(r)||function(u){return!!u&&"doubleValue"in u}(r)}(e)?e:{integerValue:0}:null}class lu extends Gh{}class yo extends Gh{constructor(e){super(),this.elements=e}}function ZT(s,e){const n=eb(e);for(const r of s.elements)n.some(o=>Ii(o,r))||n.push(r);return{arrayValue:{values:n}}}class _o extends Gh{constructor(e){super(),this.elements=e}}function JT(s,e){let n=eb(e);for(const r of s.elements)n=n.filter(o=>!Ii(o,r));return{arrayValue:{values:n}}}class Ah extends Gh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function O0(s){return vt(s.integerValue||s.doubleValue)}function eb(s){return Sp(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n){this.field=e,this.transform=n}}function G2(s,e){return s.field.isEqual(e.field)&&function(r,o){return r instanceof yo&&o instanceof yo||r instanceof _o&&o instanceof _o?mo(r.elements,o.elements,Ii):r instanceof Ah&&o instanceof Ah?Ii(r.Ae,o.Ae):r instanceof lu&&o instanceof lu}(s.transform,e.transform)}class Q2{constructor(e,n){this.version=e,this.transformResults=n}}class Fn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Fn}static exists(e){return new Fn(void 0,e)}static updateTime(e){return new Fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uh(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class Qh{}function tb(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new Np(s.key,Fn.none()):new _u(s.key,s.data,Fn.none());{const n=s.data,r=mn.empty();let o=new Ot(Kt.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?r.delete(u):r.set(u,f),o=o.add(u)}return new lr(s.key,r,new xn(o.toArray()),Fn.none())}}function K2(s,e,n){s instanceof _u?function(o,u,f){const m=o.value.clone(),g=k0(o.fieldTransforms,u,f.transformResults);m.setAll(g),u.convertToFoundDocument(f.version,m).setHasCommittedMutations()}(s,e,n):s instanceof lr?function(o,u,f){if(!uh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const m=k0(o.fieldTransforms,u,f.transformResults),g=u.data;g.setAll(nb(o)),g.setAll(m),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(s,e,n):function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function Jl(s,e,n,r){return s instanceof _u?function(u,f,m,g){if(!uh(u.precondition,f))return m;const y=u.value.clone(),T=V0(u.fieldTransforms,g,f);return y.setAll(T),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null}(s,e,n,r):s instanceof lr?function(u,f,m,g){if(!uh(u.precondition,f))return m;const y=V0(u.fieldTransforms,g,f),T=f.data;return T.setAll(nb(u)),T.setAll(y),f.convertToFoundDocument(f.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(w=>w.field))}(s,e,n,r):function(u,f,m){return uh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):m}(s,e,n)}function Y2(s,e){let n=null;for(const r of s.fieldTransforms){const o=e.data.field(r.field),u=WT(r.transform,o||null);u!=null&&(n===null&&(n=mn.empty()),n.set(r.field,u))}return n||null}function M0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&mo(r,o,(u,f)=>G2(u,f))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class _u extends Qh{constructor(e,n,r,o=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class lr extends Qh{constructor(e,n,r,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function nb(s){const e=new Map;return s.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=s.data.field(n);e.set(n,r)}}),e}function k0(s,e,n){const r=new Map;Ge(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const u=s[o],f=u.transform,m=e.data.field(u.field);r.set(u.field,F2(f,m,n[o]))}return r}function V0(s,e,n){const r=new Map;for(const o of s){const u=o.transform,f=n.data.field(o.field);r.set(o.field,H2(u,f,e))}return r}class Np extends Qh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $2 extends Qh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,n,r,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&K2(u,e,r[o])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Jl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Jl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$T();return this.mutations.forEach(o=>{const u=e.get(o.key),f=u.overlayedDocument;let m=this.applyToLocalView(f,u.mutatedFields);m=n.has(o.key)?null:m;const g=tb(f,m);g!==null&&r.set(o.key,g),f.isValidDocument()||f.convertToNoDocument(Ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&mo(this.mutations,e.mutations,(n,r)=>M0(n,r))&&mo(this.baseMutations,e.baseMutations,(n,r)=>M0(n,r))}}class Dp{constructor(e,n,r,o){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(e,n,r){Ge(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=function(){return L2}();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,r[f].version);return new Dp(e,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At,je;function J2(s){switch(s){case X.OK:return Te(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Te(15467,{code:s})}}function ib(s){if(s===void 0)return ls("GRPC error has no .code"),X.UNKNOWN;switch(s){case At.OK:return X.OK;case At.CANCELLED:return X.CANCELLED;case At.UNKNOWN:return X.UNKNOWN;case At.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case At.INTERNAL:return X.INTERNAL;case At.UNAVAILABLE:return X.UNAVAILABLE;case At.UNAUTHENTICATED:return X.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case At.NOT_FOUND:return X.NOT_FOUND;case At.ALREADY_EXISTS:return X.ALREADY_EXISTS;case At.PERMISSION_DENIED:return X.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case At.ABORTED:return X.ABORTED;case At.OUT_OF_RANGE:return X.OUT_OF_RANGE;case At.UNIMPLEMENTED:return X.UNIMPLEMENTED;case At.DATA_LOSS:return X.DATA_LOSS;default:return Te(39323,{code:s})}}(je=At||(At={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ex(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=new Xs([4294967295,4294967295],0);function P0(s){const e=ex().encode(s),n=new _T;return n.update(e),new Uint8Array(n.digest())}function U0(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Xs([n,r],0),new Xs([o,u],0)]}class Op{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ql(`Invalid padding: ${n}`);if(r<0)throw new Ql(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ql(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ql(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Xs.fromNumber(this.ge)}ye(e,n,r){let o=e.add(n.multiply(Xs.fromNumber(r)));return o.compare(tx)===1&&(o=new Xs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=P0(e),[r,o]=U0(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);if(!this.we(f))return!1}return!0}static create(e,n,r){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new Op(u,o,n);return r.forEach(m=>f.insert(m)),f}insert(e){if(this.ge===0)return;const n=P0(e),[r,o]=U0(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(r,o,u);this.Se(f)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,n,r,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const o=new Map;return o.set(e,vu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Kh(Ae.min(),o,new ut(Me),us(),ke())}}class vu{constructor(e,n,r,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new vu(r,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e,n,r,o){this.be=e,this.removedTargetIds=n,this.key=r,this.De=o}}class sb{constructor(e,n){this.targetId=e,this.Ce=n}}class rb{constructor(e,n,r=Yt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=o}}class L0{constructor(){this.ve=0,this.Fe=j0(),this.Me=Yt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),n=ke(),r=ke();return this.Fe.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:Te(38017,{changeType:u})}}),new vu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=j0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ge(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class nx{constructor(e){this.Ge=e,this.ze=new Map,this.je=us(),this.Je=Zc(),this.He=Zc(),this.Ye=new ut(Me)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,o)=>{this.rt(o)&&n(o)})}st(e){const n=e.targetId,r=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(Gm(u))if(r===0){const f=new ge(u.path);this.et(n,f,en.newNoDocument(f,Ae.min()))}else Ge(r===1,20013,{expectedCount:r});else{const f=this._t(n);if(f!==r){const m=this.ut(e),g=m?this.ct(m,e,f):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let f,m;try{f=tr(r).toUint8Array()}catch(g){if(g instanceof NT)return fo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Op(f,o,u)}catch(g){return fo(g instanceof Ql?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach(u=>{const f=this.Ge.ht(),m=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)}),o}Tt(e){const n=new Map;this.ze.forEach((u,f)=>{const m=this.ot(f);if(m){if(u.current&&Gm(m.target)){const g=new ge(m.target.path);this.It(g).has(f)||this.Et(f,g)||this.et(f,g,en.newNoDocument(g,e))}u.Be&&(n.set(f,u.ke()),u.qe())}});let r=ke();this.He.forEach((u,f)=>{let m=!0;f.forEachWhile(g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(r=r.add(u))}),this.je.forEach((u,f)=>f.setReadTime(e));const o=new Kh(e,n,this.Ye,this.je,r);return this.je=us(),this.Je=Zc(),this.He=Zc(),this.Ye=new ut(Me),o}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new L0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ot(Me),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ot(Me),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new L0),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Zc(){return new ut(ge.comparator)}function j0(){return new ut(ge.comparator)}const ix={asc:"ASCENDING",desc:"DESCENDING"},sx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rx={and:"AND",or:"OR"};class ax{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ym(s,e){return s.useProto3Json||Bh(e)?e:{value:e}}function Sh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ab(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function ox(s,e){return Sh(s,e.toTimestamp())}function Ai(s){return Ge(!!s,49232),Ae.fromTimestamp(function(n){const r=er(n);return new st(r.seconds,r.nanos)}(s))}function Mp(s,e){return $m(s,e).canonicalString()}function $m(s,e){const n=function(o){return new it(["projects",o.projectId,"databases",o.database])}(s).child("documents");return e===void 0?n:n.child(e)}function ob(s){const e=it.fromString(s);return Ge(fb(e),10190,{key:e.toString()}),e}function Xm(s,e){return Mp(s.databaseId,e.path)}function Am(s,e){const n=ob(e);if(n.get(1)!==s.databaseId.projectId)throw new ce(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ce(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new ge(ub(n))}function lb(s,e){return Mp(s.databaseId,e)}function lx(s){const e=ob(s);return e.length===4?it.emptyPath():ub(e)}function Wm(s){return new it(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function ub(s){return Ge(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function B0(s,e,n){return{name:Xm(s,e),fields:n.value.mapValue.fields}}function ux(s,e){let n;if("targetChange"in e){e.targetChange;const r=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Te(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=function(y,T){return y.useProto3Json?(Ge(T===void 0||typeof T=="string",58123),Yt.fromBase64String(T||"")):(Ge(T===void 0||T instanceof Buffer||T instanceof Uint8Array,16193),Yt.fromUint8Array(T||new Uint8Array))}(s,e.targetChange.resumeToken),f=e.targetChange.cause,m=f&&function(y){const T=y.code===void 0?X.UNKNOWN:ib(y.code);return new ce(T,y.message||"")}(f);n=new rb(r,o,u,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=Am(s,r.document.name),u=Ai(r.document.updateTime),f=r.document.createTime?Ai(r.document.createTime):Ae.min(),m=new mn({mapValue:{fields:r.document.fields}}),g=en.newFoundDocument(o,u,f,m),y=r.targetIds||[],T=r.removedTargetIds||[];n=new ch(y,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=Am(s,r.document),u=r.readTime?Ai(r.readTime):Ae.min(),f=en.newNoDocument(o,u),m=r.removedTargetIds||[];n=new ch([],m,f.key,f)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=Am(s,r.document),u=r.removedTargetIds||[];n=new ch([],u,o,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,f=new Z2(o,u),m=r.targetId;n=new sb(m,f)}}return n}function cx(s,e){let n;if(e instanceof _u)n={update:B0(s,e.key,e.value)};else if(e instanceof Np)n={delete:Xm(s,e.key)};else if(e instanceof lr)n={update:B0(s,e.key,e.data),updateMask:vx(e.fieldMask)};else{if(!(e instanceof $2))return Te(16599,{Vt:e.type});n={verify:Xm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(u,f){const m=f.transform;if(m instanceof lu)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof yo)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof _o)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Ah)return{fieldPath:f.field.canonicalString(),increment:m.Ae};throw Te(20930,{transform:f.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(o,u){return u.updateTime!==void 0?{updateTime:ox(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Te(27497)}(s,e.precondition)),n}function hx(s,e){return s&&s.length>0?(Ge(e!==void 0,14353),s.map(n=>function(o,u){let f=o.updateTime?Ai(o.updateTime):Ai(u);return f.isEqual(Ae.min())&&(f=Ai(u)),new Q2(f,o.transformResults||[])}(n,e))):[]}function fx(s,e){return{documents:[lb(s,e.path)]}}function dx(s,e){const n={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lb(s,o);const u=function(y){if(y.length!==0)return hb(ei.create(y,"and"))}(e.filters);u&&(n.structuredQuery.where=u);const f=function(y){if(y.length!==0)return y.map(T=>function(S){return{field:so(S.field),direction:gx(S.dir)}}(T))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const m=Ym(s,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ft:n,parent:o}}function mx(s){let e=lx(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){Ge(r===1,65062);const T=n.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];n.where&&(u=function(w){const S=cb(w);return S instanceof ei&&BT(S)?S.getFilters():[S]}(n.where));let f=[];n.orderBy&&(f=function(w){return w.map(S=>function(L){return new ou(ro(L.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction))}(S))}(n.orderBy));let m=null;n.limit&&(m=function(w){let S;return S=typeof w=="object"?w.value:w,Bh(S)?null:S}(n.limit));let g=null;n.startAt&&(g=function(w){const S=!!w.before,P=w.values||[];return new wh(P,S)}(n.startAt));let y=null;return n.endAt&&(y=function(w){const S=!w.before,P=w.values||[];return new wh(P,S)}(n.endAt)),M2(e,o,f,u,m,"F",g,y)}function px(s,e){const n=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cb(s){return s.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ro(n.unaryFilter.field);return St.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=ro(n.unaryFilter.field);return St.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=ro(n.unaryFilter.field);return St.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=ro(n.unaryFilter.field);return St.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}}(s):s.fieldFilter!==void 0?function(n){return St.create(ro(n.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(n){return ei.create(n.compositeFilter.filters.map(r=>cb(r)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}}(n.compositeFilter.op))}(s):Te(30097,{filter:s})}function gx(s){return ix[s]}function yx(s){return sx[s]}function _x(s){return rx[s]}function so(s){return{fieldPath:s.canonicalString()}}function ro(s){return Kt.fromServerFormat(s.fieldPath)}function hb(s){return s instanceof St?function(n){if(n.op==="=="){if(I0(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NAN"}};if(R0(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(I0(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NOT_NAN"}};if(R0(n.value))return{unaryFilter:{field:so(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:so(n.field),op:yx(n.op),value:n.value}}}(s):s instanceof ei?function(n){const r=n.getFilters().map(o=>hb(o));return r.length===1?r[0]:{compositeFilter:{op:_x(n.op),filters:r}}}(s):Te(54877,{filter:s})}function vx(s){const e=[];return s.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fb(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n,r,o,u=Ae.min(),f=Ae.min(),m=Yt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Ks(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ks(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.yt=e}}function Tx(s){const e=mx({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Km(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(){this.Cn=new wx}addToCollectionParentIndex(e,n){return this.Cn.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(Js.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(Js.min())}updateCollectionGroup(e,n,r){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class wx{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n]||new Ot(it.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(e){const n=e.lastSegment(),r=e.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Ot(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},db=41943040;class dn{static withCacheSize(e){return new dn(e,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(db,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new vo(0)}static cr(){return new vo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="LruGarbageCollector",Ax=1048576;function H0([s,e],[n,r]){const o=Me(s,n);return o===0?Me(e,r):o}class Sx{constructor(e){this.Ir=e,this.buffer=new Ot(H0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();H0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Rx{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(q0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Io(n)?he(q0,"Ignoring IndexedDB error during garbage collection: ",n):await Ro(n)}await this.Vr(3e5)})}}class Ix{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return J.resolve(jh.ce);const r=new Sx(n);return this.mr.forEachTarget(e,o=>r.Ar(o.sequenceNumber)).next(()=>this.mr.pr(e,o=>r.Ar(o))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(z0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),z0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,o,u,f,m,g,y;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),o=this.params.maximumSequenceNumbersToCollect):o=w,f=Date.now(),this.nthSequenceNumber(e,o))).next(w=>(r=w,m=Date.now(),this.removeTargets(e,r,n))).next(w=>(u=w,g=Date.now(),this.removeOrphanedDocuments(e,r))).next(w=>(y=Date.now(),no()<=Oe.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-T}ms
	Determined least recently used ${o} in `+(m-f)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${w} documents in `+(y-g)+`ms
Total Duration: ${y-T}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:w})))}}function xx(s,e){return new Ix(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(){this.changes=new oa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?J.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,n,r,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,n))).next(o=>(r!==null&&Jl(r.mutation,o,xn.empty(),st.now()),o))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ke()){const o=Yr();return this.populateOverlays(e,o,n).next(()=>this.computeViews(e,n,o,r).next(u=>{let f=Gl();return u.forEach((m,g)=>{f=f.insert(m,g.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const r=Yr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ke()))}populateOverlays(e,n,r){const o=[];return r.forEach(u=>{n.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((f,m)=>{n.set(f,m)})})}computeViews(e,n,r,o){let u=us();const f=Zl(),m=function(){return Zl()}();return n.forEach((g,y)=>{const T=r.get(y.key);o.has(y.key)&&(T===void 0||T.mutation instanceof lr)?u=u.insert(y.key,y):T!==void 0?(f.set(y.key,T.mutation.getFieldMask()),Jl(T.mutation,y,T.mutation.getFieldMask(),st.now())):f.set(y.key,xn.empty())}),this.recalculateAndSaveOverlays(e,u).next(g=>(g.forEach((y,T)=>f.set(y,T)),n.forEach((y,T)=>m.set(y,new Nx(T,f.get(y)??null))),m))}recalculateAndSaveOverlays(e,n){const r=Zl();let o=new ut((f,m)=>f-m),u=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const m of f)m.keys().forEach(g=>{const y=n.get(g);if(y===null)return;let T=r.get(g)||xn.empty();T=m.applyToLocalView(y,T),r.set(g,T);const w=(o.get(m.batchId)||ke()).add(g);o=o.insert(m.batchId,w)})}).next(()=>{const f=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,T=g.value,w=$T();T.forEach(S=>{if(!u.has(S)){const P=tb(n.get(S),r.get(S));P!==null&&w.set(S,P),u=u.add(S)}}),f.push(this.documentOverlayCache.saveOverlays(e,y,w))}return J.waitFor(f)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,o){return function(f){return ge.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):FT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,o):this.getDocumentsMatchingCollectionQuery(e,n,r,o)}getNextDocuments(e,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,o).next(u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,o-u.size):J.resolve(Yr());let m=iu,g=u;return f.next(y=>J.forEach(y,(T,w)=>(m<w.largestBatchId&&(m=w.largestBatchId),u.get(T)?J.resolve():this.remoteDocumentCache.getEntry(e,T).next(S=>{g=g.insert(T,S)}))).next(()=>this.populateOverlays(e,y,u)).next(()=>this.computeViews(e,g,y,ke())).next(T=>({batchId:m,changes:YT(T)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next(r=>{let o=Gl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,n,r,o){const u=n.collectionGroup;let f=Gl();return this.indexManager.getCollectionParents(e,u).next(m=>J.forEach(m,g=>{const y=function(w,S){return new xo(S,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,r,o).next(T=>{T.forEach((w,S)=>{f=f.insert(w,S)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,u,o))).next(f=>{u.forEach((g,y)=>{const T=y.getKey();f.get(T)===null&&(f=f.insert(T,en.newInvalidDocument(T)))});let m=Gl();return f.forEach((g,y)=>{const T=u.get(g);T!==void 0&&Jl(T.mutation,y,xn.empty(),st.now()),Fh(n,y)&&(m=m.insert(g,y))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return J.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(o){return{id:o.id,version:o.version,createTime:Ai(o.createTime)}}(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(o){return{name:o.name,query:Tx(o.bundledQuery),readTime:Ai(o.readTime)}}(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(){this.overlays=new ut(ge.comparator),this.qr=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yr();return J.forEach(n,o=>this.getOverlay(e,o).next(u=>{u!==null&&r.set(o,u)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((o,u)=>{this.St(e,n,u)}),J.resolve()}removeOverlaysForBatchId(e,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.qr.delete(r)),J.resolve()}getOverlaysForCollection(e,n,r){const o=Yr(),u=n.length+1,f=new ge(n.child("")),m=this.overlays.getIteratorFrom(f);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return J.resolve(o)}getOverlaysForCollectionGroup(e,n,r,o){let u=new ut((y,T)=>y-T);const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let T=u.get(y.largestBatchId);T===null&&(T=Yr(),u=u.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const m=Yr(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((y,T)=>m.set(y,T)),!(m.size()>=o)););return J.resolve(m)}St(e,n,r){const o=this.overlays.get(r.key);if(o!==null){const f=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(r.key,new W2(n,r));let u=this.qr.get(n);u===void 0&&(u=ke(),this.qr.set(n,u)),this.qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(){this.Qr=new Ot(jt.$r),this.Ur=new Ot(jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new jt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new jt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ge(new it([])),r=new jt(n,e),o=new jt(n,e+1),u=[];return this.Ur.forEachInRange([r,o],f=>{this.Gr(f),u.push(f.key)}),u}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ge(new it([])),r=new jt(n,e),o=new jt(n,e+1);let u=ke();return this.Ur.forEachInRange([r,o],f=>{u=u.add(f.key)}),u}containsKey(e){const n=new jt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class jt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ge.comparator(e.key,n.key)||Me(e.Yr,n.Yr)}static Kr(e,n){return Me(e.Yr,n.Yr)||ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ot(jt.$r)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new X2(u,n,r,o);this.mutationQueue.push(f);for(const m of o)this.Zr=this.Zr.add(new jt(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return J.resolve(f)}lookupMutationBatch(e,n){return J.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,o=this.ei(r),u=o<0?0:o;return J.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?wp:this.tr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new jt(n,0),o=new jt(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],f=>{const m=this.Xr(f.Yr);u.push(m)}),J.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ot(Me);return n.forEach(o=>{const u=new jt(o,0),f=new jt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,f],m=>{r=r.add(m.Yr)})}),J.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,o=r.length+1;let u=r;ge.isDocumentKey(u)||(u=u.child(""));const f=new jt(new ge(u),0);let m=new Ot(Me);return this.Zr.forEachWhile(g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.Yr)),!0)},f),J.resolve(this.ti(m))}ti(e){const n=[];return e.forEach(r=>{const o=this.Xr(r);o!==null&&n.push(o)}),n}removeMutationBatch(e,n){Ge(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return J.forEach(n.mutations,o=>{const u=new jt(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new jt(n,0),o=this.Zr.firstAfterOrEqual(r);return J.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e){this.ri=e,this.docs=function(){return new ut(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,f=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return J.resolve(r?r.document.mutableCopy():en.newInvalidDocument(n))}getEntries(e,n){let r=us();return n.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():en.newInvalidDocument(o))}),J.resolve(r)}getDocumentsMatchingQuery(e,n,r,o){let u=us();const f=n.path,m=new ge(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:T}}=g.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||h2(c2(T),r)<=0||(o.has(T.key)||Fh(n,T))&&(u=u.insert(T.key,T.mutableCopy()))}return J.resolve(u)}getAllFromCollectionGroup(e,n,r,o){Te(9500)}ii(e,n){return J.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Ux(this)}getSize(e){return J.resolve(this.size)}}class Ux extends Cx{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)}),J.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.persistence=e,this.si=new oa(n=>Rp(n),Ip),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new kp,this.targetCount=0,this.ai=vo.ur()}forEachTarget(e,n){return this.si.forEach((r,o)=>n(o)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),J.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new vo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.Pr(n),J.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,r){let o=0;const u=[];return this.si.forEach((f,m)=>{m.sequenceNumber<=n&&r.get(m.targetId)===null&&(this.si.delete(f),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),J.waitFor(u).next(()=>o)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return J.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),J.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach(f=>{u.push(o.markPotentiallyOrphaned(e,f))}),J.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return J.resolve(r)}containsKey(e,n){return J.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e,n){this.ui={},this.overlays={},this.ci=new jh(0),this.li=!1,this.li=!0,this.hi=new kx,this.referenceDelegate=e(this),this.Pi=new Lx(this),this.indexManager=new bx,this.remoteDocumentCache=function(o){return new Px(o)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new Ex(n),this.Ii=new Ox(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Mx,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Vx(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){he("MemoryPersistence","Starting transaction:",e);const o=new jx(this.ci.next());return this.referenceDelegate.Ei(),r(o).next(u=>this.referenceDelegate.di(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ai(e,n){return J.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class jx extends d2{constructor(e){super(),this.currentSequenceNumber=e}}class Vp{constructor(e){this.persistence=e,this.Ri=new kp,this.Vi=null}static mi(e){return new Vp(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),J.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),J.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(o=>this.fi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(o=>{o.forEach(u=>this.fi.add(u.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.fi,r=>{const o=ge.fromPath(r);return this.gi(e,o).next(u=>{u||n.removeEntry(o,Ae.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return J.or([()=>J.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Rh{constructor(e,n){this.persistence=e,this.pi=new oa(r=>g2(r.path),(r,o)=>r.isEqual(o)),this.garbageCollector=xx(this,n)}static mi(e,n){return new Rh(e,n)}Ei(){}di(e){return J.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(o=>r+o))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return J.forEach(this.pi,(r,o)=>this.br(e,r,o).next(u=>u?J.resolve():n(o)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,f=>this.br(e,f,n).next(m=>{m||(r++,u.removeEntry(f,Ae.min()))})).next(()=>u.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),J.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),J.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),J.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=oh(e.data.value)),n}br(e,n,r){return J.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return J.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n,r,o){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=o}static As(e,n){let r=ke(),o=ke();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Pp(e,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return pS()?8:m2(nn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,o){const u={result:null};return this.ys(e,n).next(f=>{u.result=f}).next(()=>{if(!u.result)return this.ws(e,n,o,r).next(f=>{u.result=f})}).next(()=>{if(u.result)return;const f=new Bx;return this.Ss(e,n,f).next(m=>{if(u.result=m,this.Vs)return this.bs(e,n,f,m.size)})}).next(()=>u.result)}bs(e,n,r,o){return r.documentReadCount<this.fs?(no()<=Oe.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",io(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),J.resolve()):(no()<=Oe.DEBUG&&he("QueryEngine","Query:",io(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(no()<=Oe.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",io(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wi(n))):J.resolve())}ys(e,n){if(D0(n))return J.resolve(null);let r=wi(n);return this.indexManager.getIndexType(e,r).next(o=>o===0?null:(n.limit!==null&&o===1&&(n=Km(n,null,"F"),r=wi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const f=ke(...u);return this.ps.getDocuments(e,f).next(m=>this.indexManager.getMinOffset(e,r).next(g=>{const y=this.Ds(n,m);return this.Cs(n,y,f,g.readTime)?this.ys(e,Km(n,null,"F")):this.vs(e,y,n,g)}))})))}ws(e,n,r,o){return D0(n)||o.isEqual(Ae.min())?J.resolve(null):this.ps.getDocuments(e,r).next(u=>{const f=this.Ds(n,u);return this.Cs(n,f,r,o)?J.resolve(null):(no()<=Oe.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),io(n)),this.vs(e,f,n,u2(o,iu)).next(m=>m))})}Ds(e,n){let r=new Ot(QT(e));return n.forEach((o,u)=>{Fh(e,u)&&(r=r.add(u))}),r}Cs(e,n,r,o){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,n,r){return no()<=Oe.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",io(n)),this.ps.getDocumentsMatchingQuery(e,n,Js.min(),r)}vs(e,n,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next(u=>(n.forEach(f=>{u=u.insert(f.key,f)}),u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up="LocalStore",qx=3e8;class Hx{constructor(e,n,r,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new ut(Me),this.xs=new oa(u=>Rp(u),Ip),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Dx(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Fx(s,e,n,r){return new Hx(s,e,n,r)}async function pb(s,e){const n=Se(s);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(u=>{const f=[],m=[];let g=ke();for(const y of o){f.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}for(const y of u){m.push(y.batchId);for(const T of y.mutations)g=g.add(T.key)}return n.localDocuments.getDocuments(r,g).next(y=>({Ls:y,removedBatchIds:f,addedBatchIds:m}))})})}function Gx(s,e){const n=Se(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return function(m,g,y,T){const w=y.batch,S=w.keys();let P=J.resolve();return S.forEach(L=>{P=P.next(()=>T.getEntry(g,L)).next(K=>{const F=y.docVersions.get(L);Ge(F!==null,48541),K.version.compareTo(F)<0&&(w.applyToRemoteDocument(K,y),K.isValidDocument()&&(K.setReadTime(y.commitVersion),T.addEntry(K)))})}),P.next(()=>m.mutationQueue.removeMutationBatch(g,w))}(n,r,e,u).next(()=>u.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(m){let g=ke();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g}(e))).next(()=>n.localDocuments.getDocuments(r,o))})}function gb(s){const e=Se(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Qx(s,e){const n=Se(s),r=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];e.targetChanges.forEach((T,w)=>{const S=o.get(w);if(!S)return;m.push(n.Pi.removeMatchingKeys(u,T.removedDocuments,w).next(()=>n.Pi.addMatchingKeys(u,T.addedDocuments,w)));let P=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(w)!==null?P=P.withResumeToken(Yt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):T.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(T.resumeToken,r)),o=o.insert(w,P),function(K,F,te){return K.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=qx?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0}(S,P,T)&&m.push(n.Pi.updateTargetData(u,P))});let g=us(),y=ke();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,T))}),m.push(Kx(u,f,e.documentUpdates).next(T=>{g=T.ks,y=T.qs})),!r.isEqual(Ae.min())){const T=n.Pi.getLastRemoteSnapshotVersion(u).next(w=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(T)}return J.waitFor(m).next(()=>f.apply(u)).next(()=>n.localDocuments.getLocalViewOfDocuments(u,g,y)).next(()=>g)}).then(u=>(n.Ms=o,u))}function Kx(s,e,n){let r=ke(),o=ke();return n.forEach(u=>r=r.add(u)),e.getEntries(s,r).next(u=>{let f=us();return n.forEach((m,g)=>{const y=u.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Ae.min())?(e.removeEntry(m,g.readTime),f=f.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),f=f.insert(m,g)):he(Up,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)}),{ks:f,qs:o}})}function Yx(s,e){const n=Se(s);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=wp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $x(s,e){const n=Se(s);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return n.Pi.getTargetData(r,e).next(u=>u?(o=u,J.resolve(o)):n.Pi.allocateTargetId(r).next(f=>(o=new Ks(e,f,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Zm(s,e,n){const r=Se(s),o=r.Ms.get(e),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,f=>r.persistence.referenceDelegate.removeTarget(f,o))}catch(f){if(!Io(f))throw f;he(Up,`Failed to update sequence numbers for target ${e}: ${f}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function F0(s,e,n){const r=Se(s);let o=Ae.min(),u=ke();return r.persistence.runTransaction("Execute query","readwrite",f=>function(g,y,T){const w=Se(g),S=w.xs.get(T);return S!==void 0?J.resolve(w.Ms.get(S)):w.Pi.getTargetData(y,T)}(r,f,wi(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(f,m.targetId).next(g=>{u=g})}).next(()=>r.Fs.getDocumentsMatchingQuery(f,e,n?o:Ae.min(),n?u:ke())).next(m=>(Xx(r,V2(e),m),{documents:m,Qs:u})))}function Xx(s,e,n){let r=s.Os.get(e)||Ae.min();n.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),s.Os.set(e,r)}class G0{constructor(){this.activeTargetIds=z2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Wx{constructor(){this.Mo=new G0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new G0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="ConnectivityMonitor";class K0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(Q0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(Q0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jc=null;function Jm(){return Jc===null?Jc=function(){return 268435456+Math.round(2147483648*Math.random())}():Jc++,"0x"+Jc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="RestConnection",Jx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Th?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,n,r,o,u){const f=Jm(),m=this.zo(e,n.toUriEncodedString());he(Sm,`Sending RPC '${e}' ${f}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:y}=new URL(m),T=rr(y);return this.Jo(e,m,g,r,T).then(w=>(he(Sm,`Received RPC '${e}' ${f}: `,w),w),w=>{throw fo(Sm,`RPC '${e}' ${f} failed with error: `,w,"url: ",m,"request:",r),w})}Ho(e,n,r,o,u,f){return this.Go(e,n,r,o,u)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+So}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}zo(e,n){const r=Jx[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt="WebChannelConnection";class nC extends eC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,o,u){const f=Jm();return new Promise((m,g)=>{const y=new vT;y.setWithCredentials(!0),y.listenOnce(ET.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case ah.NO_ERROR:const w=y.getResponseJson();he(Zt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(w)),m(w);break;case ah.TIMEOUT:he(Zt,`RPC '${e}' ${f} timed out`),g(new ce(X.DEADLINE_EXCEEDED,"Request time out"));break;case ah.HTTP_ERROR:const S=y.getStatus();if(he(Zt,`RPC '${e}' ${f} failed with status:`,S,"response text:",y.getResponseText()),S>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const L=P==null?void 0:P.error;if(L&&L.status&&L.message){const K=function(te){const ie=te.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(ie)>=0?ie:X.UNKNOWN}(L.status);g(new ce(K,L.message))}else g(new ce(X.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ce(X.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{he(Zt,`RPC '${e}' ${f} completed.`)}});const T=JSON.stringify(o);he(Zt,`RPC '${e}' ${f} sending request:`,o),y.send(n,"POST",T,r,15)})}T_(e,n,r){const o=Jm(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=wT(),m=bT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const T=u.join("");he(Zt,`Creating RPC '${e}' stream ${o}: ${T}`,g);const w=f.createWebChannel(T,g);this.I_(w);let S=!1,P=!1;const L=new tC({Yo:F=>{P?he(Zt,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(S||(he(Zt,`Opening RPC '${e}' stream ${o} transport.`),w.open(),S=!0),he(Zt,`RPC '${e}' stream ${o} sending:`,F),w.send(F))},Zo:()=>w.close()}),K=(F,te,ie)=>{F.listen(te,re=>{try{ie(re)}catch(se){setTimeout(()=>{throw se},0)}})};return K(w,Fl.EventType.OPEN,()=>{P||(he(Zt,`RPC '${e}' stream ${o} transport opened.`),L.o_())}),K(w,Fl.EventType.CLOSE,()=>{P||(P=!0,he(Zt,`RPC '${e}' stream ${o} transport closed`),L.a_(),this.E_(w))}),K(w,Fl.EventType.ERROR,F=>{P||(P=!0,fo(Zt,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),L.a_(new ce(X.UNAVAILABLE,"The operation could not be completed")))}),K(w,Fl.EventType.MESSAGE,F=>{var te;if(!P){const ie=F.data[0];Ge(!!ie,16349);const re=ie,se=(re==null?void 0:re.error)||((te=re[0])==null?void 0:te.error);if(se){he(Zt,`RPC '${e}' stream ${o} received error:`,se);const W=se.status;let fe=function(I){const O=At[I];if(O!==void 0)return ib(O)}(W),C=se.message;fe===void 0&&(fe=X.INTERNAL,C="Unknown error status: "+W+" with message "+se.message),P=!0,L.a_(new ce(fe,C)),w.close()}else he(Zt,`RPC '${e}' stream ${o} received:`,ie),L.u_(ie)}}),K(m,TT.STAT_EVENT,F=>{F.stat===Bm.PROXY?he(Zt,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===Bm.NOPROXY&&he(Zt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{L.__()},0),L}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(s){return new ax(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n,r=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="PersistentStream";class _b{constructor(e,n,r,o,u,f,m,g){this.Mi=e,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new yb(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(ls(n.toString()),ls("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.D_===n&&this.G_(r,o)},r=>{e(()=>{const o=new ce(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(o=>{r(()=>this.z_(o))}),this.stream.onMessage(o=>{r(()=>++this.F_==1?this.J_(o):this.onNext(o))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return he(Y0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(he(Y0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iC extends _b{constructor(e,n,r,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ux(this.serializer,e),r=function(u){if(!("targetChange"in u))return Ae.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ae.min():f.readTime?Ai(f.readTime):Ae.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Wm(this.serializer),n.addTarget=function(u,f){let m;const g=f.target;if(m=Gm(g)?{documents:fx(u,g)}:{query:dx(u,g).ft},m.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){m.resumeToken=ab(u,f.resumeToken);const y=Ym(u,f.expectedCount);y!==null&&(m.expectedCount=y)}else if(f.snapshotVersion.compareTo(Ae.min())>0){m.readTime=Sh(u,f.snapshotVersion.toTimestamp());const y=Ym(u,f.expectedCount);y!==null&&(m.expectedCount=y)}return m}(this.serializer,e);const r=px(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Wm(this.serializer),n.removeTarget=e,this.q_(n)}}class sC extends _b{constructor(e,n,r,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,f),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=hx(e.writeResults,e.commitTime),r=Ai(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Wm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>cx(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{}class aC extends rC{constructor(e,n,r,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ce(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.Go(e,$m(n,r),o,u,f)).catch(u=>{throw u.name==="FirebaseError"?(u.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce(X.UNKNOWN,u.toString())})}Ho(e,n,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,m])=>this.connection.Ho(e,$m(n,r),o,f,m,u)).catch(f=>{throw f.name==="FirebaseError"?(f.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ce(X.UNKNOWN,f.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class oC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ls(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="RemoteStore";class lC{constructor(e,n,r,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo(f=>{r.enqueueAndForget(async()=>{la(this)&&(he(na,"Restarting streams for network reachability change."),await async function(g){const y=Se(g);y.Ea.add(4),await Eu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await $h(y)}(this))})}),this.Ra=new oC(r,o)}}async function $h(s){if(la(s))for(const e of s.da)await e(!0)}async function Eu(s){for(const e of s.da)await e(!1)}function vb(s,e){const n=Se(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),zp(n)?Bp(n):Co(n).O_()&&jp(n,e))}function Lp(s,e){const n=Se(s),r=Co(n);n.Ia.delete(e),r.O_()&&Eb(n,e),n.Ia.size===0&&(r.O_()?r.L_():la(n)&&n.Ra.set("Unknown"))}function jp(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Co(s).Y_(e)}function Eb(s,e){s.Va.Ue(e),Co(s).Z_(e)}function Bp(s){s.Va=new nx({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Co(s).start(),s.Ra.ua()}function zp(s){return la(s)&&!Co(s).x_()&&s.Ia.size>0}function la(s){return Se(s).Ea.size===0}function Tb(s){s.Va=void 0}async function uC(s){s.Ra.set("Online")}async function cC(s){s.Ia.forEach((e,n)=>{jp(s,e)})}async function hC(s,e){Tb(s),zp(s)?(s.Ra.ha(e),Bp(s)):s.Ra.set("Unknown")}async function fC(s,e,n){if(s.Ra.set("Online"),e instanceof rb&&e.state===2&&e.cause)try{await async function(o,u){const f=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,f),o.Ia.delete(m),o.Va.removeTarget(m))}(s,e)}catch(r){he(na,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ih(s,r)}else if(e instanceof ch?s.Va.Ze(e):e instanceof sb?s.Va.st(e):s.Va.tt(e),!n.isEqual(Ae.min()))try{const r=await gb(s.localStore);n.compareTo(r)>=0&&await function(u,f){const m=u.Va.Tt(f);return m.targetChanges.forEach((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const T=u.Ia.get(y);T&&u.Ia.set(y,T.withResumeToken(g.resumeToken,f))}}),m.targetMismatches.forEach((g,y)=>{const T=u.Ia.get(g);if(!T)return;u.Ia.set(g,T.withResumeToken(Yt.EMPTY_BYTE_STRING,T.snapshotVersion)),Eb(u,g);const w=new Ks(T.target,g,y,T.sequenceNumber);jp(u,w)}),u.remoteSyncer.applyRemoteEvent(m)}(s,n)}catch(r){he(na,"Failed to raise snapshot:",r),await Ih(s,r)}}async function Ih(s,e,n){if(!Io(e))throw e;s.Ea.add(1),await Eu(s),s.Ra.set("Offline"),n||(n=()=>gb(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{he(na,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await $h(s)})}function bb(s,e){return e().catch(n=>Ih(s,n,e))}async function Xh(s){const e=Se(s),n=ir(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wp;for(;dC(e);)try{const o=await Yx(e.localStore,r);if(o===null){e.Ta.length===0&&n.L_();break}r=o.batchId,mC(e,o)}catch(o){await Ih(e,o)}wb(e)&&Ab(e)}function dC(s){return la(s)&&s.Ta.length<10}function mC(s,e){s.Ta.push(e);const n=ir(s);n.O_()&&n.X_&&n.ea(e.mutations)}function wb(s){return la(s)&&!ir(s).x_()&&s.Ta.length>0}function Ab(s){ir(s).start()}async function pC(s){ir(s).ra()}async function gC(s){const e=ir(s);for(const n of s.Ta)e.ea(n.mutations)}async function yC(s,e,n){const r=s.Ta.shift(),o=Dp.from(r,e,n);await bb(s,()=>s.remoteSyncer.applySuccessfulWrite(o)),await Xh(s)}async function _C(s,e){e&&ir(s).X_&&await async function(r,o){if(function(f){return J2(f)&&f!==X.ABORTED}(o.code)){const u=r.Ta.shift();ir(r).B_(),await bb(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o)),await Xh(r)}}(s,e),wb(s)&&Ab(s)}async function $0(s,e){const n=Se(s);n.asyncQueue.verifyOperationInProgress(),he(na,"RemoteStore received new credentials");const r=la(n);n.Ea.add(3),await Eu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await $h(n)}async function vC(s,e){const n=Se(s);e?(n.Ea.delete(2),await $h(n)):e||(n.Ea.add(2),await Eu(n),n.Ra.set("Unknown"))}function Co(s){return s.ma||(s.ma=function(n,r,o){const u=Se(n);return u.sa(),new iC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{Xo:uC.bind(null,s),t_:cC.bind(null,s),r_:hC.bind(null,s),H_:fC.bind(null,s)}),s.da.push(async e=>{e?(s.ma.B_(),zp(s)?Bp(s):s.Ra.set("Unknown")):(await s.ma.stop(),Tb(s))})),s.ma}function ir(s){return s.fa||(s.fa=function(n,r,o){const u=Se(n);return u.sa(),new sC(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)}(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:pC.bind(null,s),r_:_C.bind(null,s),ta:gC.bind(null,s),na:yC.bind(null,s)}),s.da.push(async e=>{e?(s.fa.B_(),await Xh(s)):(await s.fa.stop(),s.Ta.length>0&&(he(na,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))})),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n,r,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new ss,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,o,u){const f=Date.now()+r,m=new qp(e,n,f,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hp(s,e){if(ls("AsyncQueue",`${e}: ${s}`),Io(s))return new ce(X.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{static emptySet(e){return new co(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ge.comparator(n.key,r.key):(n,r)=>ge.comparator(n.key,r.key),this.keyedMap=Gl(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new co;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this.ga=new ut(ge.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Eo{constructor(e,n,r,o,u,f,m,g,y){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,r,o,u){const f=[];return n.forEach(m=>{f.push({type:0,doc:m})}),new Eo(e,n,co.emptySet(n),f,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class TC{constructor(){this.queries=W0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Se(n),u=o.queries;o.queries=W0(),u.forEach((f,m)=>{for(const g of m.Sa)g.onError(r)})})(this,new ce(X.ABORTED,"Firestore shutting down"))}}function W0(){return new oa(s=>GT(s),Hh)}async function Fp(s,e){const n=Se(s);let r=3;const o=e.query;let u=n.queries.get(o);u?!u.ba()&&e.Da()&&(r=2):(u=new EC,r=e.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const m=Hp(f,`Initialization of query '${io(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.Sa.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Qp(n)}async function Gp(s,e){const n=Se(s),r=e.query;let o=3;const u=n.queries.get(r);if(u){const f=u.Sa.indexOf(e);f>=0&&(u.Sa.splice(f,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function bC(s,e){const n=Se(s);let r=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const m of f.Sa)m.Fa(o)&&(r=!0);f.wa=o}}r&&Qp(n)}function wC(s,e,n){const r=Se(s),o=r.queries.get(e);if(o)for(const u of o.Sa)u.onError(n);r.queries.delete(e)}function Qp(s){s.Ca.forEach(e=>{e.next()})}var ep,Z0;(Z0=ep||(ep={})).Ma="default",Z0.Cache="cache";class Kp{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Eo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ep.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e){this.key=e}}class Rb{constructor(e){this.key=e}}class AC{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ke(),this.mutatedKeys=ke(),this.eu=QT(e),this.tu=new co(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new X0,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((T,w)=>{const S=o.get(T),P=Fh(this.query,w)?w:null,L=!!S&&this.mutatedKeys.has(S.key),K=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let F=!1;S&&P?S.data.isEqual(P.data)?L!==K&&(r.track({type:3,doc:P}),F=!0):this.su(S,P)||(r.track({type:2,doc:P}),F=!0,(g&&this.eu(P,g)>0||y&&this.eu(P,y)<0)&&(m=!0)):!S&&P?(r.track({type:0,doc:P}),F=!0):S&&!P&&(r.track({type:1,doc:S}),F=!0,(g||y)&&(m=!0)),F&&(P?(f=f.add(P),u=K?u.add(T):u.delete(T)):(f=f.delete(T),u=u.delete(T)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const T=this.query.limitType==="F"?f.last():f.first();f=f.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{tu:f,iu:r,Cs:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort((T,w)=>function(P,L){const K=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:F})}};return K(P)-K(L)}(T.type,w.type)||this.eu(T.doc,w.doc)),this.ou(r),o=o??!1;const m=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,f.length!==0||y?{snapshot:new Eo(this.query,e.tu,u,f,e.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new X0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ke(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Rb(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Sb(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ke();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Eo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Yp="SyncEngine";class SC{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class RC{constructor(e){this.key=e,this.hu=!1}}class IC{constructor(e,n,r,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new oa(m=>GT(m),Hh),this.Iu=new Map,this.Eu=new Set,this.du=new ut(ge.comparator),this.Au=new Map,this.Ru=new kp,this.Vu={},this.mu=new Map,this.fu=vo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function xC(s,e,n=!0){const r=Ob(s);let o;const u=r.Tu.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await Ib(r,e,n,!0),o}async function CC(s,e){const n=Ob(s);await Ib(n,e,!0,!1)}async function Ib(s,e,n,r){const o=await $x(s.localStore,wi(e)),u=o.targetId,f=s.sharedClientState.addLocalQueryTarget(u,n);let m;return r&&(m=await NC(s,e,u,f==="current",o.resumeToken)),s.isPrimaryClient&&n&&vb(s.remoteStore,o),m}async function NC(s,e,n,r,o){s.pu=(w,S,P)=>async function(K,F,te,ie){let re=F.view.ru(te);re.Cs&&(re=await F0(K.localStore,F.query,!1).then(({documents:C})=>F.view.ru(C,re)));const se=ie&&ie.targetChanges.get(F.targetId),W=ie&&ie.targetMismatches.get(F.targetId)!=null,fe=F.view.applyChanges(re,K.isPrimaryClient,se,W);return eE(K,F.targetId,fe.au),fe.snapshot}(s,w,S,P);const u=await F0(s.localStore,e,!0),f=new AC(e,u.Qs),m=f.ru(u.documents),g=vu.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),y=f.applyChanges(m,s.isPrimaryClient,g);eE(s,n,y.au);const T=new SC(e,n,f);return s.Tu.set(e,T),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function DC(s,e,n){const r=Se(s),o=r.Tu.get(e),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter(f=>!Hh(f,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Zm(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),n&&Lp(r.remoteStore,o.targetId),tp(r,o.targetId)}).catch(Ro)):(tp(r,o.targetId),await Zm(r.localStore,o.targetId,!0))}async function OC(s,e){const n=Se(s),r=n.Tu.get(e),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Lp(n.remoteStore,r.targetId))}async function MC(s,e,n){const r=BC(s);try{const o=await function(f,m){const g=Se(f),y=st.now(),T=m.reduce((P,L)=>P.add(L.key),ke());let w,S;return g.persistence.runTransaction("Locally write mutations","readwrite",P=>{let L=us(),K=ke();return g.Ns.getEntries(P,T).next(F=>{L=F,L.forEach((te,ie)=>{ie.isValidDocument()||(K=K.add(te))})}).next(()=>g.localDocuments.getOverlayedDocuments(P,L)).next(F=>{w=F;const te=[];for(const ie of m){const re=Y2(ie,w.get(ie.key).overlayedDocument);re!=null&&te.push(new lr(ie.key,re,UT(re.value.mapValue),Fn.exists(!0)))}return g.mutationQueue.addMutationBatch(P,y,te,m)}).next(F=>{S=F;const te=F.applyToLocalDocumentSet(w,K);return g.documentOverlayCache.saveOverlays(P,F.batchId,te)})}).then(()=>({batchId:S.batchId,changes:YT(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(f,m,g){let y=f.Vu[f.currentUser.toKey()];y||(y=new ut(Me)),y=y.insert(m,g),f.Vu[f.currentUser.toKey()]=y}(r,o.batchId,n),await Tu(r,o.changes),await Xh(r.remoteStore)}catch(o){const u=Hp(o,"Failed to persist write");n.reject(u)}}async function xb(s,e){const n=Se(s);try{const r=await Qx(n.localStore,e);e.targetChanges.forEach((o,u)=>{const f=n.Au.get(u);f&&(Ge(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Ge(f.hu,14607):o.removedDocuments.size>0&&(Ge(f.hu,42227),f.hu=!1))}),await Tu(n,r,e)}catch(r){await Ro(r)}}function J0(s,e,n){const r=Se(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach((u,f)=>{const m=f.view.va(e);m.snapshot&&o.push(m.snapshot)}),function(f,m){const g=Se(f);g.onlineState=m;let y=!1;g.queries.forEach((T,w)=>{for(const S of w.Sa)S.va(m)&&(y=!0)}),y&&Qp(g)}(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function kC(s,e,n){const r=Se(s);r.sharedClientState.updateQueryState(e,"rejected",n);const o=r.Au.get(e),u=o&&o.key;if(u){let f=new ut(ge.comparator);f=f.insert(u,en.newNoDocument(u,Ae.min()));const m=ke().add(u),g=new Kh(Ae.min(),new Map,new ut(Me),f,m);await xb(r,g),r.du=r.du.remove(u),r.Au.delete(e),$p(r)}else await Zm(r.localStore,e,!1).then(()=>tp(r,e,n)).catch(Ro)}async function VC(s,e){const n=Se(s),r=e.batch.batchId;try{const o=await Gx(n.localStore,e);Nb(n,r,null),Cb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Tu(n,o)}catch(o){await Ro(o)}}async function PC(s,e,n){const r=Se(s);try{const o=await function(f,m){const g=Se(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let T;return g.mutationQueue.lookupMutationBatch(y,m).next(w=>(Ge(w!==null,37113),T=w.keys(),g.mutationQueue.removeMutationBatch(y,w))).next(()=>g.mutationQueue.performConsistencyCheck(y)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(y,T,m)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,T)).next(()=>g.localDocuments.getDocuments(y,T))})}(r.localStore,e);Nb(r,e,n),Cb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Tu(r,o)}catch(o){await Ro(o)}}function Cb(s,e){(s.mu.get(e)||[]).forEach(n=>{n.resolve()}),s.mu.delete(e)}function Nb(s,e,n){const r=Se(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function tp(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const r of s.Iu.get(e))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach(r=>{s.Ru.containsKey(r)||Db(s,r)})}function Db(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(Lp(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),$p(s))}function eE(s,e,n){for(const r of n)r instanceof Sb?(s.Ru.addReference(r.key,e),UC(s,r)):r instanceof Rb?(he(Yp,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,e),s.Ru.containsKey(r.key)||Db(s,r.key)):Te(19791,{wu:r})}function UC(s,e){const n=e.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(he(Yp,"New document in limbo: "+n),s.Eu.add(r),$p(s))}function $p(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new ge(it.fromString(e)),r=s.fu.next();s.Au.set(r,new RC(n)),s.du=s.du.insert(n,r),vb(s.remoteStore,new Ks(wi(qh(n.path)),r,"TargetPurposeLimboResolution",jh.ce))}}async function Tu(s,e,n){const r=Se(s),o=[],u=[],f=[];r.Tu.isEmpty()||(r.Tu.forEach((m,g)=>{f.push(r.pu(g,e,n).then(y=>{var T;if((y||n)&&r.isPrimaryClient){const w=y?!y.fromCache:(T=n==null?void 0:n.targetChanges.get(g.targetId))==null?void 0:T.current;r.sharedClientState.updateQueryState(g.targetId,w?"current":"not-current")}if(y){o.push(y);const w=Pp.As(g.targetId,y);u.push(w)}}))}),await Promise.all(f),r.Pu.H_(o),await async function(g,y){const T=Se(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>J.forEach(y,S=>J.forEach(S.Es,P=>T.persistence.referenceDelegate.addReference(w,S.targetId,P)).next(()=>J.forEach(S.ds,P=>T.persistence.referenceDelegate.removeReference(w,S.targetId,P)))))}catch(w){if(!Io(w))throw w;he(Up,"Failed to update sequence numbers: "+w)}for(const w of y){const S=w.targetId;if(!w.fromCache){const P=T.Ms.get(S),L=P.snapshotVersion,K=P.withLastLimboFreeSnapshotVersion(L);T.Ms=T.Ms.insert(S,K)}}}(r.localStore,u))}async function LC(s,e){const n=Se(s);if(!n.currentUser.isEqual(e)){he(Yp,"User change. New user:",e.toKey());const r=await pb(n.localStore,e);n.currentUser=e,function(u,f){u.mu.forEach(m=>{m.forEach(g=>{g.reject(new ce(X.CANCELLED,f))})}),u.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Tu(n,r.Ls)}}function jC(s,e){const n=Se(s),r=n.Au.get(e);if(r&&r.hu)return ke().add(r.key);{let o=ke();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const m=n.Tu.get(f);o=o.unionWith(m.view.nu)}return o}}function Ob(s){const e=Se(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=xb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kC.bind(null,e),e.Pu.H_=bC.bind(null,e.eventManager),e.Pu.yu=wC.bind(null,e.eventManager),e}function BC(s){const e=Se(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=VC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PC.bind(null,e),e}class xh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yh(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Fx(this.persistence,new zx,e.initialUser,this.serializer)}Cu(e){return new mb(Vp.mi,this.serializer)}Du(e){return new Wx}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xh.provider={build:()=>new xh};class zC extends xh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ge(this.persistence.referenceDelegate instanceof Rh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Rx(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new mb(r=>Rh.mi(r,n),this.serializer)}}class np{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>J0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=LC.bind(null,this.syncEngine),await vC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TC}()}createDatastore(e){const n=Yh(e.databaseInfo.databaseId),r=function(u){return new nC(u)}(e.databaseInfo);return function(u,f,m,g){return new aC(u,f,m,g)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,o,u,f,m){return new lC(r,o,u,f,m)}(this.localStore,this.datastore,e.asyncQueue,n=>J0(this.syncEngine,n,0),function(){return K0.v()?new K0:new Zx}())}createSyncEngine(e,n){return function(o,u,f,m,g,y,T){const w=new IC(o,u,f,m,g,y);return T&&(w.gu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(o){const u=Se(o);he(na,"RemoteStore shutting down."),u.Ea.add(5),await Eu(u),u.Aa.shutdown(),u.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}np.provider={build:()=>new np};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ls("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr="FirestoreClient";class qC{constructor(e,n,r,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=Jt.UNAUTHENTICATED,this.clientId=bp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,async f=>{he(sr,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(r,f=>(he(sr,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ss;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Hp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Im(s,e){s.asyncQueue.verifyOperationInProgress(),he(sr,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let r=n.initialUser;s.setCredentialChangeListener(async o=>{r.isEqual(o)||(await pb(e.localStore,o),r=o)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function tE(s,e){s.asyncQueue.verifyOperationInProgress();const n=await HC(s);he(sr,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener(r=>$0(e.remoteStore,r)),s.setAppCheckTokenChangeListener((r,o)=>$0(e.remoteStore,o)),s._onlineComponents=e}async function HC(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){he(sr,"Using user provided OfflineComponentProvider");try{await Im(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(n))throw n;fo("Error using user provided cache. Falling back to memory cache: "+n),await Im(s,new xh)}}else he(sr,"Using default OfflineComponentProvider"),await Im(s,new zC(void 0));return s._offlineComponents}async function Mb(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(he(sr,"Using user provided OnlineComponentProvider"),await tE(s,s._uninitializedComponentsProvider._online)):(he(sr,"Using default OnlineComponentProvider"),await tE(s,new np))),s._onlineComponents}function FC(s){return Mb(s).then(e=>e.syncEngine)}async function Ch(s){const e=await Mb(s),n=e.eventManager;return n.onListen=xC.bind(null,e.syncEngine),n.onUnlisten=DC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=OC.bind(null,e.syncEngine),n}function GC(s,e,n={}){const r=new ss;return s.asyncQueue.enqueueAndForget(async()=>function(u,f,m,g,y){const T=new Xp({next:S=>{T.Nu(),f.enqueueAndForget(()=>Gp(u,w));const P=S.docs.has(m);!P&&S.fromCache?y.reject(new ce(X.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&g&&g.source==="server"?y.reject(new ce(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),w=new Kp(qh(m.path),T,{includeMetadataChanges:!0,qa:!0});return Fp(u,w)}(await Ch(s),s.asyncQueue,e,n,r)),r.promise}function QC(s,e,n={}){const r=new ss;return s.asyncQueue.enqueueAndForget(async()=>function(u,f,m,g,y){const T=new Xp({next:S=>{T.Nu(),f.enqueueAndForget(()=>Gp(u,w)),S.fromCache&&g.source==="server"?y.reject(new ce(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),w=new Kp(m,T,{includeMetadataChanges:!0,qa:!0});return Fp(u,w)}(await Ch(s),s.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb="firestore.googleapis.com",iE=!0;class sE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vb,this.ssl=iE}else this.host=e.host,this.ssl=e.ssl??iE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=db;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ax)throw new ce(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}l2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kb(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ce(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,o){return r.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wh{constructor(e,n,r,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ZI;switch(r.type){case"firstParty":return new n2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=nE.get(n);r&&(he("ComponentProvider","Removing Datastore"),nE.delete(n),r.terminate())}(this),Promise.resolve()}}function KC(s,e,n,r={}){var y;s=pn(s,Wh);const o=rr(e),u=s._getSettings(),f={...u,emulatorOptions:s._getEmulatorOptions()},m=`${e}:${n}`;o&&(lp(`https://${m}`),up("Firestore",!0)),u.host!==Vb&&u.host!==m&&fo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:r};if(!rs(g,f)&&(s._setSettings(g),r.mockUserToken)){let T,w;if(typeof r.mockUserToken=="string")T=r.mockUserToken,w=Jt.MOCK_USER;else{T=OE(r.mockUserToken,(y=s._app)==null?void 0:y.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new ce(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Jt(S)}s._authCredentials=new JI(new ST(T,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ur(this.firestore,e,this._query)}}class dt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}toJSON(){return{type:dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(yu(n,dt._jsonSchema))return new dt(e,r||null,new ge(it.fromString(n.referencePath)))}}dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:Rt("string",dt._jsonSchemaVersion),referencePath:Rt("string")};class Ws extends ur{constructor(e,n,r){super(e,n,qh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new ge(e))}withConverter(e){return new Ws(this.firestore,e,this._path)}}function Gn(s,e,...n){if(s=ot(s),RT("collection","path",e),s instanceof Wh){const r=it.fromString(e,...n);return y0(r),new Ws(s,null,r)}{if(!(s instanceof dt||s instanceof Ws))throw new ce(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(it.fromString(e,...n));return y0(r),new Ws(s.firestore,null,r)}}function sn(s,e,...n){if(s=ot(s),arguments.length===1&&(e=bp.newId()),RT("doc","path",e),s instanceof Wh){const r=it.fromString(e,...n);return g0(r),new dt(s,null,new ge(r))}{if(!(s instanceof dt||s instanceof Ws))throw new ce(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(it.fromString(e,...n));return g0(r),new dt(s.firestore,s instanceof Ws?s.converter:null,new ge(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="AsyncQueue";class aE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new yb(this,"async_queue_retry"),this._c=()=>{const r=Rm();r&&he(rE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Rm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Rm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ss;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Io(e))throw e;he(rE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ls("INTERNAL UNHANDLED ERROR: ",oE(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=qp.createAndSchedule(this,e,n,r,u=>this.hc(u));return this.tc.push(o),o}uc(){this.nc&&Te(47125,{Pc:oE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function oE(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(s){return function(n,r){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1}(s,["next","error","complete"])}class cs extends Wh{constructor(e,n,r,o){super(e,n,r,o),this.type="firestore",this._queue=new aE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new aE(e),this._firestoreClient=void 0,await e}}}function YC(s,e){const n=typeof s=="object"?s:fp(),r=typeof s=="string"?s:Th,o=kh(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=CE("firestore");u&&KC(o,...u)}return o}function Zh(s){if(s._terminated)throw new ce(X.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||$C(s),s._firestoreClient}function $C(s){var r,o,u;const e=s._freezeSettings(),n=function(m,g,y,T){return new v2(m,g,y,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,kb(T.experimentalLongPollingOptions),T.useFetchStreams,T.isUsingEmulator)}(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,e);s._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new qC(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hn(Yt.fromBase64String(e))}catch(n){throw new ce(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Hn(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yu(e,Hn._jsonSchema))return Hn.fromBase64String(e.bytes)}}Hn._jsonSchemaVersion="firestore/bytes/1.0",Hn._jsonSchema={type:Rt("string",Hn._jsonSchemaVersion),bytes:Rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Si._jsonSchemaVersion}}static fromJSON(e){if(yu(e,Si._jsonSchema))return new Si(e.latitude,e.longitude)}}Si._jsonSchemaVersion="firestore/geoPoint/1.0",Si._jsonSchema={type:Rt("string",Si._jsonSchemaVersion),latitude:Rt("number"),longitude:Rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ri._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yu(e,Ri._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ri(e.vectorValues);throw new ce(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ri._jsonSchemaVersion="firestore/vectorValue/1.0",Ri._jsonSchema={type:Rt("string",Ri._jsonSchemaVersion),vectorValues:Rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=/^__.*__$/;class WC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new _u(e,this.data,n,this.fieldTransforms)}}class Pb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new lr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ub(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:s})}}class ef{constructor(e,n,r,o,u,f){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ef({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var o;const n=(o=this.path)==null?void 0:o.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Nh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Ub(this.Ac)&&XC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ZC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Yh(e)}Cc(e,n,r,o=!1){return new ef({Ac:e,methodName:n,Dc:r,path:Kt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tf(s){const e=s._freezeSettings(),n=Yh(s._databaseId);return new ZC(s._databaseId,!!e.ignoreUndefinedProperties,n)}function Lb(s,e,n,r,o,u={}){const f=s.Cc(u.merge||u.mergeFields?2:0,e,n,o);eg("Data must be an object, but it was:",f,r);const m=Bb(r,f);let g,y;if(u.merge)g=new xn(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const T=[];for(const w of u.mergeFields){const S=ip(e,w,n);if(!f.contains(S))throw new ce(X.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);qb(T,S)||T.push(S)}g=new xn(T),y=f.fieldTransforms.filter(w=>g.covers(w.field))}else g=null,y=f.fieldTransforms;return new WC(new mn(m),g,y)}class nf extends No{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nf}}function jb(s,e,n){return new ef({Ac:3,Dc:e.settings.Dc,methodName:s._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Wp extends No{_toFieldTransform(e){return new Cp(e.path,new lu)}isEqual(e){return e instanceof Wp}}class Zp extends No{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=jb(this,e,!0),r=this.vc.map(u=>ua(u,n)),o=new yo(r);return new Cp(e.path,o)}isEqual(e){return e instanceof Zp&&rs(this.vc,e.vc)}}class Jp extends No{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=jb(this,e,!0),r=this.vc.map(u=>ua(u,n)),o=new _o(r);return new Cp(e.path,o)}isEqual(e){return e instanceof Jp&&rs(this.vc,e.vc)}}function JC(s,e,n,r){const o=s.Cc(1,e,n);eg("Data must be an object, but it was:",o,r);const u=[],f=mn.empty();or(r,(g,y)=>{const T=tg(e,g,n);y=ot(y);const w=o.yc(T);if(y instanceof nf)u.push(T);else{const S=ua(y,w);S!=null&&(u.push(T),f.set(T,S))}});const m=new xn(u);return new Pb(f,m,o.fieldTransforms)}function eN(s,e,n,r,o,u){const f=s.Cc(1,e,n),m=[ip(e,r,n)],g=[o];if(u.length%2!=0)throw new ce(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)m.push(ip(e,u[S])),g.push(u[S+1]);const y=[],T=mn.empty();for(let S=m.length-1;S>=0;--S)if(!qb(y,m[S])){const P=m[S];let L=g[S];L=ot(L);const K=f.yc(P);if(L instanceof nf)y.push(P);else{const F=ua(L,K);F!=null&&(y.push(P),T.set(P,F))}}const w=new xn(y);return new Pb(T,w,f.fieldTransforms)}function tN(s,e,n,r=!1){return ua(n,s.Cc(r?4:3,e))}function ua(s,e){if(zb(s=ot(s)))return eg("Unsupported field value:",e,s),Bb(s,e);if(s instanceof No)return function(r,o){if(!Ub(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,o){const u=[];let f=0;for(const m of r){let g=ua(m,o.wc(f));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),f++}return{arrayValue:{values:u}}}(s,e)}return function(r,o){if((r=ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return q2(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=st.fromDate(r);return{timestampValue:Sh(o.serializer,u)}}if(r instanceof st){const u=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Sh(o.serializer,u)}}if(r instanceof Si)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Hn)return{bytesValue:ab(o.serializer,r._byteString)};if(r instanceof dt){const u=o.databaseId,f=r.firestore._databaseId;if(!f.isEqual(u))throw o.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Mp(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ri)return function(f,m){return{mapValue:{fields:{[VT]:{stringValue:PT},[bh]:{arrayValue:{values:f.toArray().map(y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return xp(m.serializer,y)})}}}}}}(r,o);throw o.Sc(`Unsupported field value: ${Lh(r)}`)}(s,e)}function Bb(s,e){const n={};return CT(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):or(s,(r,o)=>{const u=ua(o,e.mc(r));u!=null&&(n[r]=u)}),{mapValue:{fields:n}}}function zb(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof st||s instanceof Si||s instanceof Hn||s instanceof dt||s instanceof No||s instanceof Ri)}function eg(s,e,n){if(!zb(n)||!IT(n)){const r=Lh(n);throw r==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+r)}}function ip(s,e,n){if((e=ot(e))instanceof Jh)return e._internalPath;if(typeof e=="string")return tg(s,e);throw Nh("Field path arguments must be of type string or ",s,!1,void 0,n)}const nN=new RegExp("[~\\*/\\[\\]]");function tg(s,e,n){if(e.search(nN)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Jh(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Nh(s,e,n,r,o){const u=r&&!r.isEmpty(),f=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||f)&&(g+=" (found",u&&(g+=` in field ${r}`),f&&(g+=` in document ${o}`),g+=")"),new ce(X.INVALID_ARGUMENT,m+s+g)}function qb(s,e){return s.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,n,r,o,u){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(sf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iN extends Hb{data(){return super.data()}}function sf(s,e){return typeof e=="string"?tg(s,e):e instanceof Jh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ce(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ng{}class Gb extends ng{}function ia(s,e,...n){let r=[];e instanceof ng&&r.push(e),r=r.concat(n),function(u){const f=u.filter(g=>g instanceof ig).length,m=u.filter(g=>g instanceof rf).length;if(f>1||f>0&&m>0)throw new ce(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)s=o._apply(s);return s}class rf extends Gb{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new rf(e,n,r)}_apply(e){const n=this._parse(e);return Qb(e._query,n),new ur(e.firestore,e.converter,Qm(e._query,n))}_parse(e){const n=tf(e.firestore);return function(u,f,m,g,y,T,w){let S;if(y.isKeyField()){if(T==="array-contains"||T==="array-contains-any")throw new ce(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if(T==="in"||T==="not-in"){cE(w,T);const L=[];for(const K of w)L.push(uE(g,u,K));S={arrayValue:{values:L}}}else S=uE(g,u,w)}else T!=="in"&&T!=="not-in"&&T!=="array-contains-any"||cE(w,T),S=tN(m,f,w,T==="in"||T==="not-in");return St.create(y,T,S)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function sN(s,e,n){const r=e,o=sf("where",s);return rf._create(o,r,n)}class ig extends ng{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ig(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ei.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(o,u){let f=o;const m=u.getFlattenedFilters();for(const g of m)Qb(f,g),f=Qm(f,g)}(e._query,n),new ur(e.firestore,e.converter,Qm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class sg extends Gb{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new sg(e,n)}_apply(e){const n=function(o,u,f){if(o.startAt!==null)throw new ce(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ce(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ou(u,f)}(e._query,this._field,this._direction);return new ur(e.firestore,e.converter,function(o,u){const f=o.explicitOrderBy.concat([u]);return new xo(o.path,o.collectionGroup,f,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function To(s,e="asc"){const n=e,r=sf("orderBy",s);return sg._create(r,n)}function uE(s,e,n){if(typeof(n=ot(n))=="string"){if(n==="")throw new ce(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FT(e)&&n.indexOf("/")!==-1)throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(it.fromString(n));if(!ge.isDocumentKey(r))throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return S0(s,new ge(r))}if(n instanceof dt)return S0(s,n._key);throw new ce(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lh(n)}.`)}function cE(s,e){if(!Array.isArray(s)||s.length===0)throw new ce(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Qb(s,e){const n=function(o,u){for(const f of o)for(const m of f.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null}(s.filters,function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ce(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rN{convertValue(e,n="none"){switch(nr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(tr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return or(e,(o,u)=>{r[o]=this.convertValue(u,n)}),r}convertVectorValue(e){var r,o,u;const n=(u=(o=(r=e.fields)==null?void 0:r[bh].arrayValue)==null?void 0:o.values)==null?void 0:u.map(f=>vt(f.doubleValue));return new Ri(n)}convertGeoPoint(e){return new Si(vt(e.latitude),vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=zh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(su(e));default:return null}}convertTimestamp(e){const n=er(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=it.fromString(e);Ge(fb(r),9688,{name:e});const o=new ru(r.get(1),r.get(3)),u=new ge(r.popFirst(5));return o.isEqual(n)||ls(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(s,e,n){let r;return r=s?s.toFirestore(e):e,r}class Kl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $r extends Hb{constructor(e,n,r,o,u,f){super(e,n,r,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(sf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=$r._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}$r._jsonSchemaVersion="firestore/documentSnapshot/1.0",$r._jsonSchema={type:Rt("string",$r._jsonSchemaVersion),bundleSource:Rt("string","DocumentSnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class hh extends $r{data(e={}){return super.data(e)}}class Xr{constructor(e,n,r,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Kl(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new hh(this._firestore,this._userDataWriter,r.key,r,new Kl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map(m=>{const g=new hh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Kl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}})}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(m=>u||m.type!==3).map(m=>{const g=new hh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Kl(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,T=-1;return m.type!==0&&(y=f.indexOf(m.doc.key),f=f.delete(m.doc.key)),m.type!==1&&(f=f.add(m.doc),T=f.indexOf(m.doc.key)),{type:aN(m.type),doc:g,oldIndex:y,newIndex:T}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Xr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach(u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function aN(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(s){s=pn(s,dt);const e=pn(s.firestore,cs);return GC(Zh(e),s._key).then(n=>$b(e,s,n))}Xr._jsonSchemaVersion="firestore/querySnapshot/1.0",Xr._jsonSchema={type:Rt("string",Xr._jsonSchemaVersion),bundleSource:Rt("string","QuerySnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class rg extends rN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,n)}}function oN(s){s=pn(s,ur);const e=pn(s.firestore,cs),n=Zh(e),r=new rg(e);return Fb(s._query),QC(n,s._query).then(o=>new Xr(e,r,s,o))}function Dh(s,e,n){s=pn(s,dt);const r=pn(s.firestore,cs),o=Kb(s.converter,e);return af(r,[Lb(tf(r),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Fn.none())])}function tn(s,e,n,...r){s=pn(s,dt);const o=pn(s.firestore,cs),u=tf(o);let f;return f=typeof(e=ot(e))=="string"||e instanceof Jh?eN(u,"updateDoc",s._key,e,n,r):JC(u,"updateDoc",s._key,e),af(o,[f.toMutation(s._key,Fn.exists(!0))])}function Yb(s){return af(pn(s.firestore,cs),[new Np(s._key,Fn.none())])}function lN(s,e){const n=pn(s.firestore,cs),r=sn(s),o=Kb(s.converter,e);return af(n,[Lb(tf(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,Fn.exists(!1))]).then(()=>r)}function gn(s,...e){var g,y,T;s=ot(s);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||lE(e[r])||(n=e[r++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(lE(e[r])){const w=e[r];e[r]=(g=w.next)==null?void 0:g.bind(w),e[r+1]=(y=w.error)==null?void 0:y.bind(w),e[r+2]=(T=w.complete)==null?void 0:T.bind(w)}let u,f,m;if(s instanceof dt)f=pn(s.firestore,cs),m=qh(s._key.path),u={next:w=>{e[r]&&e[r]($b(f,s,w))},error:e[r+1],complete:e[r+2]};else{const w=pn(s,ur);f=pn(w.firestore,cs),m=w._query;const S=new rg(f);u={next:P=>{e[r]&&e[r](new Xr(f,S,w,P))},error:e[r+1],complete:e[r+2]},Fb(s._query)}return function(S,P,L,K){const F=new Xp(K),te=new Kp(P,F,L);return S.asyncQueue.enqueueAndForget(async()=>Fp(await Ch(S),te)),()=>{F.Nu(),S.asyncQueue.enqueueAndForget(async()=>Gp(await Ch(S),te))}}(Zh(f),m,o,u)}function af(s,e){return function(r,o){const u=new ss;return r.asyncQueue.enqueueAndForget(async()=>MC(await FC(r),o,u)),u.promise}(Zh(s),e)}function $b(s,e,n){const r=n.docs.get(e._key),o=new rg(s);return new $r(s,o,e._key,r,new Kl(n.hasPendingWrites,n.fromCache),e.converter)}function bo(){return new Wp("serverTimestamp")}function of(...s){return new Zp("arrayUnion",s)}function wo(...s){return new Jp("arrayRemove",s)}(function(e,n=!0){(function(o){So=o})(ra),Zr(new Zs("firestore",(r,{instanceIdentifier:o,options:u})=>{const f=r.getProvider("app").getImmediate(),m=new cs(new e2(r.getProvider("auth-internal")),new i2(f,r.getProvider("app-check-internal")),function(y,T){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ce(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ru(y.options.projectId,T)}(f,o),f);return u={useFetchStreams:n,...u},m._setSettings(u),m},"PUBLIC").setMultipleInstances(!0)),Ei(f0,d0,e),Ei(f0,d0,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="firebasestorage.googleapis.com",Wb="storageBucket",uN=120*1e3,cN=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt extends xi{constructor(e,n,r=0){super(xm(e),`Firebase Storage: ${n} (${xm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var mt;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(mt||(mt={}));function xm(s){return"storage/"+s}function ag(){const s="An unknown error occurred, please check the error payload for server response.";return new pt(mt.UNKNOWN,s)}function hN(s){return new pt(mt.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function fN(s){return new pt(mt.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function dN(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pt(mt.UNAUTHENTICATED,s)}function mN(){return new pt(mt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function pN(s){return new pt(mt.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function gN(){return new pt(mt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function yN(){return new pt(mt.CANCELED,"User canceled the upload/download.")}function _N(s){return new pt(mt.INVALID_URL,"Invalid URL '"+s+"'.")}function vN(s){return new pt(mt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function EN(){return new pt(mt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Wb+"' property when initializing the app?")}function TN(){return new pt(mt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function bN(){return new pt(mt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function wN(s){return new pt(mt.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function sp(s){return new pt(mt.INVALID_ARGUMENT,s)}function Zb(){return new pt(mt.APP_DELETED,"The Firebase app was deleted.")}function AN(s){return new pt(mt.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function eu(s,e){return new pt(mt.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function zl(s){throw new pt(mt.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Cn.makeFromUrl(e,n)}catch{return new Cn(e,"")}if(r.path==="")return r;throw vN(e)}static makeFromUrl(e,n){let r=null;const o="([A-Za-z0-9.\\-_]+)";function u(se){se.path.charAt(se.path.length-1)==="/"&&(se.path_=se.path_.slice(0,-1))}const f="(/(.*))?$",m=new RegExp("^gs://"+o+f,"i"),g={bucket:1,path:3};function y(se){se.path_=decodeURIComponent(se.path)}const T="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),S="(/([^?#]*).*)?$",P=new RegExp(`^https?://${w}/${T}/b/${o}/o${S}`,"i"),L={bucket:1,path:3},K=n===Xb?"(?:storage.googleapis.com|storage.cloud.google.com)":n,F="([^?#]*)",te=new RegExp(`^https?://${K}/${o}/${F}`,"i"),re=[{regex:m,indices:g,postModify:u},{regex:P,indices:L,postModify:y},{regex:te,indices:{bucket:1,path:2},postModify:y}];for(let se=0;se<re.length;se++){const W=re[se],fe=W.regex.exec(e);if(fe){const C=fe[W.indices.bucket];let R=fe[W.indices.path];R||(R=""),r=new Cn(C,R),W.postModify(r);break}}if(r==null)throw _N(e);return r}}class SN{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RN(s,e,n){let r=1,o=null,u=null,f=!1,m=0;function g(){return m===2}let y=!1;function T(...F){y||(y=!0,e.apply(null,F))}function w(F){o=setTimeout(()=>{o=null,s(P,g())},F)}function S(){u&&clearTimeout(u)}function P(F,...te){if(y){S();return}if(F){S(),T.call(null,F,...te);return}if(g()||f){S(),T.call(null,F,...te);return}r<64&&(r*=2);let re;m===1?(m=2,re=0):re=(r+Math.random())*1e3,w(re)}let L=!1;function K(F){L||(L=!0,S(),!y&&(o!==null?(F||(m=2),clearTimeout(o),w(0)):F||(m=1)))}return w(0),u=setTimeout(()=>{f=!0,K(!0)},n),K}function IN(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(s){return s!==void 0}function CN(s){return typeof s=="object"&&!Array.isArray(s)}function og(s){return typeof s=="string"||s instanceof String}function hE(s){return lg()&&s instanceof Blob}function lg(){return typeof Blob<"u"}function fE(s,e,n,r){if(r<e)throw sp(`Invalid value for '${s}'. Expected ${e} or greater.`);if(r>n)throw sp(`Invalid value for '${s}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(s,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${s}`}function Jb(s){const e=encodeURIComponent;let n="?";for(const r in s)if(s.hasOwnProperty(r)){const o=e(r)+"="+e(s[r]);n=n+o+"&"}return n=n.slice(0,-1),n}var Wr;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Wr||(Wr={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(s,e){const n=s>=500&&s<600,o=[408,429].indexOf(s)!==-1,u=e.indexOf(s)!==-1;return n||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n,r,o,u,f,m,g,y,T,w,S=!0,P=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=f,this.callback_=m,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=T,this.connectionFactory_=w,this.retry=S,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,K)=>{this.resolve_=L,this.reject_=K,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new eh(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const f=m=>{const g=m.loaded,y=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(f),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(f),this.pendingConnection_=null;const m=u.getErrorCode()===Wr.NO_ERROR,g=u.getStatus();if(!m||NN(g,this.additionalRetryCodes_)&&this.retry){const T=u.getErrorCode()===Wr.ABORT;r(!1,new eh(!1,null,T));return}const y=this.successCodes_.indexOf(g)!==-1;r(!0,new eh(y,u))})},n=(r,o)=>{const u=this.resolve_,f=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());xN(g)?u(g):u()}catch(g){f(g)}else if(m!==null){const g=ag();g.serverResponse=m.getErrorText(),this.errorCallback_?f(this.errorCallback_(m,g)):f(g)}else if(o.canceled){const g=this.appDelete_?Zb():yN();f(g)}else{const g=gN();f(g)}};this.canceled_?n(!1,new eh(!1,null,!0)):this.backoffId_=RN(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&IN(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class eh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function ON(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function MN(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function kN(s,e){e&&(s["X-Firebase-GMPID"]=e)}function VN(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function PN(s,e,n,r,o,u,f=!0,m=!1){const g=Jb(s.urlParams),y=s.url+g,T=Object.assign({},s.headers);return kN(T,e),ON(T,n),MN(T,u),VN(T,r),new DN(y,s.method,T,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,o,f,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function LN(...s){const e=UN();if(e!==void 0){const n=new e;for(let r=0;r<s.length;r++)n.append(s[r]);return n.getBlob()}else{if(lg())return new Blob(s);throw new pt(mt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function jN(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(s){if(typeof atob>"u")throw wN("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Cm{constructor(e,n){this.data=e,this.contentType=n||null}}function zN(s,e){switch(s){case vi.RAW:return new Cm(ew(e));case vi.BASE64:case vi.BASE64URL:return new Cm(tw(s,e));case vi.DATA_URL:return new Cm(HN(e),FN(e))}throw ag()}function ew(s){const e=[];for(let n=0;n<s.length;n++){let r=s.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=r,f=s.charCodeAt(++n);r=65536|(u&1023)<<10|f&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function qN(s){let e;try{e=decodeURIComponent(s)}catch{throw eu(vi.DATA_URL,"Malformed data URL.")}return ew(e)}function tw(s,e){switch(s){case vi.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw eu(s,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case vi.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw eu(s,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=BN(e)}catch(o){throw o.message.includes("polyfill")?o:eu(s,"Invalid character found")}const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r}class nw{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw eu(vi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=GN(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function HN(s){const e=new nw(s);return e.base64?tw(vi.BASE64,e.rest):qN(e.rest)}function FN(s){return new nw(s).contentType}function GN(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n){let r=0,o="";hE(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(hE(this.data_)){const r=this.data_,o=jN(r,e,n);return o===null?null:new Qs(o)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Qs(r,!0)}}static getBlob(...e){if(lg()){const n=e.map(r=>r instanceof Qs?r.data_:r);return new Qs(LN.apply(null,n))}else{const n=e.map(f=>og(f)?zN(vi.RAW,f).data:f.data_);let r=0;n.forEach(f=>{r+=f.byteLength});const o=new Uint8Array(r);let u=0;return n.forEach(f=>{for(let m=0;m<f.length;m++)o[u++]=f[m]}),new Qs(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(s){let e;try{e=JSON.parse(s)}catch{return null}return CN(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function KN(s,e){const n=e.split("/").filter(r=>r.length>0).join("/");return s.length===0?n:s+"/"+n}function sw(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(s,e){return e}class un{constructor(e,n,r,o){this.server=e,this.local=n||e,this.writable=!!r,this.xform=o||YN}}let th=null;function $N(s){return!og(s)||s.length<2?s:sw(s)}function rw(){if(th)return th;const s=[];s.push(new un("bucket")),s.push(new un("generation")),s.push(new un("metageneration")),s.push(new un("name","fullPath",!0));function e(u,f){return $N(f)}const n=new un("name");n.xform=e,s.push(n);function r(u,f){return f!==void 0?Number(f):f}const o=new un("size");return o.xform=r,s.push(o),s.push(new un("timeCreated")),s.push(new un("updated")),s.push(new un("md5Hash",null,!0)),s.push(new un("cacheControl",null,!0)),s.push(new un("contentDisposition",null,!0)),s.push(new un("contentEncoding",null,!0)),s.push(new un("contentLanguage",null,!0)),s.push(new un("contentType",null,!0)),s.push(new un("metadata","customMetadata",!0)),th=s,th}function XN(s,e){function n(){const r=s.bucket,o=s.fullPath,u=new Cn(r,o);return e._makeStorageReference(u)}Object.defineProperty(s,"ref",{get:n})}function WN(s,e,n){const r={};r.type="file";const o=n.length;for(let u=0;u<o;u++){const f=n[u];r[f.local]=f.xform(r,e[f.server])}return XN(r,s),r}function aw(s,e,n){const r=iw(e);return r===null?null:WN(s,r,n)}function ZN(s,e,n,r){const o=iw(e);if(o===null||!og(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const f=encodeURIComponent;return u.split(",").map(y=>{const T=s.bucket,w=s.fullPath,S="/b/"+f(T)+"/o/"+f(w),P=ug(S,n,r),L=Jb({alt:"media",token:y});return P+L})[0]}function JN(s,e){const n={},r=e.length;for(let o=0;o<r;o++){const u=e[o];u.writable&&(n[u.server]=s[u.local])}return JSON.stringify(n)}class ow{constructor(e,n,r,o){this.url=e,this.method=n,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(s){if(!s)throw ag()}function eD(s,e){function n(r,o){const u=aw(s,o,e);return lw(u!==null),u}return n}function tD(s,e){function n(r,o){const u=aw(s,o,e);return lw(u!==null),ZN(u,o,s.host,s._protocol)}return n}function uw(s){function e(n,r){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=mN():o=dN():n.getStatus()===402?o=fN(s.bucket):n.getStatus()===403?o=pN(s.path):o=r,o.status=n.getStatus(),o.serverResponse=r.serverResponse,o}return e}function nD(s){const e=uw(s);function n(r,o){let u=e(r,o);return r.getStatus()===404&&(u=hN(s.path)),u.serverResponse=o.serverResponse,u}return n}function iD(s,e,n){const r=e.fullServerUrl(),o=ug(r,s.host,s._protocol),u="GET",f=s.maxOperationRetryTime,m=new ow(o,u,tD(s,n),f);return m.errorHandler=nD(e),m}function sD(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function rD(s,e,n){const r=Object.assign({},n);return r.fullPath=s.path,r.size=e.size(),r.contentType||(r.contentType=sD(null,e)),r}function aD(s,e,n,r,o){const u=e.bucketOnlyServerUrl(),f={"X-Goog-Upload-Protocol":"multipart"};function m(){let re="";for(let se=0;se<2;se++)re=re+Math.random().toString().slice(2);return re}const g=m();f["Content-Type"]="multipart/related; boundary="+g;const y=rD(e,r,o),T=JN(y,n),w="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+T+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,S=`\r
--`+g+"--",P=Qs.getBlob(w,r,S);if(P===null)throw TN();const L={name:y.fullPath},K=ug(u,s.host,s._protocol),F="POST",te=s.maxUploadRetryTime,ie=new ow(K,F,eD(s,n),te);return ie.urlParams=L,ie.headers=f,ie.body=P.uploadData(),ie.errorHandler=uw(e),ie}class oD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Wr.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Wr.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Wr.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,o,u){if(this.sent_)throw zl("cannot .send() more than once");if(rr(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const f in u)u.hasOwnProperty(f)&&this.xhr_.setRequestHeader(f,u[f].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw zl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw zl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw zl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw zl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class lD extends oD{initXhr(){this.xhr_.responseType="text"}}function cw(){return new lD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n){this._service=e,n instanceof Cn?this._location=n:this._location=Cn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new sa(e,n)}get root(){const e=new Cn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return sw(this._location.path)}get storage(){return this._service}get parent(){const e=QN(this._location.path);if(e===null)return null;const n=new Cn(this._location.bucket,e);return new sa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw AN(e)}}function uD(s,e,n){s._throwIfRoot("uploadBytes");const r=aD(s.storage,s._location,rw(),new Qs(e,!0),n);return s.storage.makeRequestWithTokens(r,cw).then(o=>({metadata:o,ref:s}))}function cD(s){s._throwIfRoot("getDownloadURL");const e=iD(s.storage,s._location,rw());return s.storage.makeRequestWithTokens(e,cw).then(n=>{if(n===null)throw bN();return n})}function hD(s,e){const n=KN(s._location.path,e),r=new Cn(s._location.bucket,n);return new sa(s.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(s){return/^[A-Za-z]+:\/\//.test(s)}function dD(s,e){return new sa(s,e)}function hw(s,e){if(s instanceof cg){const n=s;if(n._bucket==null)throw EN();const r=new sa(n,n._bucket);return e!=null?hw(r,e):r}else return e!==void 0?hD(s,e):s}function mD(s,e){if(e&&fD(e)){if(s instanceof cg)return dD(s,e);throw sp("To use ref(service, url), the first argument must be a Storage instance.")}else return hw(s,e)}function dE(s,e){const n=e==null?void 0:e[Wb];return n==null?null:Cn.makeFromBucketSpec(n,s)}function pD(s,e,n,r={}){s.host=`${e}:${n}`;const o=rr(e);o&&(lp(`https://${s.host}/b`),up("Storage",!0)),s._isUsingEmulator=!0,s._protocol=o?"https":"http";const{mockUserToken:u}=r;u&&(s._overrideAuthToken=typeof u=="string"?u:OE(u,s.app.options.projectId))}class cg{constructor(e,n,r,o,u,f=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=f,this._bucket=null,this._host=Xb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=uN,this._maxUploadRetryTime=cN,this._requests=new Set,o!=null?this._bucket=Cn.makeFromBucketSpec(o,this._host):this._bucket=dE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Cn.makeFromBucketSpec(this._url,e):this._bucket=dE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){fE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){fE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(In(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new sa(this,e)}_makeRequest(e,n,r,o,u=!0){if(this._deleted)return new SN(Zb());{const f=PN(e,this._appId,r,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(e,n){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,o).getPromise()}}const mE="@firebase/storage",pE="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="storage";function gE(s,e,n){return s=ot(s),uD(s,e,n)}function yE(s){return s=ot(s),cD(s)}function _E(s,e){return s=ot(s),mD(s,e)}function gD(s=fp(),e){s=ot(s);const r=kh(s,fw).getImmediate({identifier:e}),o=CE("storage");return o&&yD(r,...o),r}function yD(s,e,n,r={}){pD(s,e,n,r)}function _D(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),r=s.getProvider("auth-internal"),o=s.getProvider("app-check-internal");return new cg(n,r,o,e,ra)}function vD(){Zr(new Zs(fw,_D,"PUBLIC").setMultipleInstances(!0)),Ei(mE,pE,""),Ei(mE,pE,"esm2020")}vD();const Bt=()=>typeof __app_id<"u"?__app_id:"default-community-app",ED=typeof __firebase_config<"u"?JSON.parse(__firebase_config):{apiKey:"AIzaSyDvH2mYXKtB8-lkbmSqRxqA4TPD7GubCEA",authDomain:"mmc-mesh.firebaseapp.com",projectId:"mmc-mesh",storageBucket:"mmc-mesh.firebasestorage.app",messagingSenderId:"778062573356",appId:"1:778062573356:web:28fc7fd4b6b6494c978689",measurementId:"G-0K1W8M9YYX"},hg=VE(ED),yn=XI(hg),et=YC(hg),vE=gD(hg),dw=typeof __aes_secret_key<"u"?__aes_secret_key:"default_secret_key",EE=typeof __emailjs_service_id<"u"?__emailjs_service_id:"service_1hpnqyl",TE=typeof __emailjs_template_id<"u"?__emailjs_template_id:"template_pu5s1lp",Oh=typeof __emailjs_public_key<"u"?__emailjs_public_key:"9jZEmVVccYeMqj4EB";if(Oh)try{wE.init(Oh)}catch{}const mw=ne.createContext({isAdmin:!1}),lf=()=>ne.useContext(mw),wu=ne.createContext(null),fg=()=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-white",children:[E.jsx("path",{d:"M5 12h14"}),E.jsx("path",{d:"m12 5 7 7-7 7"})]}),pw=()=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),E.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),rp=({className:s})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:E.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),TD=({className:s})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[E.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),E.jsx("circle",{cx:"9",cy:"7",r:"4"}),E.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),E.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),bD=({className:s})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[E.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),E.jsx("polyline",{points:"16 17 21 12 16 7"}),E.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),wD=()=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),E.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),gw=({className:s})=>E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:E.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),dg=({className:s})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[E.jsx("polyline",{points:"3 6 5 6 21 6"}),E.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),AD=({className:s})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[E.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),E.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),E.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),E.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),SD=({className:s})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[E.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),E.jsx("polyline",{points:"22,6 12,13 2,6"})]}),bE=({className:s})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[E.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),E.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),E.jsx("polyline",{points:"21 15 16 10 5 21"})]}),RD=({className:s})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[E.jsx("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),E.jsx("polyline",{points:"16 6 12 2 8 6"}),E.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]}),ID=({className:s})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[E.jsx("circle",{cx:"11",cy:"11",r:"8"}),E.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),xD=({className:s})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:s,children:[E.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),E.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]});function CD({children:s}){const[e,n]=ne.useState(null),[r,o]=ne.useState(!1),[u,f]=ne.useState(!0),[m,g]=ne.useState("feed"),[y,T]=ne.useState(null),[w,S]=ne.useState(null),[P,L]=ne.useState(""),K=Bt();return ne.useEffect(()=>{const F=LR(yn,async te=>{if(n(te),te){const ie=sn(et,`artifacts/${K}/public/data/users/${te.uid}`),re=await bu(ie);o(re.exists()&&re.data().isAdmin)}else o(!1);f(!1)});return()=>F()},[K]),u?E.jsx("div",{className:"flex items-center justify-center h-screen bg-gray-100 dark:bg-gray-900",children:E.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):E.jsx(mw.Provider,{value:{isAdmin:r},children:E.jsx(wu.Provider,{value:{view:m,setView:g,activeDm:y,setActiveDm:T,searchQuery:P,setSearchQuery:L,activeGroup:w,setActiveGroup:S},children:e?s:E.jsx(ND,{})})})}function ND(){const[s,e]=ne.useState(!0),[n,r]=ne.useState(""),[o,u]=ne.useState(""),[f,m]=ne.useState(""),[g,y]=ne.useState(""),[T,w]=ne.useState(""),[S,P]=ne.useState(""),[L,K]=ne.useState(!1),F=Bt(),te=async ie=>{ie.preventDefault(),P(""),K(!0);try{if(s)await MR(yn,n,o);else{if(!g)throw new Error("An invitation code is required to sign up.");const re=sn(et,`artifacts/${F}/public/data/invites/${g}`),se=await bu(re);if(!se.exists()||se.data().isUsed)throw new Error("Invalid or already used invitation code.");const W=Gn(et,`artifacts/${F}/public/data/users`),C=(await oN(ia(W))).empty,I=(await OR(yn,n,o)).user;await VR(I,{displayName:f});const O=T?Nm.AES.encrypt(T,dw).toString():"";await Dh(sn(et,`artifacts/${F}/public/data/users/${I.uid}`),{uid:I.uid,displayName:f,email:I.email,createdAt:bo(),invitedBy:se.data().generatedBy,isAdmin:C,phoneNumberEncrypted:O}),await tn(re,{isUsed:!0,usedBy:I.uid,usedAt:bo()})}}catch(re){P(re.message.replace("Firebase: ",""))}finally{K(!1)}};return E.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[E.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[E.jsx(rp,{className:"mx-auto h-12 w-auto text-blue-600"}),E.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900 dark:text-white",children:s?"Sign in to InvestNet":"Join the InvestNet"})]}),E.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:E.jsxs("div",{className:"bg-white dark:bg-gray-800 py-8 px-4 shadow-lg sm:rounded-lg sm:px-10",children:[E.jsxs("form",{className:"space-y-6",onSubmit:te,children:[!s&&E.jsx("input",{id:"displayName",placeholder:"Display Name",required:!0,value:f,onChange:ie=>m(ie.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"}),E.jsx("input",{id:"email",placeholder:"Email address",type:"email",required:!0,value:n,onChange:ie=>r(ie.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"}),E.jsx("input",{id:"password",placeholder:"Password",type:"password",required:!0,value:o,onChange:ie=>u(ie.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"}),!s&&E.jsx("input",{id:"phoneNumber",placeholder:"Phone Number (will be kept private)",type:"tel",value:T,onChange:ie=>w(ie.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"}),!s&&E.jsx("input",{id:"inviteCode",placeholder:"Invitation Code",required:!0,value:g,onChange:ie=>y(ie.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm dark:bg-gray-700 dark:text-white"}),S&&E.jsx("p",{className:"text-sm text-red-500",children:S}),E.jsx("button",{type:"submit",disabled:L,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-300 dark:disabled:bg-blue-800",children:L?"Processing...":s?"Sign in":"Create account"})]}),E.jsx("div",{className:"mt-6 text-center",children:E.jsx("button",{onClick:()=>{e(!s),P("")},className:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300",children:s?"Need an invite to create an account?":"Already have an account? Sign in"})})]})})]})}function DD(){const[s,e]=ne.useState(!1),[n,r]=ne.useState(null),{isAdmin:o}=lf(),{view:u,setView:f,setSearchQuery:m,activeDm:g,setActiveDm:y,activeGroup:T,setActiveGroup:w}=ne.useContext(wu),[S,P]=ne.useState(""),L=Bt();ne.useEffect(()=>{const te=new URLSearchParams(window.location.search).get("post");te&&(async()=>{const re=sn(et,`artifacts/${L}/public/data/posts/${te}`),se=await bu(re);se.exists()&&r({id:se.id,...se.data()})})()},[L]);const K=F=>{F.preventDefault(),S.trim()&&(m(S),f("search"))};return ne.useEffect(()=>{u!=="dms"&&(y(null),w(null))},[u]),E.jsxs("div",{className:"h-screen w-full flex bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 font-sans",children:[E.jsxs("aside",{className:"w-16 md:w-64 bg-white dark:bg-gray-800 p-2 md:p-4 flex flex-col justify-between border-r border-gray-200 dark:border-gray-700",children:[E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[E.jsx(rp,{className:"h-8 w-8 text-blue-500"}),E.jsx("h1",{className:"text-xl font-bold hidden md:block",children:"InvestNet"})]}),E.jsxs("form",{onSubmit:K,className:"relative mb-4",children:[E.jsx("input",{type:"text",value:S,onChange:F=>P(F.target.value),placeholder:"Search...",className:"w-full pl-8 pr-2 py-1.5 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-700 focus:ring-2 focus:ring-blue-500"}),E.jsx(ID,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]}),E.jsxs("nav",{className:"space-y-2",children:[E.jsxs("button",{onClick:()=>f("feed"),className:`w-full flex items-center gap-3 p-2 rounded-lg ${u==="feed"?"bg-blue-500 text-white":"hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[E.jsx(rp,{className:"h-5 w-5"}),E.jsx("span",{className:"hidden md:block",children:"Feed"})]}),E.jsxs("button",{onClick:()=>f("dms"),className:`w-full flex items-center gap-3 p-2 rounded-lg ${u==="dms"?"bg-blue-500 text-white":"hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[E.jsx(SD,{className:"h-5 w-5"}),E.jsx("span",{className:"hidden md:block",children:"Messages"})]}),E.jsxs("button",{onClick:()=>f("events"),className:`w-full flex items-center gap-3 p-2 rounded-lg ${u==="events"?"bg-blue-500 text-white":"hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[E.jsx(AD,{className:"h-5 w-5"}),E.jsx("span",{className:"hidden md:block",children:"Events"})]}),E.jsxs("button",{onClick:()=>f("members"),className:`w-full flex items-center gap-3 p-2 rounded-lg ${u==="members"?"bg-blue-500 text-white":"hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[E.jsx(TD,{className:"h-5 w-5"}),E.jsx("span",{className:"hidden md:block",children:"Members"})]}),o&&E.jsxs("button",{onClick:()=>f("admin"),className:`w-full flex items-center gap-3 p-2 rounded-lg ${u==="admin"?"bg-blue-500 text-white":"hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[E.jsx(gw,{className:"h-5 w-5"}),E.jsx("span",{className:"hidden md:block",children:"Admin Panel"})]})]})]}),E.jsxs("div",{children:[o&&E.jsxs("button",{onClick:()=>e(!0),className:"w-full flex items-center justify-center gap-2 bg-blue-600 text-white font-semibold p-3 rounded-lg hover:bg-blue-700 transition-colors",children:[E.jsx(pw,{}),E.jsx("span",{className:"hidden md:block",children:"Invite People"})]}),E.jsxs("button",{onClick:()=>jR(yn),className:"w-full flex items-center gap-3 p-2 rounded-lg mt-4 hover:bg-gray-200 dark:hover:bg-gray-700",children:[E.jsx(bD,{className:"h-5 w-5"}),E.jsx("span",{className:"hidden md:block",children:"Logout"})]})]})]}),E.jsx("main",{className:"flex-1 overflow-y-auto",children:E.jsxs("div",{className:"h-full",children:[u==="feed"&&E.jsx("div",{className:"p-4 md:p-8 max-w-3xl mx-auto",children:E.jsx(OD,{})}),u==="search"&&E.jsx("div",{className:"p-4 md:p-8 max-w-3xl mx-auto",children:E.jsx(BD,{})}),u==="dms"&&E.jsx(zD,{}),u==="events"&&E.jsx("div",{className:"p-4 md:p-8 max-w-3xl mx-auto",children:E.jsx(MD,{})}),u==="members"&&E.jsx("div",{className:"p-4 md:p-8 max-w-3xl mx-auto",children:E.jsx(jD,{})}),u==="admin"&&o&&E.jsx("div",{className:"p-4 md:p-8 max-w-3xl mx-auto",children:E.jsx(GD,{})})]})}),s&&o&&E.jsx(QD,{onClose:()=>e(!1)}),n&&E.jsx(KD,{post:n,onClose:()=>r(null)})]})}function OD(){const[s,e]=ne.useState([]),[n,r]=ne.useState(!0),o=Bt();return ne.useEffect(()=>{const u=Gn(et,`artifacts/${o}/public/data/posts`),f=ia(u,To("createdAt","desc")),m=gn(f,g=>{e(g.docs.map(y=>({id:y.id,...y.data()}))),r(!1)});return()=>m()},[o]),E.jsxs("div",{children:[E.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Feed"}),E.jsx(kD,{}),E.jsx("div",{className:"mt-8 space-y-6",children:n?E.jsx("p",{children:"Loading posts..."}):s.map(u=>E.jsx(uf,{post:u},u.id))})]})}function MD(){const[s,e]=ne.useState([]),[n,r]=ne.useState(!0),o=Bt();return ne.useEffect(()=>{const u=Gn(et,`artifacts/${o}/public/data/posts`),f=ia(u,sN("type","==","event"),To("eventDate","desc")),m=gn(f,g=>{e(g.docs.map(y=>({id:y.id,...y.data()}))),r(!1)});return()=>m()},[o]),E.jsxs("div",{children:[E.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Upcoming Events"}),E.jsx("div",{className:"mt-8 space-y-6",children:n?E.jsx("p",{children:"Loading events..."}):s.length>0?s.map(u=>E.jsx(uf,{post:u},u.id)):E.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mt-10",children:"No events scheduled yet."})})]})}function kD(){const[s,e]=ne.useState("text"),[n,r]=ne.useState(""),[o,u]=ne.useState(["",""]),[f,m]=ne.useState(""),[g,y]=ne.useState(""),[T,w]=ne.useState([]),[S,P]=ne.useState([]),[L,K]=ne.useState(null),[F,te]=ne.useState(""),[ie,re]=ne.useState(!1),se=yn.currentUser,W=Bt(),fe=D=>{const k=Array.from(D.target.files).slice(0,4);w(k),P(k.map(x=>URL.createObjectURL(x)))},C=D=>{const k=D.target.files[0];k&&(K(k),te(URL.createObjectURL(k)))},R=(D,k)=>{u(x=>x.map((He,Ve)=>Ve===D?k:He))},I=()=>{o.length<10&&u(D=>[...D,""])},O=async D=>{if(D.preventDefault(),!se)return;re(!0);let k=[];if(T.length>0)for(const Ve of T){const Q=_E(vE,`posts/${W}/${se.uid}/${Date.now()}_${Ve.name}`);await gE(Q,Ve),k.push(await yE(Q))}let x="";if(L){const Ve=_E(vE,`covers/${W}/${se.uid}/${Date.now()}_${L.name}`);await gE(Ve,L),x=await yE(Ve)}let He={type:s,authorId:se.uid,authorName:se.displayName||"Anonymous",authorPhotoURL:se.photoURL||"https://cdn-icons-png.flaticon.com/512/8188/8188362.png",createdAt:bo(),comments:[],imageUrls:k,coverImageUrl:x};try{if(s==="text"){if(!n.trim()&&k.length===0)throw new Error("Post cannot be empty.");He.content=n}else if(s==="poll"){if(!n.trim())throw new Error("Poll question cannot be empty.");const Ve=o.map(Q=>({text:Q,votes:[]})).filter(Q=>Q.text.trim()!=="");if(Ve.length<2)throw new Error("A poll must have at least two options.");He.content=n,He.options=Ve}else if(s==="event"){if(!f.trim()||!g||!n.trim())throw new Error("Event details are required.");He.eventTitle=f,He.eventDate=new Date(g),He.content=n,He.rsvps=[]}await lN(Gn(et,`artifacts/${W}/public/data/posts`),He),r(""),u(["",""]),m(""),y(""),w([]),P([]),K(null),te("")}catch(Ve){alert(Ve.message)}finally{re(!1)}};return E.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md",children:[E.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 mb-4",children:[E.jsx("button",{onClick:()=>e("text"),className:`flex-1 p-2 font-semibold ${s==="text"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"}`,children:"Text & Images"}),E.jsx("button",{onClick:()=>e("poll"),className:`flex-1 p-2 font-semibold ${s==="poll"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"}`,children:"Poll"}),E.jsx("button",{onClick:()=>e("event"),className:`flex-1 p-2 font-semibold ${s==="event"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"}`,children:"Event"})]}),E.jsxs("form",{onSubmit:O,children:[(s==="poll"||s==="event")&&E.jsxs("div",{className:"mb-4",children:[E.jsxs("label",{htmlFor:"cover-image-upload",className:"cursor-pointer text-blue-500 hover:underline flex items-center gap-2",children:[E.jsx(bE,{className:"w-5 h-5"}),F?"Change Cover Image":"Add Cover Image"]}),E.jsx("input",{id:"cover-image-upload",type:"file",accept:"image/*",onChange:C,className:"hidden"}),F&&E.jsx("img",{src:F,alt:"cover preview",className:"mt-2 w-full h-32 object-cover rounded-md"})]}),s==="event"&&E.jsx("input",{value:f,onChange:D=>m(D.target.value),placeholder:"Event Title",className:"w-full p-2 mb-2 border-none rounded-md bg-gray-100 dark:bg-gray-700"}),E.jsx("textarea",{value:n,onChange:D=>r(D.target.value),placeholder:s==="text"?"What's on your mind?":s==="poll"?"Ask a question...":"Event description...",className:"w-full p-2 border-none rounded-md bg-gray-100 dark:bg-gray-700",rows:"3"}),E.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Markdown is supported."}),s==="text"&&E.jsxs("div",{className:"mt-2",children:[E.jsxs("label",{htmlFor:"image-upload",className:"cursor-pointer text-blue-500 hover:underline flex items-center gap-2",children:[E.jsx(bE,{className:"w-5 h-5"}),"Add up to 4 photos"]}),E.jsx("input",{id:"image-upload",type:"file",multiple:!0,accept:"image/*",onChange:fe,className:"hidden"}),E.jsx("div",{className:"mt-2 grid grid-cols-4 gap-2",children:S.map((D,k)=>E.jsx("img",{src:D,alt:"preview",className:"w-full h-20 object-cover rounded-md"},k))})]}),s==="poll"&&E.jsxs("div",{className:"mt-2 space-y-2",children:[o.map((D,k)=>E.jsx("input",{value:D,onChange:x=>R(k,x.target.value),placeholder:`Option ${k+1}`,className:"w-full p-2 border-none rounded-md bg-gray-100 dark:bg-gray-700"},k)),E.jsx("button",{type:"button",onClick:I,className:"text-sm text-blue-500 hover:underline",children:"Add option"})]}),s==="event"&&E.jsx("input",{value:g,onChange:D=>y(D.target.value),type:"datetime-local",className:"w-full p-2 mt-2 border-none rounded-md bg-gray-100 dark:bg-gray-700"}),E.jsx("div",{className:"flex justify-end mt-4",children:E.jsx("button",{type:"submit",disabled:ie,className:"px-6 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-blue-300",children:ie?"Posting...":"Post"})})]})]})}function uf({post:s}){switch(s.type){case"poll":return E.jsx(PD,{post:s});case"event":return E.jsx(UD,{post:s});default:return E.jsx(VD,{post:s})}}const mg=({post:s,children:e})=>{const{isAdmin:n}=lf(),r=Bt(),[o,u]=ne.useState(!1),f=async()=>{if(window.confirm("Are you sure you want to delete this? This action cannot be undone."))try{await Yb(sn(et,`artifacts/${r}/public/data/posts/${s.id}`))}catch(y){console.error("Error deleting post: ",y)}},m=()=>{const y=`${window.location.origin}${window.location.pathname}?post=${s.id}`;navigator.clipboard.writeText(y),u(!0),setTimeout(()=>u(!1),2e3)},g=y=>y?new Date(y.seconds*1e3).toLocaleString():"Just now";return E.jsxs("article",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:[s.coverImageUrl&&E.jsx("img",{src:s.coverImageUrl,alt:"cover",className:"w-full h-48 object-cover"}),E.jsxs("div",{className:"p-5 relative",children:[n&&E.jsx("button",{onClick:f,className:"absolute top-3 right-3 text-gray-400 hover:text-red-500 p-1 rounded-full bg-white/50 dark:bg-black/50",children:E.jsx(dg,{className:"w-5 h-5"})}),E.jsxs("div",{className:"flex items-start gap-4",children:[E.jsx("img",{src:s.authorPhotoURL,alt:s.authorName,className:"w-10 h-10 rounded-full"}),E.jsxs("div",{className:"flex-1",children:[E.jsxs("div",{className:"flex items-baseline gap-2",children:[E.jsx("p",{className:"font-bold text-gray-900 dark:text-white",children:s.authorName}),E.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:g(s.createdAt)})]}),e]})]}),E.jsx("div",{className:"mt-4 flex justify-end",children:E.jsxs("button",{onClick:m,className:"flex items-center gap-2 text-sm text-gray-500 hover:text-blue-500 dark:text-gray-400 dark:hover:text-blue-400",children:[E.jsx(RD,{className:"w-4 h-4"}),E.jsx("span",{children:o?"Copied!":"Share"})]})}),E.jsx(LD,{post:s})]})]})};function VD({post:s}){return E.jsxs(mg,{post:s,children:[E.jsx("div",{className:"mt-1 prose dark:prose-invert max-w-none text-gray-700 dark:text-gray-300",children:E.jsx(uu,{remarkPlugins:[cu],children:s.content})}),s.imageUrls&&s.imageUrls.length>0&&E.jsx("div",{className:`mt-4 grid gap-2 grid-cols-${s.imageUrls.length>1?"2":"1"}`,children:s.imageUrls.map((e,n)=>E.jsx("img",{src:e,alt:`post image ${n+1}`,className:"w-full h-auto rounded-lg object-cover"},n))})]})}function PD({post:s}){const e=yn.currentUser,n=Bt(),r=async f=>{if(!e)return;const m=sn(et,`artifacts/${n}/public/data/posts/${s.id}`),g=s.options.map((y,T)=>{const w=y.votes.filter(S=>S!==e.uid);return T===f&&w.push(e.uid),{...y,votes:w}});await tn(m,{options:g})},o=s.options.reduce((f,m)=>f+m.votes.length,0),u=s.options.findIndex(f=>f.votes.includes(e==null?void 0:e.uid));return E.jsxs(mg,{post:s,children:[E.jsx("div",{className:"mt-1 prose dark:prose-invert max-w-none font-semibold text-gray-800 dark:text-gray-200",children:E.jsx(uu,{remarkPlugins:[cu],children:s.content})}),E.jsx("div",{className:"mt-4 space-y-2",children:s.options.map((f,m)=>{const g=o>0?f.votes.length/o*100:0;return E.jsxs("div",{onClick:()=>r(m),className:"p-3 border border-gray-200 dark:border-gray-700 rounded-lg cursor-pointer hover:border-blue-500 relative",children:[E.jsx("div",{className:"absolute top-0 left-0 h-full bg-blue-100 dark:bg-blue-900/50 rounded-lg",style:{width:`${g}%`,zIndex:0}}),E.jsxs("div",{className:"relative z-10 flex justify-between items-center",children:[E.jsxs("span",{className:"flex items-center gap-2",children:[f.text," ",u===m&&E.jsx(xD,{className:"w-5 h-5 text-blue-500"})]}),E.jsxs("span",{className:"text-sm font-semibold",children:[Math.round(g),"%"]})]})]},m)})})]})}function UD({post:s}){var u,f;const e=yn.currentUser,n=Bt(),r=(u=s.rsvps)==null?void 0:u.includes(e==null?void 0:e.uid),o=async()=>{if(!e)return;const m=sn(et,`artifacts/${n}/public/data/posts/${s.id}`);await tn(m,{rsvps:r?wo(e.uid):of(e.uid)})};return E.jsxs(mg,{post:s,children:[E.jsxs("div",{className:"mt-2",children:[E.jsx("h3",{className:"text-lg font-bold",children:s.eventTitle}),E.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-semibold",children:new Date(s.eventDate.seconds*1e3).toLocaleString()}),E.jsx("div",{className:"mt-2 prose dark:prose-invert max-w-none text-gray-700 dark:text-gray-300",children:E.jsx(uu,{remarkPlugins:[cu],children:s.content})})]}),E.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[E.jsx("button",{onClick:o,className:`px-4 py-2 rounded-lg font-semibold ${r?"bg-green-600 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:r?" Going":"RSVP"}),E.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[((f=s.rsvps)==null?void 0:f.length)||0," going"]})]})]})}function LD({post:s}){const[e,n]=ne.useState(""),[r,o]=ne.useState(!1),u=yn.currentUser,{isAdmin:f}=lf(),m=Bt(),g=ne.useMemo(()=>s.comments?[...s.comments].sort((w,S)=>{var P,L;return((P=w.createdAt)==null?void 0:P.seconds)-((L=S.createdAt)==null?void 0:L.seconds)}):[],[s.comments]),y=async w=>{if(w.preventDefault(),!e.trim()||!u)return;o(!0);const S=sn(et,`artifacts/${m}/public/data/posts/${s.id}`),P={id:crypto.randomUUID(),text:e.trim(),authorId:u.uid,authorName:u.displayName||"Anonymous",createdAt:new Date};try{await tn(S,{comments:of(P)}),n("")}finally{o(!1)}},T=async w=>{if(!window.confirm("Are you sure you want to delete this comment?"))return;const S=sn(et,`artifacts/${m}/public/data/posts/${s.id}`);await tn(S,{comments:wo(w)})};return E.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[E.jsxs("h4",{className:"text-sm font-semibold mb-2",children:["Comments (",g.length,")"]}),E.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2",children:g.map(w=>E.jsxs("div",{className:"group flex items-start gap-2 text-sm",children:[E.jsxs("div",{className:"flex-1 bg-gray-100 dark:bg-gray-700 p-2 rounded-lg",children:[E.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:w.authorName}),E.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:w.text})]}),f&&E.jsx("button",{onClick:()=>T(w),className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-500 transition-opacity",children:E.jsx(dg,{className:"w-4 h-4"})})]},w.id))}),E.jsxs("form",{onSubmit:y,className:"mt-4 flex gap-2",children:[E.jsx("input",{type:"text",value:e,onChange:w=>n(w.target.value),placeholder:"Write a comment...",className:"flex-1 p-2 border-none rounded-lg focus:ring-2 focus:ring-blue-500 bg-gray-100 dark:bg-gray-700"}),E.jsx("button",{type:"submit",disabled:!e.trim()||r,className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-blue-300",children:E.jsx(fg,{})})]})]})}function jD(){const[s,e]=ne.useState([]),[n,r]=ne.useState(!0),o=Bt(),{isAdmin:u}=lf(),f=yn.currentUser,{setView:m,setActiveDm:g}=ne.useContext(wu);ne.useEffect(()=>{const T=Gn(et,`artifacts/${o}/public/data/users`),w=gn(ia(T,To("displayName")),S=>{e(S.docs.map(P=>P.data())),r(!1)});return()=>w()},[o]);const y=async T=>{if(T.uid===f.uid){alert("You cannot remove yourself.");return}if(window.confirm(`Are you sure you want to remove ${T.displayName}?`))try{await Yb(sn(et,`artifacts/${o}/public/data/users/${T.uid}`))}catch(w){console.error("Error removing member: ",w)}};return E.jsxs("div",{children:[E.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Members"}),E.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-md",children:n?E.jsx("p",{children:"Loading members..."}):E.jsx("ul",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:s.map(T=>E.jsxs("li",{className:"flex items-center justify-between gap-4 p-3",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("img",{src:"https://cdn-icons-png.flaticon.com/512/8188/8188362.png",alt:T.displayName,className:"w-10 h-10 rounded-full"}),E.jsxs("div",{children:[E.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[T.displayName,T.isAdmin&&E.jsx(gw,{className:"w-4 h-4 text-blue-500",title:"Administrator"})]}),E.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:T.email})]})]}),E.jsx("div",{className:"flex items-center gap-2",children:u&&f.uid!==T.uid&&E.jsx("button",{onClick:()=>y(T),className:"text-gray-400 hover:text-red-500 p-1 rounded-full",children:E.jsx(dg,{className:"w-5 h-5"})})})]},T.uid))})})]})}function BD(){const{searchQuery:s}=ne.useContext(wu),[e,n]=ne.useState([]),[r,o]=ne.useState(!0),u=Bt();return ne.useEffect(()=>{const f=Gn(et,`artifacts/${u}/public/data/posts`),m=gn(ia(f,To("createdAt","desc")),g=>{const y=s.trim().toLowerCase(),w=g.docs.map(S=>({id:S.id,...S.data()})).filter(S=>{const P=(S.content||"").toLowerCase(),L=(S.eventTitle||"").toLowerCase(),K=P,F=S.options?S.options.map(te=>te.text.toLowerCase()).join(" "):"";return P.includes(y)||L.includes(y)||K.includes(y)||F.includes(y)});n(w),o(!1)});return()=>m()},[s,u]),E.jsxs("div",{children:[E.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Search Results"}),r?E.jsx("p",{children:"Searching..."}):e.length>0?E.jsx("div",{className:"space-y-6",children:e.map(f=>E.jsx(uf,{post:f},f.id))}):E.jsxs("p",{className:"text-center text-gray-500 dark:text-gray-400 mt-10",children:['No results found for "',s,'".']})]})}function zD(){const s=yn.currentUser,{activeDm:e,setActiveDm:n,activeGroup:r,setActiveGroup:o}=ne.useContext(wu),[u,f]=ne.useState([]),[m,g]=ne.useState([]),[y,T]=ne.useState({}),[w,S]=ne.useState(!0),[P,L]=ne.useState(!1),K=Bt();ne.useEffect(()=>{const te=Gn(et,`artifacts/${K}/public/data/users`),ie=gn(te,re=>{const se={};re.forEach(W=>{se[W.id]=W.data()}),T(se)});return()=>ie()},[K]),ne.useEffect(()=>{const te=Gn(et,`artifacts/${K}/public/data/dms`),ie=gn(te,re=>{const se=[];re.forEach(W=>{const fe=W.id;fe.split("_").includes(s.uid)&&se.push({id:fe,...W.data()})}),f(se),S(!1)});return()=>ie()},[K,s]),ne.useEffect(()=>{const te=Gn(et,`artifacts/${K}/public/data/groupchats`),ie=gn(te,re=>{const se=[];re.forEach(W=>{const fe=W.data();fe.members&&fe.members.includes(s.uid)&&se.push({id:W.id,...fe})}),g(se)});return()=>ie()},[K,s]),ne.useMemo(()=>u.map(te=>{const re=te.id.split("_").find(C=>C!==s.uid)||s.uid,se=y[re]||{displayName:"Unknown"},W=te.lastMessage;let fe=0;return te.messages&&Object.values(te.messages).forEach(C=>{C.createdBy!==s.uid&&C.status!=="read"&&(fe+=1)}),{id:te.id,otherUser:se,lastMessage:W,unreadCount:fe}}),[u,y,s]);const F=ne.useMemo(()=>m.map(te=>{const ie=te.lastMessage;let re=0;return te.messages&&Object.values(te.messages).forEach(se=>{var W;se.createdBy!==s.uid&&!((W=se.readBy)!=null&&W.includes(s.uid))&&(re+=1)}),{id:te.id,name:te.name,lastMessage:ie,unreadCount:re}}),[m,s]);return E.jsxs("div",{className:"h-full flex flex-col md:flex-row",children:[E.jsxs("div",{className:"md:w-80 w-full border-r dark:border-gray-700 bg-white dark:bg-gray-800 overflow-y-auto",children:[E.jsxs("div",{className:"p-4 flex items-center justify-between",children:[E.jsx("h2",{className:"text-lg font-bold",children:"Messages"}),E.jsxs("button",{onClick:()=>L(!0),className:"text-blue-500 hover:text-blue-700 text-sm flex items-center gap-1",children:[E.jsx(pw,{}),E.jsx("span",{className:"hidden md:inline",children:"New Chat"})]})]}),E.jsxs("div",{className:"px-4 py-2",children:[E.jsx("h3",{className:"text-sm font-semibold text-gray-600 dark:text-gray-300 mb-2",children:"Your Chats"}),F.length>0?E.jsx("ul",{className:"space-y-1",children:F.map(te=>E.jsxs("li",{onClick:()=>{n(null),o({id:te.id,name:te.name})},className:`p-2 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 ${r&&r.id===te.id?"bg-blue-100 dark:bg-gray-700":""}`,children:[E.jsxs("div",{className:"flex justify-between items-center",children:[E.jsx("span",{className:"font-medium",children:te.name}),te.unreadCount>0&&E.jsx("span",{className:"text-xs bg-red-500 text-white rounded-full px-2",children:te.unreadCount})]}),te.lastMessage&&E.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:te.lastMessage.text})]},te.id))}):E.jsx("p",{className:"text-sm text-gray-500",children:"No group chats yet"})]})]}),E.jsx("div",{className:"flex-1 h-full",children:e?E.jsx(qD,{dm:e}):r?E.jsx(HD,{group:r}):E.jsx("div",{className:"h-full flex items-center justify-center text-gray-500 dark:text-gray-400",children:"Select a conversation to start chatting"})}),P&&E.jsx(FD,{onClose:()=>L(!1)})]})}function qD({dm:s}){var fe;const[e,n]=ne.useState([]),[r,o]=ne.useState(""),[u,f]=ne.useState(""),[m,g]=ne.useState([]),[y,T]=ne.useState(null),w=yn.currentUser,S=Bt(),P=op.useRef(null),L=sn(et,`artifacts/${S}/public/data/dms/${s.id}`);ne.useEffect(()=>{const C=gn(L,R=>{if(R.exists()){const I=R.data().typing||[];g(I.filter(O=>O!==w.uid))}});return()=>C()},[s.id]),ne.useEffect(()=>{const C=gn(L,R=>{if(!R.exists())return;const I=R.data().messages||{},O=Object.values(I).sort((k,x)=>k.messageId-x.messageId),D=[];if(O.forEach(k=>{k.createdFor===w.uid&&k.status==="unread"&&D.push({id:k.messageId,...k})}),D.length>0){const k=D.reduce((x,He)=>(x[`messages.${He.id}.status`]="read",x),{});tn(L,k)}n(O)});return()=>C()},[s.id]),ne.useEffect(()=>{var C;(C=P.current)==null||C.scrollIntoView({behavior:"smooth"})},[e]);const K=async()=>{await tn(L,{typing:of(w.uid)}),setTimeout(()=>tn(L,{typing:wo(w.uid)}),2e3)},F=async C=>{if(C.preventDefault(),!r.trim())return;const O=(await bu(L)).data().messages||{},D=Object.keys(O).length+1,k={messageId:D,text:r.trim(),createdAt:Date.now(),createdBy:w.uid,createdFor:s.otherUser.uid,status:"unread"},x={[`messages.${D}`]:k,lastMessage:{...k},typing:wo(w.uid)};await tn(L,x),o("")},te=async C=>{T(C),o(C.text)},ie=async C=>{await tn(L,{[`messages.${C.messageId}.text`]:"[This message has been deleted]",[`messages.${C.messageId}.deleted`]:!0})},re=async C=>{C.preventDefault(),await tn(L,{[`messages.${y.messageId}.text`]:r.trim(),[`messages.${y.messageId}.edited`]:!0}),T(null),o("")},se=ne.useMemo(()=>{const C=u.trim().toLowerCase();return C?e.filter(R=>typeof R.text=="string"&&R.text.toLowerCase().includes(C)):e},[u,e]),W=((fe=s.otherUser)==null?void 0:fe.displayName)||"";return E.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-gray-900",children:[E.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:[E.jsx("h3",{className:"text-lg font-bold",children:W}),m.length>0&&E.jsxs("p",{className:"text-sm text-gray-400",children:[m.join(", ")," ",m.length===1?"is":"are"," typing..."]})]}),E.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[E.jsx("input",{type:"text",placeholder:"Search in chat...",value:u,onChange:C=>f(C.target.value),className:"w-full mb-4 p-2 border rounded-lg bg-gray-100 dark:bg-gray-800 text-sm"}),E.jsxs("div",{className:"space-y-4",children:[se.map(C=>E.jsx("div",{className:`flex ${C.createdBy===w.uid?"justify-end":"justify-start"}`,children:E.jsxs("div",{className:`relative max-w-xs md:max-w-md p-3 rounded-2xl ${C.createdBy===w.uid?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:[E.jsx("div",{className:"whitespace-pre-wrap",children:E.jsx(uu,{remarkPlugins:[cu],children:C.text})}),C.edited&&E.jsx("span",{className:"text-xs ml-1",children:"(edited)"}),C.status==="read"&&C.createdBy===w.uid&&E.jsx("span",{className:"absolute bottom-0 right-2 text-xs",children:""}),C.createdBy===w.uid&&!C.deleted&&E.jsxs("div",{className:"mt-1 flex gap-2 text-xs",children:[E.jsx("button",{onClick:()=>te(C),className:"underline",children:"Edit"}),E.jsx("button",{onClick:()=>ie(C),className:"text-red-500 underline",children:"Delete"})]})]})},C.messageId)),E.jsx("div",{ref:P})]})]}),E.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:E.jsxs("form",{onSubmit:y?re:F,className:"flex gap-2",children:[E.jsx("input",{value:r,onChange:C=>o(C.target.value),onKeyDown:K,placeholder:y?"Editing message...":"Type a message...",className:"flex-1 p-2 border-none rounded-lg focus:ring-2 focus:ring-blue-500 bg-gray-100 dark:bg-gray-700"}),E.jsx("button",{type:"submit",className:"p-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:E.jsx(fg,{})})]})})]})}function HD({group:s}){const[e,n]=ne.useState([]),[r,o]=ne.useState(""),[u,f]=ne.useState(""),[m,g]=ne.useState([]),[y,T]=ne.useState(null),w=yn.currentUser,S=Bt(),P=op.useRef(null),L=sn(et,`artifacts/${S}/public/data/groupchats/${s.id}`);ne.useEffect(()=>{const W=gn(L,fe=>{if(fe.exists()){const C=fe.data().typing||[];g(C.filter(R=>R!==w.uid))}});return()=>W()},[s.id]),ne.useEffect(()=>{const W=gn(L,fe=>{if(!fe.exists())return;const C=fe.data().messages||{},R=Object.values(C).sort((I,O)=>I.messageId-O.messageId);n(R)});return()=>W()},[s.id]),ne.useEffect(()=>{var W;(W=P.current)==null||W.scrollIntoView({behavior:"smooth"})},[e]);const K=async()=>{await tn(L,{typing:of(w.uid)}),setTimeout(()=>tn(L,{typing:wo(w.uid)}),2e3)},F=async W=>{if(W.preventDefault(),!r.trim())return;const R=(await bu(L)).data().messages||{},I=Object.keys(R).length+1,O={messageId:I,text:r.trim(),createdAt:Date.now(),createdBy:w.uid},D={[`messages.${I}`]:O,lastMessage:{...O},typing:wo(w.uid)};await tn(L,D),o("")},te=async W=>{T(W),o(W.text)},ie=async W=>{await tn(L,{[`messages.${W.messageId}.text`]:"[This message has been deleted]",[`messages.${W.messageId}.deleted`]:!0})},re=async W=>{W.preventDefault(),await tn(L,{[`messages.${y.messageId}.text`]:r.trim(),[`messages.${y.messageId}.edited`]:!0}),T(null),o("")},se=ne.useMemo(()=>{const W=u.trim().toLowerCase();return W?e.filter(fe=>typeof fe.text=="string"&&fe.text.toLowerCase().includes(W)):e},[u,e]);return E.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-gray-900",children:[E.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 shadow-sm",children:[E.jsx("h3",{className:"text-lg font-bold",children:s.name}),m.length>0&&E.jsxs("p",{className:"text-sm text-gray-400",children:[m.join(", ")," ",m.length===1?"is":"are"," typing..."]})]}),E.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:[E.jsx("input",{type:"text",placeholder:"Search in chat...",value:u,onChange:W=>f(W.target.value),className:"w-full mb-4 p-2 border rounded-lg bg-gray-100 dark:bg-gray-800 text-sm"}),E.jsxs("div",{className:"space-y-4",children:[se.map(W=>E.jsx("div",{className:`flex ${W.createdBy===w.uid?"justify-end":"justify-start"}`,children:E.jsxs("div",{className:`relative max-w-xs md:max-w-md p-3 rounded-2xl ${W.createdBy===w.uid?"bg-blue-500 text-white":"bg-gray-200 dark:bg-gray-700"}`,children:[E.jsx("div",{className:"whitespace-pre-wrap",children:E.jsx(uu,{remarkPlugins:[cu],children:W.text})}),W.edited&&E.jsx("span",{className:"text-xs ml-1",children:"(edited)"}),W.createdBy===w.uid&&!W.deleted&&E.jsxs("div",{className:"mt-1 flex gap-2 text-xs",children:[E.jsx("button",{onClick:()=>te(W),className:"underline",children:"Edit"}),E.jsx("button",{onClick:()=>ie(W),className:"text-red-500 underline",children:"Delete"})]})]})},W.messageId)),E.jsx("div",{ref:P})]})]}),E.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700",children:E.jsxs("form",{onSubmit:y?re:F,className:"flex gap-2",children:[E.jsx("input",{value:r,onChange:W=>o(W.target.value),onKeyDown:K,placeholder:y?"Editing message...":"Type a message...",className:"flex-1 p-2 border-none rounded-lg focus:ring-2 focus:ring-blue-500 bg-gray-100 dark:bg-gray-700"}),E.jsx("button",{type:"submit",className:"p-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:E.jsx(fg,{})})]})})]})}function FD({onClose:s}){const[e,n]=ne.useState(""),[r,o]=ne.useState([]),[u,f]=ne.useState([]),[m,g]=ne.useState(!0),y=yn.currentUser,T=Bt();ne.useEffect(()=>{const P=Gn(et,`artifacts/${T}/public/data/users`),L=gn(P,K=>{const F=[];K.forEach(te=>{const ie=te.data();ie.uid!==y.uid&&F.push(ie)}),f(F),g(!1)});return()=>L()},[T]);const w=P=>{o(L=>L.includes(P)?L.filter(K=>K!==P):[...L,P])},S=async()=>{const P=e.trim();if(!P){alert("Group name is required");return}if(r.length===0){alert("Please select at least one member");return}const L=crypto.randomUUID(),K=sn(et,`artifacts/${T}/public/data/groupchats/${L}`),F={name:P,members:[y.uid,...r],messages:{},typing:[],createdAt:bo(),createdBy:y.uid,lastMessage:null};await Dh(K,F),s()};return E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-xl w-full max-w-md m-4 max-h-[90vh] overflow-y-auto",children:[E.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create New Group"}),E.jsxs("div",{className:"mb-4",children:[E.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Group Name"}),E.jsx("input",{type:"text",value:e,onChange:P=>n(P.target.value),className:"w-full p-2 rounded-md bg-gray-100 dark:bg-gray-700 border-none"})]}),E.jsxs("div",{className:"mb-4",children:[E.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Select Members"}),m?E.jsx("p",{className:"text-sm text-gray-500",children:"Loading members..."}):E.jsx("div",{className:"max-h-60 overflow-y-auto space-y-2",children:u.map(P=>E.jsxs("label",{className:"flex items-center gap-2",children:[E.jsx("input",{type:"checkbox",checked:r.includes(P.uid),onChange:()=>w(P.uid)}),E.jsxs("span",{children:[P.displayName," ",E.jsx("span",{className:"text-sm font-semibold text-gray-600 dark:text-gray-300 mb-2",children:"<"+P.email+">"})]})]},P.uid))})]}),E.jsxs("div",{className:"flex justify-end gap-2",children:[E.jsx("button",{onClick:s,className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 rounded-md",children:"Cancel"}),E.jsx("button",{onClick:S,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Create"})]})]})})}function GD(){const[s,e]=ne.useState([]),[n,r]=ne.useState(!0),[o,u]=ne.useState([]),[f,m]=ne.useState(!0),g=Bt();ne.useEffect(()=>{const w=Gn(et,`artifacts/${g}/public/data/invites`),S=ia(w,To("createdAt","desc")),P=gn(S,L=>{e(L.docs.map(K=>({id:K.id,...K.data()}))),r(!1)});return()=>P()},[g]),ne.useEffect(()=>{const w=Gn(et,`artifacts/${g}/public/data/users`),S=ia(w,To("displayName")),P=gn(S,L=>{u(L.docs.map(K=>K.data())),m(!1)});return()=>P()},[g]);const y=w=>w?new Date(w.seconds*1e3).toLocaleString():"N/A",T=w=>{if(!w)return"";try{return Nm.AES.decrypt(w,dw).toString(Nm.enc.Utf8)}catch{return""}};return E.jsxs("div",{className:"space-y-12",children:[E.jsx("h1",{className:"text-3xl font-bold",children:"Admin Panel"}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Invitation Codes"}),E.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:n?E.jsx("p",{className:"p-4",children:"Loading invites..."}):E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[E.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:E.jsxs("tr",{children:[E.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),E.jsx("th",{scope:"col",className:"px-6 py-3",children:"Code"}),E.jsx("th",{scope:"col",className:"px-6 py-3",children:"Generated By"}),E.jsx("th",{scope:"col",className:"px-6 py-3",children:"Purpose / Details"}),E.jsx("th",{scope:"col",className:"px-6 py-3",children:"Generated At"}),E.jsx("th",{scope:"col",className:"px-6 py-3",children:"Used At"})]})}),E.jsx("tbody",{children:s.map(w=>E.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700",children:[E.jsx("td",{className:"px-6 py-4",children:w.isUsed?E.jsx("span",{className:"px-2 py-1 text-xs font-medium text-red-800 bg-red-100 rounded-full",children:"Used"}):E.jsx("span",{className:"px-2 py-1 text-xs font-medium text-green-800 bg-green-100 rounded-full",children:"Available"})}),E.jsx("td",{className:"px-6 py-4 font-mono break-all",children:w.code}),E.jsx("td",{className:"px-6 py-4",children:w.generatedByName||"N/A"}),E.jsx("td",{className:"px-6 py-4",children:w.purpose||w.recipientEmail||"-"}),E.jsx("td",{className:"px-6 py-4",children:y(w.createdAt)}),E.jsx("td",{className:"px-6 py-4",children:y(w.usedAt)})]},w.id))})]})})})]}),E.jsxs("div",{children:[E.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Members"}),E.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:f?E.jsx("p",{className:"p-4",children:"Loading members..."}):E.jsx("div",{className:"overflow-x-auto",children:E.jsxs("table",{className:"min-w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[E.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:E.jsxs("tr",{children:[E.jsx("th",{scope:"col",className:"px-6 py-3",children:"Name"}),E.jsx("th",{scope:"col",className:"px-6 py-3",children:"Email"}),E.jsx("th",{scope:"col",className:"px-6 py-3",children:"Phone Number"}),E.jsx("th",{scope:"col",className:"px-6 py-3",children:"Role"})]})}),E.jsx("tbody",{children:o.map(w=>E.jsxs("tr",{className:"bg-white dark:bg-gray-800 border-b dark:border-gray-700",children:[E.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.displayName}),E.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.email}),E.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:T(w.phoneNumberEncrypted)}),E.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w.isAdmin?E.jsx("span",{className:"px-2 py-1 text-xs font-medium text-blue-800 bg-blue-100 rounded-full",children:"Admin"}):E.jsx("span",{className:"px-2 py-1 text-xs font-medium text-gray-800 bg-gray-100 rounded-full",children:"Member"})})]},w.uid))})]})})})]})]})}function QD({onClose:s}){const[e,n]=ne.useState(""),[r,o]=ne.useState(!1),[u,f]=ne.useState(!1),[m,g]=ne.useState(""),[y,T]=ne.useState(""),[w,S]=ne.useState(!1),[P,L]=ne.useState(!1),K=yn.currentUser,F=Bt(),te=async()=>{if(K){o(!0);try{const se=crypto.randomUUID();await Dh(sn(et,`artifacts/${F}/public/data/invites/${se}`),{code:se,generatedBy:K.uid,generatedByName:K.displayName,createdAt:bo(),isUsed:!1,usedBy:null,purpose:y||null}),n(se),L(!1)}finally{o(!1)}}},ie=()=>{navigator.clipboard.writeText(e),f(!0),setTimeout(()=>f(!1),2e3)},re=async()=>{if(!m.trim()){alert("Please provide at least one email address.");return}if(!EE||!TE||!Oh){alert("Email sending is not configured. Please provide EmailJS credentials.");return}const se=m.split(",").map(W=>W.trim()).filter(W=>W.length>0);if(se.length===0){alert("Please provide at least one valid email address.");return}S(!0);try{for(const W of se){const fe=crypto.randomUUID();await Dh(sn(et,`artifacts/${F}/public/data/invites/${fe}`),{code:fe,generatedBy:K.uid,generatedByName:K.displayName,createdAt:bo(),isUsed:!1,usedBy:null,purpose:y||null,recipientEmail:W}),await wE.send(EE,TE,{to_email:W,invite_code:fe,purpose:y||"",inviter_name:K.displayName||"Administrator",app_link:`${window.location.origin}${window.location.pathname}?invite=${fe}`},Oh)}L(!0),g(""),T("")}catch(W){console.error("Error sending invites:",W),alert("Failed to send invites. Please try again.")}finally{S(!1)}};return E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:E.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-2xl w-full max-w-lg m-4 max-h-[95vh] overflow-y-auto",children:[E.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Invite a New Member"}),E.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"You can generate a unique code for manual sharing or send invites directly via email. Optionally specify a purpose or details for the invite."}),E.jsxs("div",{className:"space-y-4 mb-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Email Addresses"}),E.jsx("input",{type:"text",value:m,onChange:se=>g(se.target.value),placeholder:"Enter one or more emails separated by commas",className:"w-full p-2 rounded-md bg-gray-100 dark:bg-gray-700 border-none"})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Purpose / Details (optional)"}),E.jsx("input",{type:"text",value:y,onChange:se=>T(se.target.value),placeholder:"e.g. Board meeting, Beta tester",className:"w-full p-2 rounded-md bg-gray-100 dark:bg-gray-700 border-none"})]}),E.jsx("button",{onClick:re,disabled:w,className:"w-full py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-blue-400",children:w?"Sending...":"Send Email Invites"}),P&&E.jsx("p",{className:"text-green-600 text-sm",children:"Invitations sent successfully!"})]}),E.jsx("hr",{className:"my-4 border-gray-300 dark:border-gray-600"}),E.jsx("div",{className:"space-y-4",children:e?E.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-700 p-3 rounded-lg",children:[E.jsx("input",{type:"text",readOnly:!0,value:e,className:"flex-1 bg-transparent border-none focus:ring-0 font-mono text-lg"}),E.jsxs("button",{onClick:ie,className:"px-3 py-1 text-sm font-semibold bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center gap-1",children:[E.jsx(wD,{}),u?"Copied!":"Copy"]})]}):E.jsxs(E.Fragment,{children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Purpose / Details (optional)"}),E.jsx("input",{type:"text",value:y,onChange:se=>T(se.target.value),placeholder:"e.g. Event attendee",className:"w-full p-2 rounded-md bg-gray-100 dark:bg-gray-700 border-none"})]}),E.jsx("button",{onClick:te,disabled:r,className:"w-full py-3 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 disabled:bg-blue-400",children:r?"Generating...":"Generate Invite Code"})]})}),E.jsx("button",{onClick:s,className:"mt-6 w-full py-2 bg-gray-200 dark:bg-gray-600 rounded-lg",children:"Close"})]})})}function KD({post:s,onClose:e}){return E.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",onClick:e,children:E.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",onClick:n=>n.stopPropagation(),children:E.jsx(uf,{post:s})})})}function YD(){return E.jsx(CD,{children:E.jsx(DD,{})})}WA.createRoot(document.getElementById("root")).render(E.jsx(op.StrictMode,{children:E.jsx(YD,{})}));
